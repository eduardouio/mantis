(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function Qn(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ke={},es=[],ft=()=>{},wl=()=>!1,on=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Jn=e=>e.startsWith("onUpdate:"),qe=Object.assign,Xn=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},la=Object.prototype.hasOwnProperty,$e=(e,t)=>la.call(e,t),ae=Array.isArray,ts=e=>Ts(e)==="[object Map]",is=e=>Ts(e)==="[object Set]",Co=e=>Ts(e)==="[object Date]",fe=e=>typeof e=="function",Te=e=>typeof e=="string",nt=e=>typeof e=="symbol",Se=e=>e!==null&&typeof e=="object",$l=e=>(Se(e)||fe(e))&&fe(e.then)&&fe(e.catch),El=Object.prototype.toString,Ts=e=>El.call(e),ra=e=>Ts(e).slice(8,-1),Cl=e=>Ts(e)==="[object Object]",Zn=e=>Te(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,bs=Qn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ln=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},aa=/-\w/g,Vt=ln(e=>e.replace(aa,t=>t.slice(1).toUpperCase())),ia=/\B([A-Z])/g,Yt=ln(e=>e.replace(ia,"-$1").toLowerCase()),Sl=ln(e=>e.charAt(0).toUpperCase()+e.slice(1)),yn=ln(e=>e?`on${Sl(e)}`:""),Mt=(e,t)=>!Object.is(e,t),Hs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},kl=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},rn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let So;const an=()=>So||(So=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function eo(e){if(ae(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],l=Te(o)?fa(o):eo(o);if(l)for(const r in l)t[r]=l[r]}return t}else if(Te(e)||Se(e))return e}const ca=/;(?![^(]*\))/g,da=/:([^]+)/,ua=/\/\*[^]*?\*\//g;function fa(e){const t={};return e.replace(ua,"").split(ca).forEach(n=>{if(n){const o=n.split(da);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function le(e){let t="";if(Te(e))t=e;else if(ae(e))for(let n=0;n<e.length;n++){const o=le(e[n]);o&&(t+=o+" ")}else if(Se(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const pa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_a=Qn(pa);function Rl(e){return!!e||e===""}function ha(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Ns(e[o],t[o]);return n}function Ns(e,t){if(e===t)return!0;let n=Co(e),o=Co(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=nt(e),o=nt(t),n||o)return e===t;if(n=ae(e),o=ae(t),n||o)return n&&o?ha(e,t):!1;if(n=Se(e),o=Se(t),n||o){if(!n||!o)return!1;const l=Object.keys(e).length,r=Object.keys(t).length;if(l!==r)return!1;for(const a in e){const i=e.hasOwnProperty(a),d=t.hasOwnProperty(a);if(i&&!d||!i&&d||!Ns(e[a],t[a]))return!1}}return String(e)===String(t)}function to(e,t){return e.findIndex(n=>Ns(n,t))}const Al=e=>!!(e&&e.__v_isRef===!0),h=e=>Te(e)?e:e==null?"":ae(e)||Se(e)&&(e.toString===El||!fe(e.toString))?Al(e)?h(e.value):JSON.stringify(e,Dl,2):String(e),Dl=(e,t)=>Al(t)?Dl(e,t.value):ts(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,l],r)=>(n[xn(o,r)+" =>"]=l,n),{})}:is(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>xn(n))}:nt(t)?xn(t):Se(t)&&!ae(t)&&!Cl(t)?String(t):t,xn=(e,t="")=>{var n;return nt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Ve;class Ol{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ve,!t&&Ve&&(this.index=(Ve.scopes||(Ve.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ve;try{return Ve=this,t()}finally{Ve=n}}}on(){++this._on===1&&(this.prevScope=Ve,Ve=this)}off(){this._on>0&&--this._on===0&&(Ve=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.parent=void 0}}}function Il(e){return new Ol(e)}function Pl(){return Ve}function ba(e,t=!1){Ve&&Ve.cleanups.push(e)}let Ae;const wn=new WeakSet;class Tl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ve&&Ve.active&&Ve.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wn.has(this)&&(wn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ko(this),Fl(this);const t=Ae,n=st;Ae=this,st=!0;try{return this.fn()}finally{Ml(this),Ae=t,st=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)oo(t);this.deps=this.depsTail=void 0,ko(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Tn(this)&&this.run()}get dirty(){return Tn(this)}}let Nl=0,ms,gs;function jl(e,t=!1){if(e.flags|=8,t){e.next=gs,gs=e;return}e.next=ms,ms=e}function so(){Nl++}function no(){if(--Nl>0)return;if(gs){let t=gs;for(gs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ms;){let t=ms;for(ms=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Fl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ml(e){let t,n=e.depsTail,o=n;for(;o;){const l=o.prevDep;o.version===-1?(o===n&&(n=l),oo(o),ma(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=l}e.deps=t,e.depsTail=n}function Tn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Vl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Vl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Es)||(e.globalVersion=Es,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Tn(e))))return;e.flags|=2;const t=e.dep,n=Ae,o=st;Ae=e,st=!0;try{Fl(e);const l=e.fn(e._value);(t.version===0||Mt(l,e._value))&&(e.flags|=128,e._value=l,t.version++)}catch(l){throw t.version++,l}finally{Ae=n,st=o,Ml(e),e.flags&=-3}}function oo(e,t=!1){const{dep:n,prevSub:o,nextSub:l}=e;if(o&&(o.nextSub=l,e.prevSub=void 0),l&&(l.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)oo(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ma(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let st=!0;const Ul=[];function Ct(){Ul.push(st),st=!1}function St(){const e=Ul.pop();st=e===void 0?!0:e}function ko(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ae;Ae=void 0;try{t()}finally{Ae=n}}}let Es=0;class ga{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class lo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ae||!st||Ae===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ae)n=this.activeLink=new ga(Ae,this),Ae.deps?(n.prevDep=Ae.depsTail,Ae.depsTail.nextDep=n,Ae.depsTail=n):Ae.deps=Ae.depsTail=n,Ll(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Ae.depsTail,n.nextDep=void 0,Ae.depsTail.nextDep=n,Ae.depsTail=n,Ae.deps===n&&(Ae.deps=o)}return n}trigger(t){this.version++,Es++,this.notify(t)}notify(t){so();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{no()}}}function Ll(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Ll(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ys=new WeakMap,Wt=Symbol(""),Nn=Symbol(""),Cs=Symbol("");function Ue(e,t,n){if(st&&Ae){let o=Ys.get(e);o||Ys.set(e,o=new Map);let l=o.get(n);l||(o.set(n,l=new lo),l.map=o,l.key=n),l.track()}}function vt(e,t,n,o,l,r){const a=Ys.get(e);if(!a){Es++;return}const i=d=>{d&&d.trigger()};if(so(),t==="clear")a.forEach(i);else{const d=ae(e),_=d&&Zn(n);if(d&&n==="length"){const f=Number(o);a.forEach((u,c)=>{(c==="length"||c===Cs||!nt(c)&&c>=f)&&i(u)})}else switch((n!==void 0||a.has(void 0))&&i(a.get(n)),_&&i(a.get(Cs)),t){case"add":d?_&&i(a.get("length")):(i(a.get(Wt)),ts(e)&&i(a.get(Nn)));break;case"delete":d||(i(a.get(Wt)),ts(e)&&i(a.get(Nn)));break;case"set":ts(e)&&i(a.get(Wt));break}}no()}function va(e,t){const n=Ys.get(e);return n&&n.get(t)}function Qt(e){const t=xe(e);return t===e?t:(Ue(t,"iterate",Cs),Ze(e)?t:t.map(Me))}function cn(e){return Ue(e=xe(e),"iterate",Cs),e}const ya={__proto__:null,[Symbol.iterator](){return $n(this,Symbol.iterator,Me)},concat(...e){return Qt(this).concat(...e.map(t=>ae(t)?Qt(t):t))},entries(){return $n(this,"entries",e=>(e[1]=Me(e[1]),e))},every(e,t){return bt(this,"every",e,t,void 0,arguments)},filter(e,t){return bt(this,"filter",e,t,n=>n.map(Me),arguments)},find(e,t){return bt(this,"find",e,t,Me,arguments)},findIndex(e,t){return bt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return bt(this,"findLast",e,t,Me,arguments)},findLastIndex(e,t){return bt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return bt(this,"forEach",e,t,void 0,arguments)},includes(...e){return En(this,"includes",e)},indexOf(...e){return En(this,"indexOf",e)},join(e){return Qt(this).join(e)},lastIndexOf(...e){return En(this,"lastIndexOf",e)},map(e,t){return bt(this,"map",e,t,void 0,arguments)},pop(){return fs(this,"pop")},push(...e){return fs(this,"push",e)},reduce(e,...t){return Ro(this,"reduce",e,t)},reduceRight(e,...t){return Ro(this,"reduceRight",e,t)},shift(){return fs(this,"shift")},some(e,t){return bt(this,"some",e,t,void 0,arguments)},splice(...e){return fs(this,"splice",e)},toReversed(){return Qt(this).toReversed()},toSorted(e){return Qt(this).toSorted(e)},toSpliced(...e){return Qt(this).toSpliced(...e)},unshift(...e){return fs(this,"unshift",e)},values(){return $n(this,"values",Me)}};function $n(e,t,n){const o=cn(e),l=o[t]();return o!==e&&!Ze(e)&&(l._next=l.next,l.next=()=>{const r=l._next();return r.done||(r.value=n(r.value)),r}),l}const xa=Array.prototype;function bt(e,t,n,o,l,r){const a=cn(e),i=a!==e&&!Ze(e),d=a[t];if(d!==xa[t]){const u=d.apply(e,r);return i?Me(u):u}let _=n;a!==e&&(i?_=function(u,c){return n.call(this,Me(u),c,e)}:n.length>2&&(_=function(u,c){return n.call(this,u,c,e)}));const f=d.call(a,_,o);return i&&l?l(f):f}function Ro(e,t,n,o){const l=cn(e);let r=n;return l!==e&&(Ze(e)?n.length>3&&(r=function(a,i,d){return n.call(this,a,i,d,e)}):r=function(a,i,d){return n.call(this,a,Me(i),d,e)}),l[t](r,...o)}function En(e,t,n){const o=xe(e);Ue(o,"iterate",Cs);const l=o[t](...n);return(l===-1||l===!1)&&io(n[0])?(n[0]=xe(n[0]),o[t](...n)):l}function fs(e,t,n=[]){Ct(),so();const o=xe(e)[t].apply(e,n);return no(),St(),o}const wa=Qn("__proto__,__v_isRef,__isVue"),ql=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(nt));function $a(e){nt(e)||(e=String(e));const t=xe(this);return Ue(t,"has",e),t.hasOwnProperty(e)}class Hl{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const l=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!l;if(n==="__v_isReadonly")return l;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(l?r?Pa:Kl:r?Wl:Gl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const a=ae(t);if(!l){let d;if(a&&(d=ya[n]))return d;if(n==="hasOwnProperty")return $a}const i=Reflect.get(t,n,De(t)?t:o);if((nt(n)?ql.has(n):wa(n))||(l||Ue(t,"get",n),r))return i;if(De(i)){const d=a&&Zn(n)?i:i.value;return l&&Se(d)?Fn(d):d}return Se(i)?l?Fn(i):js(i):i}}class Bl extends Hl{constructor(t=!1){super(!1,t)}set(t,n,o,l){let r=t[n];if(!this._isShallow){const d=Ut(r);if(!Ze(o)&&!Ut(o)&&(r=xe(r),o=xe(o)),!ae(t)&&De(r)&&!De(o))return d||(r.value=o),!0}const a=ae(t)&&Zn(n)?Number(n)<t.length:$e(t,n),i=Reflect.set(t,n,o,De(t)?t:l);return t===xe(l)&&(a?Mt(o,r)&&vt(t,"set",n,o):vt(t,"add",n,o)),i}deleteProperty(t,n){const o=$e(t,n);t[n];const l=Reflect.deleteProperty(t,n);return l&&o&&vt(t,"delete",n,void 0),l}has(t,n){const o=Reflect.has(t,n);return(!nt(n)||!ql.has(n))&&Ue(t,"has",n),o}ownKeys(t){return Ue(t,"iterate",ae(t)?"length":Wt),Reflect.ownKeys(t)}}class Ea extends Hl{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Ca=new Bl,Sa=new Ea,ka=new Bl(!0);const jn=e=>e,Vs=e=>Reflect.getPrototypeOf(e);function Ra(e,t,n){return function(...o){const l=this.__v_raw,r=xe(l),a=ts(r),i=e==="entries"||e===Symbol.iterator&&a,d=e==="keys"&&a,_=l[e](...o),f=n?jn:t?zs:Me;return!t&&Ue(r,"iterate",d?Nn:Wt),{next(){const{value:u,done:c}=_.next();return c?{value:u,done:c}:{value:i?[f(u[0]),f(u[1])]:f(u),done:c}},[Symbol.iterator](){return this}}}}function Us(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Aa(e,t){const n={get(l){const r=this.__v_raw,a=xe(r),i=xe(l);e||(Mt(l,i)&&Ue(a,"get",l),Ue(a,"get",i));const{has:d}=Vs(a),_=t?jn:e?zs:Me;if(d.call(a,l))return _(r.get(l));if(d.call(a,i))return _(r.get(i));r!==a&&r.get(l)},get size(){const l=this.__v_raw;return!e&&Ue(xe(l),"iterate",Wt),l.size},has(l){const r=this.__v_raw,a=xe(r),i=xe(l);return e||(Mt(l,i)&&Ue(a,"has",l),Ue(a,"has",i)),l===i?r.has(l):r.has(l)||r.has(i)},forEach(l,r){const a=this,i=a.__v_raw,d=xe(i),_=t?jn:e?zs:Me;return!e&&Ue(d,"iterate",Wt),i.forEach((f,u)=>l.call(r,_(f),_(u),a))}};return qe(n,e?{add:Us("add"),set:Us("set"),delete:Us("delete"),clear:Us("clear")}:{add(l){!t&&!Ze(l)&&!Ut(l)&&(l=xe(l));const r=xe(this);return Vs(r).has.call(r,l)||(r.add(l),vt(r,"add",l,l)),this},set(l,r){!t&&!Ze(r)&&!Ut(r)&&(r=xe(r));const a=xe(this),{has:i,get:d}=Vs(a);let _=i.call(a,l);_||(l=xe(l),_=i.call(a,l));const f=d.call(a,l);return a.set(l,r),_?Mt(r,f)&&vt(a,"set",l,r):vt(a,"add",l,r),this},delete(l){const r=xe(this),{has:a,get:i}=Vs(r);let d=a.call(r,l);d||(l=xe(l),d=a.call(r,l)),i&&i.call(r,l);const _=r.delete(l);return d&&vt(r,"delete",l,void 0),_},clear(){const l=xe(this),r=l.size!==0,a=l.clear();return r&&vt(l,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(l=>{n[l]=Ra(l,e,t)}),n}function ro(e,t){const n=Aa(e,t);return(o,l,r)=>l==="__v_isReactive"?!e:l==="__v_isReadonly"?e:l==="__v_raw"?o:Reflect.get($e(n,l)&&l in o?n:o,l,r)}const Da={get:ro(!1,!1)},Oa={get:ro(!1,!0)},Ia={get:ro(!0,!1)};const Gl=new WeakMap,Wl=new WeakMap,Kl=new WeakMap,Pa=new WeakMap;function Ta(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Na(e){return e.__v_skip||!Object.isExtensible(e)?0:Ta(ra(e))}function js(e){return Ut(e)?e:ao(e,!1,Ca,Da,Gl)}function Yl(e){return ao(e,!1,ka,Oa,Wl)}function Fn(e){return ao(e,!0,Sa,Ia,Kl)}function ao(e,t,n,o,l){if(!Se(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Na(e);if(r===0)return e;const a=l.get(e);if(a)return a;const i=new Proxy(e,r===2?o:n);return l.set(e,i),i}function $t(e){return Ut(e)?$t(e.__v_raw):!!(e&&e.__v_isReactive)}function Ut(e){return!!(e&&e.__v_isReadonly)}function Ze(e){return!!(e&&e.__v_isShallow)}function io(e){return e?!!e.__v_raw:!1}function xe(e){const t=e&&e.__v_raw;return t?xe(t):e}function co(e){return!$e(e,"__v_skip")&&Object.isExtensible(e)&&kl(e,"__v_skip",!0),e}const Me=e=>Se(e)?js(e):e,zs=e=>Se(e)?Fn(e):e;function De(e){return e?e.__v_isRef===!0:!1}function pe(e){return zl(e,!1)}function ja(e){return zl(e,!0)}function zl(e,t){return De(e)?e:new Fa(e,t)}class Fa{constructor(t,n){this.dep=new lo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:xe(t),this._value=n?t:Me(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Ze(t)||Ut(t);t=o?t:xe(t),Mt(t,n)&&(this._rawValue=t,this._value=o?t:Me(t),this.dep.trigger())}}function me(e){return De(e)?e.value:e}const Ma={get:(e,t,n)=>t==="__v_raw"?e:me(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const l=e[t];return De(l)&&!De(n)?(l.value=n,!0):Reflect.set(e,t,n,o)}};function Ql(e){return $t(e)?e:new Proxy(e,Ma)}function Va(e){const t=ae(e)?new Array(e.length):{};for(const n in e)t[n]=Jl(e,n);return t}class Ua{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return va(xe(this._object),this._key)}}class La{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function qa(e,t,n){return De(e)?e:fe(e)?new La(e):Se(e)&&arguments.length>1?Jl(e,t,n):pe(e)}function Jl(e,t,n){const o=e[t];return De(o)?o:new Ua(e,t,n)}class Ha{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new lo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Es-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Ae!==this)return jl(this,!0),!0}get value(){const t=this.dep.track();return Vl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ba(e,t,n=!1){let o,l;return fe(e)?o=e:(o=e.get,l=e.set),new Ha(o,l,n)}const Ls={},Qs=new WeakMap;let Ht;function Ga(e,t=!1,n=Ht){if(n){let o=Qs.get(n);o||Qs.set(n,o=[]),o.push(e)}}function Wa(e,t,n=ke){const{immediate:o,deep:l,once:r,scheduler:a,augmentJob:i,call:d}=n,_=G=>l?G:Ze(G)||l===!1||l===0?yt(G,1):yt(G);let f,u,c,b,A=!1,v=!1;if(De(e)?(u=()=>e.value,A=Ze(e)):$t(e)?(u=()=>_(e),A=!0):ae(e)?(v=!0,A=e.some(G=>$t(G)||Ze(G)),u=()=>e.map(G=>{if(De(G))return G.value;if($t(G))return _(G);if(fe(G))return d?d(G,2):G()})):fe(e)?t?u=d?()=>d(e,2):e:u=()=>{if(c){Ct();try{c()}finally{St()}}const G=Ht;Ht=f;try{return d?d(e,3,[b]):e(b)}finally{Ht=G}}:u=ft,t&&l){const G=u,Y=l===!0?1/0:l;u=()=>yt(G(),Y)}const x=Pl(),U=()=>{f.stop(),x&&x.active&&Xn(x.effects,f)};if(r&&t){const G=t;t=(...Y)=>{G(...Y),U()}}let B=v?new Array(e.length).fill(Ls):Ls;const K=G=>{if(!(!(f.flags&1)||!f.dirty&&!G))if(t){const Y=f.run();if(l||A||(v?Y.some((y,k)=>Mt(y,B[k])):Mt(Y,B))){c&&c();const y=Ht;Ht=f;try{const k=[Y,B===Ls?void 0:v&&B[0]===Ls?[]:B,b];B=Y,d?d(t,3,k):t(...k)}finally{Ht=y}}}else f.run()};return i&&i(K),f=new Tl(u),f.scheduler=a?()=>a(K,!1):K,b=G=>Ga(G,!1,f),c=f.onStop=()=>{const G=Qs.get(f);if(G){if(d)d(G,4);else for(const Y of G)Y();Qs.delete(f)}},t?o?K(!0):B=f.run():a?a(K.bind(null,!0),!0):f.run(),U.pause=f.pause.bind(f),U.resume=f.resume.bind(f),U.stop=U,U}function yt(e,t=1/0,n){if(t<=0||!Se(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,De(e))yt(e.value,t,n);else if(ae(e))for(let o=0;o<e.length;o++)yt(e[o],t,n);else if(is(e)||ts(e))e.forEach(o=>{yt(o,t,n)});else if(Cl(e)){for(const o in e)yt(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&yt(e[o],t,n)}return e}function Fs(e,t,n,o){try{return o?e(...o):e()}catch(l){dn(l,t,n)}}function pt(e,t,n,o){if(fe(e)){const l=Fs(e,t,n,o);return l&&$l(l)&&l.catch(r=>{dn(r,t,n)}),l}if(ae(e)){const l=[];for(let r=0;r<e.length;r++)l.push(pt(e[r],t,n,o));return l}}function dn(e,t,n,o=!0){const l=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||ke;if(t){let i=t.parent;const d=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const f=i.ec;if(f){for(let u=0;u<f.length;u++)if(f[u](e,d,_)===!1)return}i=i.parent}if(r){Ct(),Fs(r,null,10,[e,d,_]),St();return}}Ka(e,n,l,o,a)}function Ka(e,t,n,o=!0,l=!1){if(l)throw e;console.error(e)}const Ge=[];let dt=-1;const ss=[];let Pt=null,Xt=0;const Xl=Promise.resolve();let Js=null;function un(e){const t=Js||Xl;return e?t.then(this?e.bind(this):e):t}function Ya(e){let t=dt+1,n=Ge.length;for(;t<n;){const o=t+n>>>1,l=Ge[o],r=Ss(l);r<e||r===e&&l.flags&2?t=o+1:n=o}return t}function uo(e){if(!(e.flags&1)){const t=Ss(e),n=Ge[Ge.length-1];!n||!(e.flags&2)&&t>=Ss(n)?Ge.push(e):Ge.splice(Ya(t),0,e),e.flags|=1,Zl()}}function Zl(){Js||(Js=Xl.then(tr))}function za(e){ae(e)?ss.push(...e):Pt&&e.id===-1?Pt.splice(Xt+1,0,e):e.flags&1||(ss.push(e),e.flags|=1),Zl()}function Ao(e,t,n=dt+1){for(;n<Ge.length;n++){const o=Ge[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;Ge.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function er(e){if(ss.length){const t=[...new Set(ss)].sort((n,o)=>Ss(n)-Ss(o));if(ss.length=0,Pt){Pt.push(...t);return}for(Pt=t,Xt=0;Xt<Pt.length;Xt++){const n=Pt[Xt];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Pt=null,Xt=0}}const Ss=e=>e.id==null?e.flags&2?-1:1/0:e.id;function tr(e){try{for(dt=0;dt<Ge.length;dt++){const t=Ge[dt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Fs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;dt<Ge.length;dt++){const t=Ge[dt];t&&(t.flags&=-2)}dt=-1,Ge.length=0,er(),Js=null,(Ge.length||ss.length)&&tr()}}let Le=null,sr=null;function Xs(e){const t=Le;return Le=e,sr=e&&e.type.__scopeId||null,t}function kt(e,t=Le,n){if(!t||e._n)return e;const o=(...l)=>{o._d&&tn(-1);const r=Xs(t);let a;try{a=e(...l)}finally{Xs(r),o._d&&tn(1)}return a};return o._n=!0,o._c=!0,o._d=!0,o}function ne(e,t){if(Le===null)return e;const n=hn(Le),o=e.dirs||(e.dirs=[]);for(let l=0;l<t.length;l++){let[r,a,i,d=ke]=t[l];r&&(fe(r)&&(r={mounted:r,updated:r}),r.deep&&yt(a),o.push({dir:r,instance:n,value:a,oldValue:void 0,arg:i,modifiers:d}))}return e}function Lt(e,t,n,o){const l=e.dirs,r=t&&t.dirs;for(let a=0;a<l.length;a++){const i=l[a];r&&(i.oldValue=r[a].value);let d=i.dir[o];d&&(Ct(),pt(d,n,8,[e.el,i,e,t]),St())}}const Qa=Symbol("_vte"),Ja=e=>e.__isTeleport,Xa=Symbol("_leaveCb");function fo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,fo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function nr(e,t){return fe(e)?qe({name:e.name},t,{setup:e}):e}function or(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Zs=new WeakMap;function vs(e,t,n,o,l=!1){if(ae(e)){e.forEach((A,v)=>vs(A,t&&(ae(t)?t[v]:t),n,o,l));return}if(ns(o)&&!l){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&vs(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?hn(o.component):o.el,a=l?null:r,{i,r:d}=e,_=t&&t.r,f=i.refs===ke?i.refs={}:i.refs,u=i.setupState,c=xe(u),b=u===ke?wl:A=>$e(c,A);if(_!=null&&_!==d){if(Do(t),Te(_))f[_]=null,b(_)&&(u[_]=null);else if(De(_)){_.value=null;const A=t;A.k&&(f[A.k]=null)}}if(fe(d))Fs(d,i,12,[a,f]);else{const A=Te(d),v=De(d);if(A||v){const x=()=>{if(e.f){const U=A?b(d)?u[d]:f[d]:d.value;if(l)ae(U)&&Xn(U,r);else if(ae(U))U.includes(r)||U.push(r);else if(A)f[d]=[r],b(d)&&(u[d]=f[d]);else{const B=[r];d.value=B,e.k&&(f[e.k]=B)}}else A?(f[d]=a,b(d)&&(u[d]=a)):v&&(d.value=a,e.k&&(f[e.k]=a))};if(a){const U=()=>{x(),Zs.delete(e)};U.id=-1,Zs.set(e,U),Qe(U,n)}else Do(e),x()}}}function Do(e){const t=Zs.get(e);t&&(t.flags|=8,Zs.delete(e))}an().requestIdleCallback;an().cancelIdleCallback;const ns=e=>!!e.type.__asyncLoader,lr=e=>e.type.__isKeepAlive;function Za(e,t){rr(e,"a",t)}function ei(e,t){rr(e,"da",t)}function rr(e,t,n=We){const o=e.__wdc||(e.__wdc=()=>{let l=n;for(;l;){if(l.isDeactivated)return;l=l.parent}return e()});if(fn(t,o,n),n){let l=n.parent;for(;l&&l.parent;)lr(l.parent.vnode)&&ti(o,t,n,l),l=l.parent}}function ti(e,t,n,o){const l=fn(t,e,o,!0);ar(()=>{Xn(o[t],l)},n)}function fn(e,t,n=We,o=!1){if(n){const l=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Ct();const i=Ms(n),d=pt(t,n,e,a);return i(),St(),d});return o?l.unshift(r):l.push(r),r}}const Dt=e=>(t,n=We)=>{(!As||e==="sp")&&fn(e,(...o)=>t(...o),n)},si=Dt("bm"),_t=Dt("m"),ni=Dt("bu"),oi=Dt("u"),li=Dt("bum"),ar=Dt("um"),ri=Dt("sp"),ai=Dt("rtg"),ii=Dt("rtc");function ci(e,t=We){fn("ec",e,t)}const di=Symbol.for("v-ndc");function ye(e,t,n,o){let l;const r=n,a=ae(e);if(a||Te(e)){const i=a&&$t(e);let d=!1,_=!1;i&&(d=!Ze(e),_=Ut(e),e=cn(e)),l=new Array(e.length);for(let f=0,u=e.length;f<u;f++)l[f]=t(d?_?zs(Me(e[f])):Me(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){l=new Array(e);for(let i=0;i<e;i++)l[i]=t(i+1,i,void 0,r)}else if(Se(e))if(e[Symbol.iterator])l=Array.from(e,(i,d)=>t(i,d,void 0,r));else{const i=Object.keys(e);l=new Array(i.length);for(let d=0,_=i.length;d<_;d++){const f=i[d];l[d]=t(e[f],f,d,r)}}else l=[];return l}function ui(e,t,n={},o,l){if(Le.ce||Le.parent&&ns(Le.parent)&&Le.parent.ce){const _=Object.keys(n).length>0;return w(),At(de,null,[Ce("slot",n,o)],_?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),w();const a=r&&ir(r(n)),i=n.key||a&&a.key,d=At(de,{key:(i&&!nt(i)?i:`_${t}`)+(!a&&o?"_fb":"")},a||[],a&&e._===1?64:-2);return d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),r&&r._c&&(r._d=!0),d}function ir(e){return e.some(t=>Rs(t)?!(t.type===Rt||t.type===de&&!ir(t.children)):!0)?e:null}const Mn=e=>e?Ar(e)?hn(e):Mn(e.parent):null,ys=qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Mn(e.parent),$root:e=>Mn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>dr(e),$forceUpdate:e=>e.f||(e.f=()=>{uo(e.update)}),$nextTick:e=>e.n||(e.n=un.bind(e.proxy)),$watch:e=>Pi.bind(e)}),Cn=(e,t)=>e!==ke&&!e.__isScriptSetup&&$e(e,t),fi={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:l,props:r,accessCache:a,type:i,appContext:d}=e;let _;if(t[0]!=="$"){const b=a[t];if(b!==void 0)switch(b){case 1:return o[t];case 2:return l[t];case 4:return n[t];case 3:return r[t]}else{if(Cn(o,t))return a[t]=1,o[t];if(l!==ke&&$e(l,t))return a[t]=2,l[t];if((_=e.propsOptions[0])&&$e(_,t))return a[t]=3,r[t];if(n!==ke&&$e(n,t))return a[t]=4,n[t];Vn&&(a[t]=0)}}const f=ys[t];let u,c;if(f)return t==="$attrs"&&Ue(e.attrs,"get",""),f(e);if((u=i.__cssModules)&&(u=u[t]))return u;if(n!==ke&&$e(n,t))return a[t]=4,n[t];if(c=d.config.globalProperties,$e(c,t))return c[t]},set({_:e},t,n){const{data:o,setupState:l,ctx:r}=e;return Cn(l,t)?(l[t]=n,!0):o!==ke&&$e(o,t)?(o[t]=n,!0):$e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:l,propsOptions:r,type:a}},i){let d,_;return!!(n[i]||e!==ke&&i[0]!=="$"&&$e(e,i)||Cn(t,i)||(d=r[0])&&$e(d,i)||$e(o,i)||$e(ys,i)||$e(l.config.globalProperties,i)||(_=a.__cssModules)&&_[i])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:$e(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Oo(e){return ae(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Vn=!0;function pi(e){const t=dr(e),n=e.proxy,o=e.ctx;Vn=!1,t.beforeCreate&&Io(t.beforeCreate,e,"bc");const{data:l,computed:r,methods:a,watch:i,provide:d,inject:_,created:f,beforeMount:u,mounted:c,beforeUpdate:b,updated:A,activated:v,deactivated:x,beforeDestroy:U,beforeUnmount:B,destroyed:K,unmounted:G,render:Y,renderTracked:y,renderTriggered:k,errorCaptured:D,serverPrefetch:ee,expose:T,inheritAttrs:q,components:E,directives:N,filters:j}=t;if(_&&_i(_,o,null),a)for(const ie in a){const _e=a[ie];fe(_e)&&(o[ie]=_e.bind(n))}if(l){const ie=l.call(n,n);Se(ie)&&(e.data=js(ie))}if(Vn=!0,r)for(const ie in r){const _e=r[ie],tt=fe(_e)?_e.bind(n,n):fe(_e.get)?_e.get.bind(n,n):ft,lt=!fe(_e)&&fe(_e.set)?_e.set.bind(n):ft,Xe=Z({get:tt,set:lt});Object.defineProperty(o,ie,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:je=>Xe.value=je})}if(i)for(const ie in i)cr(i[ie],o,n,ie);if(d){const ie=fe(d)?d.call(n):d;Reflect.ownKeys(ie).forEach(_e=>{Bs(_e,ie[_e])})}f&&Io(f,e,"c");function se(ie,_e){ae(_e)?_e.forEach(tt=>ie(tt.bind(n))):_e&&ie(_e.bind(n))}if(se(si,u),se(_t,c),se(ni,b),se(oi,A),se(Za,v),se(ei,x),se(ci,D),se(ii,y),se(ai,k),se(li,B),se(ar,G),se(ri,ee),ae(T))if(T.length){const ie=e.exposed||(e.exposed={});T.forEach(_e=>{Object.defineProperty(ie,_e,{get:()=>n[_e],set:tt=>n[_e]=tt,enumerable:!0})})}else e.exposed||(e.exposed={});Y&&e.render===ft&&(e.render=Y),q!=null&&(e.inheritAttrs=q),E&&(e.components=E),N&&(e.directives=N),ee&&or(e)}function _i(e,t,n=ft){ae(e)&&(e=Un(e));for(const o in e){const l=e[o];let r;Se(l)?"default"in l?r=et(l.from||o,l.default,!0):r=et(l.from||o):r=et(l),De(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[o]=r}}function Io(e,t,n){pt(ae(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function cr(e,t,n,o){let l=o.includes(".")?$r(n,o):()=>n[o];if(Te(e)){const r=t[e];fe(r)&&Pe(l,r)}else if(fe(e))Pe(l,e.bind(n));else if(Se(e))if(ae(e))e.forEach(r=>cr(r,t,n,o));else{const r=fe(e.handler)?e.handler.bind(n):t[e.handler];fe(r)&&Pe(l,r,e)}}function dr(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:l,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,i=r.get(t);let d;return i?d=i:!l.length&&!n&&!o?d=t:(d={},l.length&&l.forEach(_=>en(d,_,a,!0)),en(d,t,a)),Se(t)&&r.set(t,d),d}function en(e,t,n,o=!1){const{mixins:l,extends:r}=t;r&&en(e,r,n,!0),l&&l.forEach(a=>en(e,a,n,!0));for(const a in t)if(!(o&&a==="expose")){const i=hi[a]||n&&n[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const hi={data:Po,props:To,emits:To,methods:hs,computed:hs,beforeCreate:He,created:He,beforeMount:He,mounted:He,beforeUpdate:He,updated:He,beforeDestroy:He,beforeUnmount:He,destroyed:He,unmounted:He,activated:He,deactivated:He,errorCaptured:He,serverPrefetch:He,components:hs,directives:hs,watch:mi,provide:Po,inject:bi};function Po(e,t){return t?e?function(){return qe(fe(e)?e.call(this,this):e,fe(t)?t.call(this,this):t)}:t:e}function bi(e,t){return hs(Un(e),Un(t))}function Un(e){if(ae(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function He(e,t){return e?[...new Set([].concat(e,t))]:t}function hs(e,t){return e?qe(Object.create(null),e,t):t}function To(e,t){return e?ae(e)&&ae(t)?[...new Set([...e,...t])]:qe(Object.create(null),Oo(e),Oo(t??{})):t}function mi(e,t){if(!e)return t;if(!t)return e;const n=qe(Object.create(null),e);for(const o in t)n[o]=He(e[o],t[o]);return n}function ur(){return{app:null,config:{isNativeTag:wl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gi=0;function vi(e,t){return function(o,l=null){fe(o)||(o=qe({},o)),l!=null&&!Se(l)&&(l=null);const r=ur(),a=new WeakSet,i=[];let d=!1;const _=r.app={_uid:gi++,_component:o,_props:l,_container:null,_context:r,_instance:null,version:tc,get config(){return r.config},set config(f){},use(f,...u){return a.has(f)||(f&&fe(f.install)?(a.add(f),f.install(_,...u)):fe(f)&&(a.add(f),f(_,...u))),_},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),_},component(f,u){return u?(r.components[f]=u,_):r.components[f]},directive(f,u){return u?(r.directives[f]=u,_):r.directives[f]},mount(f,u,c){if(!d){const b=_._ceVNode||Ce(o,l);return b.appContext=r,c===!0?c="svg":c===!1&&(c=void 0),e(b,f,c),d=!0,_._container=f,f.__vue_app__=_,hn(b.component)}},onUnmount(f){i.push(f)},unmount(){d&&(pt(i,_._instance,16),e(null,_._container),delete _._container.__vue_app__)},provide(f,u){return r.provides[f]=u,_},runWithContext(f){const u=Kt;Kt=_;try{return f()}finally{Kt=u}}};return _}}let Kt=null;function Bs(e,t){if(We){let n=We.provides;const o=We.parent&&We.parent.provides;o===n&&(n=We.provides=Object.create(o)),n[e]=t}}function et(e,t,n=!1){const o=Rr();if(o||Kt){let l=Kt?Kt._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(l&&e in l)return l[e];if(arguments.length>1)return n&&fe(t)?t.call(o&&o.proxy):t}}function yi(){return!!(Rr()||Kt)}const fr={},pr=()=>Object.create(fr),_r=e=>Object.getPrototypeOf(e)===fr;function xi(e,t,n,o=!1){const l={},r=pr();e.propsDefaults=Object.create(null),hr(e,t,l,r);for(const a in e.propsOptions[0])a in l||(l[a]=void 0);n?e.props=o?l:Yl(l):e.type.props?e.props=l:e.props=r,e.attrs=r}function wi(e,t,n,o){const{props:l,attrs:r,vnode:{patchFlag:a}}=e,i=xe(l),[d]=e.propsOptions;let _=!1;if((o||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let u=0;u<f.length;u++){let c=f[u];if(pn(e.emitsOptions,c))continue;const b=t[c];if(d)if($e(r,c))b!==r[c]&&(r[c]=b,_=!0);else{const A=Vt(c);l[A]=Ln(d,i,A,b,e,!1)}else b!==r[c]&&(r[c]=b,_=!0)}}}else{hr(e,t,l,r)&&(_=!0);let f;for(const u in i)(!t||!$e(t,u)&&((f=Yt(u))===u||!$e(t,f)))&&(d?n&&(n[u]!==void 0||n[f]!==void 0)&&(l[u]=Ln(d,i,u,void 0,e,!0)):delete l[u]);if(r!==i)for(const u in r)(!t||!$e(t,u))&&(delete r[u],_=!0)}_&&vt(e.attrs,"set","")}function hr(e,t,n,o){const[l,r]=e.propsOptions;let a=!1,i;if(t)for(let d in t){if(bs(d))continue;const _=t[d];let f;l&&$e(l,f=Vt(d))?!r||!r.includes(f)?n[f]=_:(i||(i={}))[f]=_:pn(e.emitsOptions,d)||(!(d in o)||_!==o[d])&&(o[d]=_,a=!0)}if(r){const d=xe(n),_=i||ke;for(let f=0;f<r.length;f++){const u=r[f];n[u]=Ln(l,d,u,_[u],e,!$e(_,u))}}return a}function Ln(e,t,n,o,l,r){const a=e[n];if(a!=null){const i=$e(a,"default");if(i&&o===void 0){const d=a.default;if(a.type!==Function&&!a.skipFactory&&fe(d)){const{propsDefaults:_}=l;if(n in _)o=_[n];else{const f=Ms(l);o=_[n]=d.call(null,t),f()}}else o=d;l.ce&&l.ce._setProp(n,o)}a[0]&&(r&&!i?o=!1:a[1]&&(o===""||o===Yt(n))&&(o=!0))}return o}const $i=new WeakMap;function br(e,t,n=!1){const o=n?$i:t.propsCache,l=o.get(e);if(l)return l;const r=e.props,a={},i=[];let d=!1;if(!fe(e)){const f=u=>{d=!0;const[c,b]=br(u,t,!0);qe(a,c),b&&i.push(...b)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!d)return Se(e)&&o.set(e,es),es;if(ae(r))for(let f=0;f<r.length;f++){const u=Vt(r[f]);No(u)&&(a[u]=ke)}else if(r)for(const f in r){const u=Vt(f);if(No(u)){const c=r[f],b=a[u]=ae(c)||fe(c)?{type:c}:qe({},c),A=b.type;let v=!1,x=!0;if(ae(A))for(let U=0;U<A.length;++U){const B=A[U],K=fe(B)&&B.name;if(K==="Boolean"){v=!0;break}else K==="String"&&(x=!1)}else v=fe(A)&&A.name==="Boolean";b[0]=v,b[1]=x,(v||$e(b,"default"))&&i.push(u)}}const _=[a,i];return Se(e)&&o.set(e,_),_}function No(e){return e[0]!=="$"&&!bs(e)}const po=e=>e==="_"||e==="_ctx"||e==="$stable",_o=e=>ae(e)?e.map(ut):[ut(e)],Ei=(e,t,n)=>{if(t._n)return t;const o=kt((...l)=>_o(t(...l)),n);return o._c=!1,o},mr=(e,t,n)=>{const o=e._ctx;for(const l in e){if(po(l))continue;const r=e[l];if(fe(r))t[l]=Ei(l,r,o);else if(r!=null){const a=_o(r);t[l]=()=>a}}},gr=(e,t)=>{const n=_o(t);e.slots.default=()=>n},vr=(e,t,n)=>{for(const o in t)(n||!po(o))&&(e[o]=t[o])},Ci=(e,t,n)=>{const o=e.slots=pr();if(e.vnode.shapeFlag&32){const l=t._;l?(vr(o,t,n),n&&kl(o,"_",l,!0)):mr(t,o)}else t&&gr(e,t)},Si=(e,t,n)=>{const{vnode:o,slots:l}=e;let r=!0,a=ke;if(o.shapeFlag&32){const i=t._;i?n&&i===1?r=!1:vr(l,t,n):(r=!t.$stable,mr(t,l)),a=t}else t&&(gr(e,t),a={default:1});if(r)for(const i in l)!po(i)&&a[i]==null&&delete l[i]},Qe=Li;function ki(e){return Ri(e)}function Ri(e,t){const n=an();n.__VUE__=!0;const{insert:o,remove:l,patchProp:r,createElement:a,createText:i,createComment:d,setText:_,setElementText:f,parentNode:u,nextSibling:c,setScopeId:b=ft,insertStaticContent:A}=e,v=(m,g,C,I=null,P=null,O=null,J=void 0,W=null,H=!!g.dynamicChildren)=>{if(m===g)return;m&&!ps(m,g)&&(I=R(m),je(m,P,O,!0),m=null),g.patchFlag===-2&&(H=!1,g.dynamicChildren=null);const{type:M,ref:ce,shapeFlag:X}=g;switch(M){case _n:x(m,g,C,I);break;case Rt:U(m,g,C,I);break;case Gs:m==null&&B(g,C,I,J);break;case de:E(m,g,C,I,P,O,J,W,H);break;default:X&1?Y(m,g,C,I,P,O,J,W,H):X&6?N(m,g,C,I,P,O,J,W,H):(X&64||X&128)&&M.process(m,g,C,I,P,O,J,W,H,oe)}ce!=null&&P?vs(ce,m&&m.ref,O,g||m,!g):ce==null&&m&&m.ref!=null&&vs(m.ref,null,O,m,!0)},x=(m,g,C,I)=>{if(m==null)o(g.el=i(g.children),C,I);else{const P=g.el=m.el;g.children!==m.children&&_(P,g.children)}},U=(m,g,C,I)=>{m==null?o(g.el=d(g.children||""),C,I):g.el=m.el},B=(m,g,C,I)=>{[m.el,m.anchor]=A(m.children,g,C,I,m.el,m.anchor)},K=({el:m,anchor:g},C,I)=>{let P;for(;m&&m!==g;)P=c(m),o(m,C,I),m=P;o(g,C,I)},G=({el:m,anchor:g})=>{let C;for(;m&&m!==g;)C=c(m),l(m),m=C;l(g)},Y=(m,g,C,I,P,O,J,W,H)=>{if(g.type==="svg"?J="svg":g.type==="math"&&(J="mathml"),m==null)y(g,C,I,P,O,J,W,H);else{const M=m.el&&m.el._isVueCE?m.el:null;try{M&&M._beginPatch(),ee(m,g,P,O,J,W,H)}finally{M&&M._endPatch()}}},y=(m,g,C,I,P,O,J,W)=>{let H,M;const{props:ce,shapeFlag:X,transition:re,dirs:ue}=m;if(H=m.el=a(m.type,O,ce&&ce.is,ce),X&8?f(H,m.children):X&16&&D(m.children,H,null,I,P,Sn(m,O),J,W),ue&&Lt(m,null,I,"created"),k(H,m,m.scopeId,J,I),ce){for(const Re in ce)Re!=="value"&&!bs(Re)&&r(H,Re,null,ce[Re],O,I);"value"in ce&&r(H,"value",null,ce.value,O),(M=ce.onVnodeBeforeMount)&&ct(M,I,m)}ue&&Lt(m,null,I,"beforeMount");const ve=Ai(P,re);ve&&re.beforeEnter(H),o(H,g,C),((M=ce&&ce.onVnodeMounted)||ve||ue)&&Qe(()=>{M&&ct(M,I,m),ve&&re.enter(H),ue&&Lt(m,null,I,"mounted")},P)},k=(m,g,C,I,P)=>{if(C&&b(m,C),I)for(let O=0;O<I.length;O++)b(m,I[O]);if(P){let O=P.subTree;if(g===O||Cr(O.type)&&(O.ssContent===g||O.ssFallback===g)){const J=P.vnode;k(m,J,J.scopeId,J.slotScopeIds,P.parent)}}},D=(m,g,C,I,P,O,J,W,H=0)=>{for(let M=H;M<m.length;M++){const ce=m[M]=W?Tt(m[M]):ut(m[M]);v(null,ce,g,C,I,P,O,J,W)}},ee=(m,g,C,I,P,O,J)=>{const W=g.el=m.el;let{patchFlag:H,dynamicChildren:M,dirs:ce}=g;H|=m.patchFlag&16;const X=m.props||ke,re=g.props||ke;let ue;if(C&&qt(C,!1),(ue=re.onVnodeBeforeUpdate)&&ct(ue,C,g,m),ce&&Lt(g,m,C,"beforeUpdate"),C&&qt(C,!0),(X.innerHTML&&re.innerHTML==null||X.textContent&&re.textContent==null)&&f(W,""),M?T(m.dynamicChildren,M,W,C,I,Sn(g,P),O):J||_e(m,g,W,null,C,I,Sn(g,P),O,!1),H>0){if(H&16)q(W,X,re,C,P);else if(H&2&&X.class!==re.class&&r(W,"class",null,re.class,P),H&4&&r(W,"style",X.style,re.style,P),H&8){const ve=g.dynamicProps;for(let Re=0;Re<ve.length;Re++){const Ee=ve[Re],Ke=X[Ee],Ye=re[Ee];(Ye!==Ke||Ee==="value")&&r(W,Ee,Ke,Ye,P,C)}}H&1&&m.children!==g.children&&f(W,g.children)}else!J&&M==null&&q(W,X,re,C,P);((ue=re.onVnodeUpdated)||ce)&&Qe(()=>{ue&&ct(ue,C,g,m),ce&&Lt(g,m,C,"updated")},I)},T=(m,g,C,I,P,O,J)=>{for(let W=0;W<g.length;W++){const H=m[W],M=g[W],ce=H.el&&(H.type===de||!ps(H,M)||H.shapeFlag&198)?u(H.el):C;v(H,M,ce,null,I,P,O,J,!0)}},q=(m,g,C,I,P)=>{if(g!==C){if(g!==ke)for(const O in g)!bs(O)&&!(O in C)&&r(m,O,g[O],null,P,I);for(const O in C){if(bs(O))continue;const J=C[O],W=g[O];J!==W&&O!=="value"&&r(m,O,W,J,P,I)}"value"in C&&r(m,"value",g.value,C.value,P)}},E=(m,g,C,I,P,O,J,W,H)=>{const M=g.el=m?m.el:i(""),ce=g.anchor=m?m.anchor:i("");let{patchFlag:X,dynamicChildren:re,slotScopeIds:ue}=g;ue&&(W=W?W.concat(ue):ue),m==null?(o(M,C,I),o(ce,C,I),D(g.children||[],C,ce,P,O,J,W,H)):X>0&&X&64&&re&&m.dynamicChildren?(T(m.dynamicChildren,re,C,P,O,J,W),(g.key!=null||P&&g===P.subTree)&&yr(m,g,!0)):_e(m,g,C,ce,P,O,J,W,H)},N=(m,g,C,I,P,O,J,W,H)=>{g.slotScopeIds=W,m==null?g.shapeFlag&512?P.ctx.activate(g,C,I,J,H):j(g,C,I,P,O,J,H):F(m,g,H)},j=(m,g,C,I,P,O,J)=>{const W=m.component=zi(m,I,P);if(lr(m)&&(W.ctx.renderer=oe),Qi(W,!1,J),W.asyncDep){if(P&&P.registerDep(W,se,J),!m.el){const H=W.subTree=Ce(Rt);U(null,H,g,C),m.placeholder=H.el}}else se(W,m,g,C,P,O,J)},F=(m,g,C)=>{const I=g.component=m.component;if(Vi(m,g,C))if(I.asyncDep&&!I.asyncResolved){ie(I,g,C);return}else I.next=g,I.update();else g.el=m.el,I.vnode=g},se=(m,g,C,I,P,O,J)=>{const W=()=>{if(m.isMounted){let{next:X,bu:re,u:ue,parent:ve,vnode:Re}=m;{const at=xr(m);if(at){X&&(X.el=Re.el,ie(m,X,J)),at.asyncDep.then(()=>{m.isUnmounted||W()});return}}let Ee=X,Ke;qt(m,!1),X?(X.el=Re.el,ie(m,X,J)):X=Re,re&&Hs(re),(Ke=X.props&&X.props.onVnodeBeforeUpdate)&&ct(Ke,ve,X,Re),qt(m,!0);const Ye=Fo(m),rt=m.subTree;m.subTree=Ye,v(rt,Ye,u(rt.el),R(rt),m,P,O),X.el=Ye.el,Ee===null&&Ui(m,Ye.el),ue&&Qe(ue,P),(Ke=X.props&&X.props.onVnodeUpdated)&&Qe(()=>ct(Ke,ve,X,Re),P)}else{let X;const{el:re,props:ue}=g,{bm:ve,m:Re,parent:Ee,root:Ke,type:Ye}=m,rt=ns(g);qt(m,!1),ve&&Hs(ve),!rt&&(X=ue&&ue.onVnodeBeforeMount)&&ct(X,Ee,g),qt(m,!0);{Ke.ce&&Ke.ce._def.shadowRoot!==!1&&Ke.ce._injectChildStyle(Ye);const at=m.subTree=Fo(m);v(null,at,C,I,m,P,O),g.el=at.el}if(Re&&Qe(Re,P),!rt&&(X=ue&&ue.onVnodeMounted)){const at=g;Qe(()=>ct(X,Ee,at),P)}(g.shapeFlag&256||Ee&&ns(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&m.a&&Qe(m.a,P),m.isMounted=!0,g=C=I=null}};m.scope.on();const H=m.effect=new Tl(W);m.scope.off();const M=m.update=H.run.bind(H),ce=m.job=H.runIfDirty.bind(H);ce.i=m,ce.id=m.uid,H.scheduler=()=>uo(ce),qt(m,!0),M()},ie=(m,g,C)=>{g.component=m;const I=m.vnode.props;m.vnode=g,m.next=null,wi(m,g.props,I,C),Si(m,g.children,C),Ct(),Ao(m),St()},_e=(m,g,C,I,P,O,J,W,H=!1)=>{const M=m&&m.children,ce=m?m.shapeFlag:0,X=g.children,{patchFlag:re,shapeFlag:ue}=g;if(re>0){if(re&128){lt(M,X,C,I,P,O,J,W,H);return}else if(re&256){tt(M,X,C,I,P,O,J,W,H);return}}ue&8?(ce&16&&S(M,P,O),X!==M&&f(C,X)):ce&16?ue&16?lt(M,X,C,I,P,O,J,W,H):S(M,P,O,!0):(ce&8&&f(C,""),ue&16&&D(X,C,I,P,O,J,W,H))},tt=(m,g,C,I,P,O,J,W,H)=>{m=m||es,g=g||es;const M=m.length,ce=g.length,X=Math.min(M,ce);let re;for(re=0;re<X;re++){const ue=g[re]=H?Tt(g[re]):ut(g[re]);v(m[re],ue,C,null,P,O,J,W,H)}M>ce?S(m,P,O,!0,!1,X):D(g,C,I,P,O,J,W,H,X)},lt=(m,g,C,I,P,O,J,W,H)=>{let M=0;const ce=g.length;let X=m.length-1,re=ce-1;for(;M<=X&&M<=re;){const ue=m[M],ve=g[M]=H?Tt(g[M]):ut(g[M]);if(ps(ue,ve))v(ue,ve,C,null,P,O,J,W,H);else break;M++}for(;M<=X&&M<=re;){const ue=m[X],ve=g[re]=H?Tt(g[re]):ut(g[re]);if(ps(ue,ve))v(ue,ve,C,null,P,O,J,W,H);else break;X--,re--}if(M>X){if(M<=re){const ue=re+1,ve=ue<ce?g[ue].el:I;for(;M<=re;)v(null,g[M]=H?Tt(g[M]):ut(g[M]),C,ve,P,O,J,W,H),M++}}else if(M>re)for(;M<=X;)je(m[M],P,O,!0),M++;else{const ue=M,ve=M,Re=new Map;for(M=ve;M<=re;M++){const ze=g[M]=H?Tt(g[M]):ut(g[M]);ze.key!=null&&Re.set(ze.key,M)}let Ee,Ke=0;const Ye=re-ve+1;let rt=!1,at=0;const us=new Array(Ye);for(M=0;M<Ye;M++)us[M]=0;for(M=ue;M<=X;M++){const ze=m[M];if(Ke>=Ye){je(ze,P,O,!0);continue}let it;if(ze.key!=null)it=Re.get(ze.key);else for(Ee=ve;Ee<=re;Ee++)if(us[Ee-ve]===0&&ps(ze,g[Ee])){it=Ee;break}it===void 0?je(ze,P,O,!0):(us[it-ve]=M+1,it>=at?at=it:rt=!0,v(ze,g[it],C,null,P,O,J,W,H),Ke++)}const wo=rt?Di(us):es;for(Ee=wo.length-1,M=Ye-1;M>=0;M--){const ze=ve+M,it=g[ze],$o=g[ze+1],Eo=ze+1<ce?$o.el||$o.placeholder:I;us[M]===0?v(null,it,C,Eo,P,O,J,W,H):rt&&(Ee<0||M!==wo[Ee]?Xe(it,C,Eo,2):Ee--)}}},Xe=(m,g,C,I,P=null)=>{const{el:O,type:J,transition:W,children:H,shapeFlag:M}=m;if(M&6){Xe(m.component.subTree,g,C,I);return}if(M&128){m.suspense.move(g,C,I);return}if(M&64){J.move(m,g,C,oe);return}if(J===de){o(O,g,C);for(let X=0;X<H.length;X++)Xe(H[X],g,C,I);o(m.anchor,g,C);return}if(J===Gs){K(m,g,C);return}if(I!==2&&M&1&&W)if(I===0)W.beforeEnter(O),o(O,g,C),Qe(()=>W.enter(O),P);else{const{leave:X,delayLeave:re,afterLeave:ue}=W,ve=()=>{m.ctx.isUnmounted?l(O):o(O,g,C)},Re=()=>{O._isLeaving&&O[Xa](!0),X(O,()=>{ve(),ue&&ue()})};re?re(O,ve,Re):Re()}else o(O,g,C)},je=(m,g,C,I=!1,P=!1)=>{const{type:O,props:J,ref:W,children:H,dynamicChildren:M,shapeFlag:ce,patchFlag:X,dirs:re,cacheIndex:ue}=m;if(X===-2&&(P=!1),W!=null&&(Ct(),vs(W,null,C,m,!0),St()),ue!=null&&(g.renderCache[ue]=void 0),ce&256){g.ctx.deactivate(m);return}const ve=ce&1&&re,Re=!ns(m);let Ee;if(Re&&(Ee=J&&J.onVnodeBeforeUnmount)&&ct(Ee,g,m),ce&6)p(m.component,C,I);else{if(ce&128){m.suspense.unmount(C,I);return}ve&&Lt(m,null,g,"beforeUnmount"),ce&64?m.type.remove(m,g,C,oe,I):M&&!M.hasOnce&&(O!==de||X>0&&X&64)?S(M,g,C,!1,!0):(O===de&&X&384||!P&&ce&16)&&S(H,g,C),I&&ht(m)}(Re&&(Ee=J&&J.onVnodeUnmounted)||ve)&&Qe(()=>{Ee&&ct(Ee,g,m),ve&&Lt(m,null,g,"unmounted")},C)},ht=m=>{const{type:g,el:C,anchor:I,transition:P}=m;if(g===de){V(C,I);return}if(g===Gs){G(m);return}const O=()=>{l(C),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(m.shapeFlag&1&&P&&!P.persisted){const{leave:J,delayLeave:W}=P,H=()=>J(C,O);W?W(m.el,O,H):H()}else O()},V=(m,g)=>{let C;for(;m!==g;)C=c(m),l(m),m=C;l(g)},p=(m,g,C)=>{const{bum:I,scope:P,job:O,subTree:J,um:W,m:H,a:M}=m;jo(H),jo(M),I&&Hs(I),P.stop(),O&&(O.flags|=8,je(J,m,g,C)),W&&Qe(W,g),Qe(()=>{m.isUnmounted=!0},g)},S=(m,g,C,I=!1,P=!1,O=0)=>{for(let J=O;J<m.length;J++)je(m[J],g,C,I,P)},R=m=>{if(m.shapeFlag&6)return R(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const g=c(m.anchor||m.el),C=g&&g[Qa];return C?c(C):g};let z=!1;const Q=(m,g,C)=>{m==null?g._vnode&&je(g._vnode,null,null,!0):v(g._vnode||null,m,g,null,null,null,C),g._vnode=m,z||(z=!0,Ao(),er(),z=!1)},oe={p:v,um:je,m:Xe,r:ht,mt:j,mc:D,pc:_e,pbc:T,n:R,o:e};return{render:Q,hydrate:void 0,createApp:vi(Q)}}function Sn({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function qt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ai(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function yr(e,t,n=!1){const o=e.children,l=t.children;if(ae(o)&&ae(l))for(let r=0;r<o.length;r++){const a=o[r];let i=l[r];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=l[r]=Tt(l[r]),i.el=a.el),!n&&i.patchFlag!==-2&&yr(a,i)),i.type===_n&&i.patchFlag!==-1&&(i.el=a.el),i.type===Rt&&!i.el&&(i.el=a.el)}}function Di(e){const t=e.slice(),n=[0];let o,l,r,a,i;const d=e.length;for(o=0;o<d;o++){const _=e[o];if(_!==0){if(l=n[n.length-1],e[l]<_){t[o]=l,n.push(o);continue}for(r=0,a=n.length-1;r<a;)i=r+a>>1,e[n[i]]<_?r=i+1:a=i;_<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}function xr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:xr(t)}function jo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Oi=Symbol.for("v-scx"),Ii=()=>et(Oi);function Pe(e,t,n){return wr(e,t,n)}function wr(e,t,n=ke){const{immediate:o,deep:l,flush:r,once:a}=n,i=qe({},n),d=t&&o||!t&&r!=="post";let _;if(As){if(r==="sync"){const b=Ii();_=b.__watcherHandles||(b.__watcherHandles=[])}else if(!d){const b=()=>{};return b.stop=ft,b.resume=ft,b.pause=ft,b}}const f=We;i.call=(b,A,v)=>pt(b,f,A,v);let u=!1;r==="post"?i.scheduler=b=>{Qe(b,f&&f.suspense)}:r!=="sync"&&(u=!0,i.scheduler=(b,A)=>{A?b():uo(b)}),i.augmentJob=b=>{t&&(b.flags|=4),u&&(b.flags|=2,f&&(b.id=f.uid,b.i=f))};const c=Wa(e,t,i);return As&&(_?_.push(c):d&&c()),c}function Pi(e,t,n){const o=this.proxy,l=Te(e)?e.includes(".")?$r(o,e):()=>o[e]:e.bind(o,o);let r;fe(t)?r=t:(r=t.handler,n=t);const a=Ms(this),i=wr(l,r.bind(o),n);return a(),i}function $r(e,t){const n=t.split(".");return()=>{let o=e;for(let l=0;l<n.length&&o;l++)o=o[n[l]];return o}}const Ti=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Vt(t)}Modifiers`]||e[`${Yt(t)}Modifiers`];function Ni(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||ke;let l=n;const r=t.startsWith("update:"),a=r&&Ti(o,t.slice(7));a&&(a.trim&&(l=n.map(f=>Te(f)?f.trim():f)),a.number&&(l=n.map(rn)));let i,d=o[i=yn(t)]||o[i=yn(Vt(t))];!d&&r&&(d=o[i=yn(Yt(t))]),d&&pt(d,e,6,l);const _=o[i+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,pt(_,e,6,l)}}const ji=new WeakMap;function Er(e,t,n=!1){const o=n?ji:t.emitsCache,l=o.get(e);if(l!==void 0)return l;const r=e.emits;let a={},i=!1;if(!fe(e)){const d=_=>{const f=Er(_,t,!0);f&&(i=!0,qe(a,f))};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!r&&!i?(Se(e)&&o.set(e,null),null):(ae(r)?r.forEach(d=>a[d]=null):qe(a,r),Se(e)&&o.set(e,a),a)}function pn(e,t){return!e||!on(t)?!1:(t=t.slice(2).replace(/Once$/,""),$e(e,t[0].toLowerCase()+t.slice(1))||$e(e,Yt(t))||$e(e,t))}function Fo(e){const{type:t,vnode:n,proxy:o,withProxy:l,propsOptions:[r],slots:a,attrs:i,emit:d,render:_,renderCache:f,props:u,data:c,setupState:b,ctx:A,inheritAttrs:v}=e,x=Xs(e);let U,B;try{if(n.shapeFlag&4){const G=l||o,Y=G;U=ut(_.call(Y,G,f,u,b,c,A)),B=i}else{const G=t;U=ut(G.length>1?G(u,{attrs:i,slots:a,emit:d}):G(u,null)),B=t.props?i:Fi(i)}}catch(G){xs.length=0,dn(G,e,1),U=Ce(Rt)}let K=U;if(B&&v!==!1){const G=Object.keys(B),{shapeFlag:Y}=K;G.length&&Y&7&&(r&&G.some(Jn)&&(B=Mi(B,r)),K=os(K,B,!1,!0))}return n.dirs&&(K=os(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(n.dirs):n.dirs),n.transition&&fo(K,n.transition),U=K,Xs(x),U}const Fi=e=>{let t;for(const n in e)(n==="class"||n==="style"||on(n))&&((t||(t={}))[n]=e[n]);return t},Mi=(e,t)=>{const n={};for(const o in e)(!Jn(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Vi(e,t,n){const{props:o,children:l,component:r}=e,{props:a,children:i,patchFlag:d}=t,_=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return o?Mo(o,a,_):!!a;if(d&8){const f=t.dynamicProps;for(let u=0;u<f.length;u++){const c=f[u];if(a[c]!==o[c]&&!pn(_,c))return!0}}}else return(l||i)&&(!i||!i.$stable)?!0:o===a?!1:o?a?Mo(o,a,_):!0:!!a;return!1}function Mo(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let l=0;l<o.length;l++){const r=o[l];if(t[r]!==e[r]&&!pn(n,r))return!0}return!1}function Ui({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Cr=e=>e.__isSuspense;function Li(e,t){t&&t.pendingBranch?ae(e)?t.effects.push(...e):t.effects.push(e):za(e)}const de=Symbol.for("v-fgt"),_n=Symbol.for("v-txt"),Rt=Symbol.for("v-cmt"),Gs=Symbol.for("v-stc"),xs=[];let Je=null;function w(e=!1){xs.push(Je=e?null:[])}function qi(){xs.pop(),Je=xs[xs.length-1]||null}let ks=1;function tn(e,t=!1){ks+=e,e<0&&Je&&t&&(Je.hasOnce=!0)}function Sr(e){return e.dynamicChildren=ks>0?Je||es:null,qi(),ks>0&&Je&&Je.push(e),e}function $(e,t,n,o,l,r){return Sr(s(e,t,n,o,l,r,!0))}function At(e,t,n,o,l){return Sr(Ce(e,t,n,o,l,!0))}function Rs(e){return e?e.__v_isVNode===!0:!1}function ps(e,t){return e.type===t.type&&e.key===t.key}const kr=({key:e})=>e??null,Ws=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Te(e)||De(e)||fe(e)?{i:Le,r:e,k:t,f:!!n}:e:null);function s(e,t=null,n=null,o=0,l=null,r=e===de?0:1,a=!1,i=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&kr(t),ref:t&&Ws(t),scopeId:sr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:Le};return i?(ho(d,n),r&128&&e.normalize(d)):n&&(d.shapeFlag|=Te(n)?8:16),ks>0&&!a&&Je&&(d.patchFlag>0||r&6)&&d.patchFlag!==32&&Je.push(d),d}const Ce=Hi;function Hi(e,t=null,n=null,o=0,l=null,r=!1){if((!e||e===di)&&(e=Rt),Rs(e)){const i=os(e,t,!0);return n&&ho(i,n),ks>0&&!r&&Je&&(i.shapeFlag&6?Je[Je.indexOf(e)]=i:Je.push(i)),i.patchFlag=-2,i}if(ec(e)&&(e=e.__vccOpts),t){t=Bi(t);let{class:i,style:d}=t;i&&!Te(i)&&(t.class=le(i)),Se(d)&&(io(d)&&!ae(d)&&(d=qe({},d)),t.style=eo(d))}const a=Te(e)?1:Cr(e)?128:Ja(e)?64:Se(e)?4:fe(e)?2:0;return s(e,t,n,o,l,a,r,!0)}function Bi(e){return e?io(e)||_r(e)?qe({},e):e:null}function os(e,t,n=!1,o=!1){const{props:l,ref:r,patchFlag:a,children:i,transition:d}=e,_=t?Wi(l||{},t):l,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&kr(_),ref:t&&t.ref?n&&r?ae(r)?r.concat(Ws(t)):[r,Ws(t)]:Ws(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==de?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&os(e.ssContent),ssFallback:e.ssFallback&&os(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&o&&fo(f,d.clone(f)),f}function L(e=" ",t=0){return Ce(_n,null,e,t)}function Gi(e,t){const n=Ce(Gs,null,e);return n.staticCount=t,n}function te(e="",t=!1){return t?(w(),At(Rt,null,e)):Ce(Rt,null,e)}function ut(e){return e==null||typeof e=="boolean"?Ce(Rt):ae(e)?Ce(de,null,e.slice()):Rs(e)?Tt(e):Ce(_n,null,String(e))}function Tt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:os(e)}function ho(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ae(t))n=16;else if(typeof t=="object")if(o&65){const l=t.default;l&&(l._c&&(l._d=!1),ho(e,l()),l._c&&(l._d=!0));return}else{n=32;const l=t._;!l&&!_r(t)?t._ctx=Le:l===3&&Le&&(Le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else fe(t)?(t={default:t,_ctx:Le},n=32):(t=String(t),o&64?(n=16,t=[L(t)]):n=8);e.children=t,e.shapeFlag|=n}function Wi(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const l in o)if(l==="class")t.class!==o.class&&(t.class=le([t.class,o.class]));else if(l==="style")t.style=eo([t.style,o.style]);else if(on(l)){const r=t[l],a=o[l];a&&r!==a&&!(ae(r)&&r.includes(a))&&(t[l]=r?[].concat(r,a):a)}else l!==""&&(t[l]=o[l])}return t}function ct(e,t,n,o=null){pt(e,t,7,[n,o])}const Ki=ur();let Yi=0;function zi(e,t,n){const o=e.type,l=(t?t.appContext:e.appContext)||Ki,r={uid:Yi++,vnode:e,type:o,parent:t,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ol(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(l.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:br(o,l),emitsOptions:Er(o,l),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:o.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Ni.bind(null,r),e.ce&&e.ce(r),r}let We=null;const Rr=()=>We||Le;let sn,qn;{const e=an(),t=(n,o)=>{let l;return(l=e[n])||(l=e[n]=[]),l.push(o),r=>{l.length>1?l.forEach(a=>a(r)):l[0](r)}};sn=t("__VUE_INSTANCE_SETTERS__",n=>We=n),qn=t("__VUE_SSR_SETTERS__",n=>As=n)}const Ms=e=>{const t=We;return sn(e),e.scope.on(),()=>{e.scope.off(),sn(t)}},Vo=()=>{We&&We.scope.off(),sn(null)};function Ar(e){return e.vnode.shapeFlag&4}let As=!1;function Qi(e,t=!1,n=!1){t&&qn(t);const{props:o,children:l}=e.vnode,r=Ar(e);xi(e,o,r,t),Ci(e,l,n||t);const a=r?Ji(e,t):void 0;return t&&qn(!1),a}function Ji(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,fi);const{setup:o}=n;if(o){Ct();const l=e.setupContext=o.length>1?Zi(e):null,r=Ms(e),a=Fs(o,e,0,[e.props,l]),i=$l(a);if(St(),r(),(i||e.sp)&&!ns(e)&&or(e),i){if(a.then(Vo,Vo),t)return a.then(d=>{Uo(e,d)}).catch(d=>{dn(d,e,0)});e.asyncDep=a}else Uo(e,a)}else Dr(e)}function Uo(e,t,n){fe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Se(t)&&(e.setupState=Ql(t)),Dr(e)}function Dr(e,t,n){const o=e.type;e.render||(e.render=o.render||ft);{const l=Ms(e);Ct();try{pi(e)}finally{St(),l()}}}const Xi={get(e,t){return Ue(e,"get",""),e[t]}};function Zi(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Xi),slots:e.slots,emit:e.emit,expose:t}}function hn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ql(co(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ys)return ys[n](e)},has(t,n){return n in t||n in ys}})):e.proxy}function ec(e){return fe(e)&&"__vccOpts"in e}const Z=(e,t)=>Ba(e,t,As);function Or(e,t,n){try{tn(-1);const o=arguments.length;return o===2?Se(t)&&!ae(t)?Rs(t)?Ce(e,null,[t]):Ce(e,t):Ce(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&Rs(n)&&(n=[n]),Ce(e,t,n))}finally{tn(1)}}const tc="3.5.24";let Hn;const Lo=typeof window<"u"&&window.trustedTypes;if(Lo)try{Hn=Lo.createPolicy("vue",{createHTML:e=>e})}catch{}const Ir=Hn?e=>Hn.createHTML(e):e=>e,sc="http://www.w3.org/2000/svg",nc="http://www.w3.org/1998/Math/MathML",gt=typeof document<"u"?document:null,qo=gt&&gt.createElement("template"),oc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const l=t==="svg"?gt.createElementNS(sc,e):t==="mathml"?gt.createElementNS(nc,e):n?gt.createElement(e,{is:n}):gt.createElement(e);return e==="select"&&o&&o.multiple!=null&&l.setAttribute("multiple",o.multiple),l},createText:e=>gt.createTextNode(e),createComment:e=>gt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>gt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,l,r){const a=n?n.previousSibling:t.lastChild;if(l&&(l===r||l.nextSibling))for(;t.insertBefore(l.cloneNode(!0),n),!(l===r||!(l=l.nextSibling)););else{qo.innerHTML=Ir(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const i=qo.content;if(o==="svg"||o==="mathml"){const d=i.firstChild;for(;d.firstChild;)i.appendChild(d.firstChild);i.removeChild(d)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},lc=Symbol("_vtc");function rc(e,t,n){const o=e[lc];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ho=Symbol("_vod"),ac=Symbol("_vsh"),ic=Symbol(""),cc=/(?:^|;)\s*display\s*:/;function dc(e,t,n){const o=e.style,l=Te(n);let r=!1;if(n&&!l){if(t)if(Te(t))for(const a of t.split(";")){const i=a.slice(0,a.indexOf(":")).trim();n[i]==null&&Ks(o,i,"")}else for(const a in t)n[a]==null&&Ks(o,a,"");for(const a in n)a==="display"&&(r=!0),Ks(o,a,n[a])}else if(l){if(t!==n){const a=o[ic];a&&(n+=";"+a),o.cssText=n,r=cc.test(n)}}else t&&e.removeAttribute("style");Ho in e&&(e[Ho]=r?o.display:"",e[ac]&&(o.display="none"))}const Bo=/\s*!important$/;function Ks(e,t,n){if(ae(n))n.forEach(o=>Ks(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=uc(e,t);Bo.test(n)?e.setProperty(Yt(o),n.replace(Bo,""),"important"):e[o]=n}}const Go=["Webkit","Moz","ms"],kn={};function uc(e,t){const n=kn[t];if(n)return n;let o=Vt(t);if(o!=="filter"&&o in e)return kn[t]=o;o=Sl(o);for(let l=0;l<Go.length;l++){const r=Go[l]+o;if(r in e)return kn[t]=r}return t}const Wo="http://www.w3.org/1999/xlink";function Ko(e,t,n,o,l,r=_a(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Wo,t.slice(6,t.length)):e.setAttributeNS(Wo,t,n):n==null||r&&!Rl(n)?e.removeAttribute(t):e.setAttribute(t,r?"":nt(n)?String(n):n)}function Yo(e,t,n,o,l){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ir(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const i=r==="OPTION"?e.getAttribute("value")||"":e.value,d=n==null?e.type==="checkbox"?"on":"":String(n);(i!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=Rl(n):n==null&&i==="string"?(n="",a=!0):i==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(l||t)}function jt(e,t,n,o){e.addEventListener(t,n,o)}function fc(e,t,n,o){e.removeEventListener(t,n,o)}const zo=Symbol("_vei");function pc(e,t,n,o,l=null){const r=e[zo]||(e[zo]={}),a=r[t];if(o&&a)a.value=o;else{const[i,d]=_c(t);if(o){const _=r[t]=mc(o,l);jt(e,i,_,d)}else a&&(fc(e,i,a,d),r[t]=void 0)}}const Qo=/(?:Once|Passive|Capture)$/;function _c(e){let t;if(Qo.test(e)){t={};let o;for(;o=e.match(Qo);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yt(e.slice(2)),t]}let Rn=0;const hc=Promise.resolve(),bc=()=>Rn||(hc.then(()=>Rn=0),Rn=Date.now());function mc(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;pt(gc(o,n.value),t,5,[o])};return n.value=e,n.attached=bc(),n}function gc(e,t){if(ae(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>l=>!l._stopped&&o&&o(l))}else return t}const Jo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,vc=(e,t,n,o,l,r)=>{const a=l==="svg";t==="class"?rc(e,o,a):t==="style"?dc(e,n,o):on(t)?Jn(t)||pc(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):yc(e,t,o,a))?(Yo(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ko(e,t,o,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Te(o))?Yo(e,Vt(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Ko(e,t,o,a))};function yc(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Jo(t)&&fe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const l=e.tagName;if(l==="IMG"||l==="VIDEO"||l==="CANVAS"||l==="SOURCE")return!1}return Jo(t)&&Te(n)?!1:t in e}const ls=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ae(t)?n=>Hs(t,n):t};function xc(e){e.target.composing=!0}function Xo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Et=Symbol("_assign");function Zo(e,t,n){return t&&(e=e.trim()),n&&(e=rn(e)),e}const he={created(e,{modifiers:{lazy:t,trim:n,number:o}},l){e[Et]=ls(l);const r=o||l.props&&l.props.type==="number";jt(e,t?"change":"input",a=>{a.target.composing||e[Et](Zo(e.value,n,r))}),(n||r)&&jt(e,"change",()=>{e.value=Zo(e.value,n,r)}),t||(jt(e,"compositionstart",xc),jt(e,"compositionend",Xo),jt(e,"change",Xo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:l,number:r}},a){if(e[Et]=ls(a),e.composing)return;const i=(r||e.type==="number")&&!/^0\d/.test(e.value)?rn(e.value):e.value,d=t??"";i!==d&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||l&&e.value.trim()===d)||(e.value=d))}},Bt={deep:!0,created(e,t,n){e[Et]=ls(n),jt(e,"change",()=>{const o=e._modelValue,l=Ds(e),r=e.checked,a=e[Et];if(ae(o)){const i=to(o,l),d=i!==-1;if(r&&!d)a(o.concat(l));else if(!r&&d){const _=[...o];_.splice(i,1),a(_)}}else if(is(o)){const i=new Set(o);r?i.add(l):i.delete(l),a(i)}else a(Pr(e,r))})},mounted:el,beforeUpdate(e,t,n){e[Et]=ls(n),el(e,t,n)}};function el(e,{value:t,oldValue:n},o){e._modelValue=t;let l;if(ae(t))l=to(t,o.props.value)>-1;else if(is(t))l=t.has(o.props.value);else{if(t===n)return;l=Ns(t,Pr(e,!0))}e.checked!==l&&(e.checked=l)}const wt={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const l=is(t);jt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?rn(Ds(a)):Ds(a));e[Et](e.multiple?l?new Set(r):r:r[0]),e._assigning=!0,un(()=>{e._assigning=!1})}),e[Et]=ls(o)},mounted(e,{value:t}){tl(e,t)},beforeUpdate(e,t,n){e[Et]=ls(n)},updated(e,{value:t}){e._assigning||tl(e,t)}};function tl(e,t){const n=e.multiple,o=ae(t);if(!(n&&!o&&!is(t))){for(let l=0,r=e.options.length;l<r;l++){const a=e.options[l],i=Ds(a);if(n)if(o){const d=typeof i;d==="string"||d==="number"?a.selected=t.some(_=>String(_)===String(i)):a.selected=to(t,i)>-1}else a.selected=t.has(i);else if(Ns(Ds(a),t)){e.selectedIndex!==l&&(e.selectedIndex=l);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ds(e){return"_value"in e?e._value:e.value}function Pr(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const wc=["ctrl","shift","alt","meta"],$c={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>wc.some(n=>e[`${n}Key`]&&!t.includes(n))},Os=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((l,...r)=>{for(let a=0;a<t.length;a++){const i=$c[t[a]];if(i&&i(l,t))return}return e(l,...r)}))},Ec=qe({patchProp:vc},oc);let sl;function Cc(){return sl||(sl=ki(Ec))}const Sc=((...e)=>{const t=Cc().createApp(...e),{mount:n}=t;return t.mount=o=>{const l=Rc(o);if(!l)return;const r=t._component;!fe(r)&&!r.render&&!r.template&&(r.template=l.innerHTML),l.nodeType===1&&(l.textContent="");const a=n(l,!1,kc(l));return l instanceof Element&&(l.removeAttribute("v-cloak"),l.setAttribute("data-v-app","")),a},t});function kc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Rc(e){return Te(e)?document.querySelector(e):e}let Tr;const bn=e=>Tr=e,Nr=Symbol();function Bn(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ws;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ws||(ws={}));function Ac(){const e=Il(!0),t=e.run(()=>pe({}));let n=[],o=[];const l=co({install(r){bn(l),l._a=r,r.provide(Nr,l),r.config.globalProperties.$pinia=l,o.forEach(a=>n.push(a)),o=[]},use(r){return this._a?n.push(r):o.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return l}const jr=()=>{};function nl(e,t,n,o=jr){e.add(t);const l=()=>{e.delete(t)&&o()};return!n&&Pl()&&ba(l),l}function Jt(e,...t){e.forEach(n=>{n(...t)})}const Dc=e=>e(),ol=Symbol(),An=Symbol();function Gn(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],l=e[n];Bn(l)&&Bn(o)&&e.hasOwnProperty(n)&&!De(o)&&!$t(o)?e[n]=Gn(l,o):e[n]=o}return e}const Oc=Symbol();function Ic(e){return!Bn(e)||!Object.prototype.hasOwnProperty.call(e,Oc)}const{assign:It}=Object;function Pc(e){return!!(De(e)&&e.effect)}function Tc(e,t,n,o){const{state:l,actions:r,getters:a}=t,i=n.state.value[e];let d;function _(){i||(n.state.value[e]=l?l():{});const f=Va(n.state.value[e]);return It(f,r,Object.keys(a||{}).reduce((u,c)=>(u[c]=co(Z(()=>{bn(n);const b=n._s.get(e);return a[c].call(b,b)})),u),{}))}return d=Fr(e,_,t,n,o,!0),d}function Fr(e,t,n={},o,l,r){let a;const i=It({actions:{}},n),d={deep:!0};let _,f,u=new Set,c=new Set,b;const A=o.state.value[e];!r&&!A&&(o.state.value[e]={}),pe({});let v;function x(D){let ee;_=f=!1,typeof D=="function"?(D(o.state.value[e]),ee={type:ws.patchFunction,storeId:e,events:b}):(Gn(o.state.value[e],D),ee={type:ws.patchObject,payload:D,storeId:e,events:b});const T=v=Symbol();un().then(()=>{v===T&&(_=!0)}),f=!0,Jt(u,ee,o.state.value[e])}const U=r?function(){const{state:ee}=n,T=ee?ee():{};this.$patch(q=>{It(q,T)})}:jr;function B(){a.stop(),u.clear(),c.clear(),o._s.delete(e)}const K=(D,ee="")=>{if(ol in D)return D[An]=ee,D;const T=function(){bn(o);const q=Array.from(arguments),E=new Set,N=new Set;function j(ie){E.add(ie)}function F(ie){N.add(ie)}Jt(c,{args:q,name:T[An],store:Y,after:j,onError:F});let se;try{se=D.apply(this&&this.$id===e?this:Y,q)}catch(ie){throw Jt(N,ie),ie}return se instanceof Promise?se.then(ie=>(Jt(E,ie),ie)).catch(ie=>(Jt(N,ie),Promise.reject(ie))):(Jt(E,se),se)};return T[ol]=!0,T[An]=ee,T},G={_p:o,$id:e,$onAction:nl.bind(null,c),$patch:x,$reset:U,$subscribe(D,ee={}){const T=nl(u,D,ee.detached,()=>q()),q=a.run(()=>Pe(()=>o.state.value[e],E=>{(ee.flush==="sync"?f:_)&&D({storeId:e,type:ws.direct,events:b},E)},It({},d,ee)));return T},$dispose:B},Y=js(G);o._s.set(e,Y);const k=(o._a&&o._a.runWithContext||Dc)(()=>o._e.run(()=>(a=Il()).run(()=>t({action:K}))));for(const D in k){const ee=k[D];if(De(ee)&&!Pc(ee)||$t(ee))r||(A&&Ic(ee)&&(De(ee)?ee.value=A[D]:Gn(ee,A[D])),o.state.value[e][D]=ee);else if(typeof ee=="function"){const T=K(ee,D);k[D]=T,i.actions[D]=ee}}return It(Y,k),It(xe(Y),k),Object.defineProperty(Y,"$state",{get:()=>o.state.value[e],set:D=>{x(ee=>{It(ee,D)})}}),o._p.forEach(D=>{It(Y,a.run(()=>D({store:Y,app:o._a,pinia:o,options:i})))}),A&&r&&n.hydrate&&n.hydrate(Y.$state,A),_=!0,f=!0,Y}function zt(e,t,n){let o;const l=typeof t=="function";o=l?n:t;function r(a,i){const d=yi();return a=a||(d?et(Nr,null):null),a&&bn(a),a=Tr,a._s.has(e)||(l?Fr(e,t,o,a):Tc(e,o,a)),a._s.get(e)}return r.$id=e,r}function Nc(e){const t=xe(e),n={};for(const o in t){const l=t[o];l.effect?n[o]=Z({get:()=>e[o],set(r){e[o]=r}}):(De(l)||$t(l))&&(n[o]=qa(e,o))}return n}const Zt=typeof document<"u";function Mr(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function jc(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Mr(e.default)}const we=Object.assign;function Dn(e,t){const n={};for(const o in t){const l=t[o];n[o]=ot(l)?l.map(e):e(l)}return n}const $s=()=>{},ot=Array.isArray;function ll(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}const Vr=/#/g,Fc=/&/g,Mc=/\//g,Vc=/=/g,Uc=/\?/g,Ur=/\+/g,Lc=/%5B/g,qc=/%5D/g,Lr=/%5E/g,Hc=/%60/g,qr=/%7B/g,Bc=/%7C/g,Hr=/%7D/g,Gc=/%20/g;function bo(e){return e==null?"":encodeURI(""+e).replace(Bc,"|").replace(Lc,"[").replace(qc,"]")}function Wc(e){return bo(e).replace(qr,"{").replace(Hr,"}").replace(Lr,"^")}function Wn(e){return bo(e).replace(Ur,"%2B").replace(Gc,"+").replace(Vr,"%23").replace(Fc,"%26").replace(Hc,"`").replace(qr,"{").replace(Hr,"}").replace(Lr,"^")}function Kc(e){return Wn(e).replace(Vc,"%3D")}function Yc(e){return bo(e).replace(Vr,"%23").replace(Uc,"%3F")}function zc(e){return Yc(e).replace(Mc,"%2F")}function Is(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Qc=/\/$/,Jc=e=>e.replace(Qc,"");function On(e,t,n="/"){let o,l={},r="",a="";const i=t.indexOf("#");let d=t.indexOf("?");return d=i>=0&&d>i?-1:d,d>=0&&(o=t.slice(0,d),r=t.slice(d,i>0?i:t.length),l=e(r.slice(1))),i>=0&&(o=o||t.slice(0,i),a=t.slice(i,t.length)),o=td(o??t,n),{fullPath:o+r+a,path:o,query:l,hash:Is(a)}}function Xc(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function rl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Zc(e,t,n){const o=t.matched.length-1,l=n.matched.length-1;return o>-1&&o===l&&rs(t.matched[o],n.matched[l])&&Br(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function rs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Br(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ed(e[n],t[n]))return!1;return!0}function ed(e,t){return ot(e)?al(e,t):ot(t)?al(t,e):e===t}function al(e,t){return ot(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function td(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),l=o[o.length-1];(l===".."||l===".")&&o.push("");let r=n.length-1,a,i;for(a=0;a<o.length;a++)if(i=o[a],i!==".")if(i==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+o.slice(a).join("/")}const Ot={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Kn=(function(e){return e.pop="pop",e.push="push",e})({}),In=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function sd(e){if(!e)if(Zt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Jc(e)}const nd=/^[^#]+#/;function od(e,t){return e.replace(nd,"#")+t}function ld(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const mn=()=>({left:window.scrollX,top:window.scrollY});function rd(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),l=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!l)return;t=ld(l,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function il(e,t){return(history.state?history.state.position-t:-1)+e}const Yn=new Map;function ad(e,t){Yn.set(e,t)}function id(e){const t=Yn.get(e);return Yn.delete(e),t}function cd(e){return typeof e=="string"||e&&typeof e=="object"}function Gr(e){return typeof e=="string"||typeof e=="symbol"}let Oe=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Wr=Symbol("");Oe.MATCHER_NOT_FOUND+"",Oe.NAVIGATION_GUARD_REDIRECT+"",Oe.NAVIGATION_ABORTED+"",Oe.NAVIGATION_CANCELLED+"",Oe.NAVIGATION_DUPLICATED+"";function as(e,t){return we(new Error,{type:e,[Wr]:!0},t)}function mt(e,t){return e instanceof Error&&Wr in e&&(t==null||!!(e.type&t))}const dd=["params","query","hash"];function ud(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of dd)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function fd(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const l=n[o].replace(Ur," "),r=l.indexOf("="),a=Is(r<0?l:l.slice(0,r)),i=r<0?null:Is(l.slice(r+1));if(a in t){let d=t[a];ot(d)||(d=t[a]=[d]),d.push(i)}else t[a]=i}return t}function cl(e){let t="";for(let n in e){const o=e[n];if(n=Kc(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(ot(o)?o.map(l=>l&&Wn(l)):[o&&Wn(o)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+n,l!=null&&(t+="="+l))})}return t}function pd(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=ot(o)?o.map(l=>l==null?null:""+l):o==null?o:""+o)}return t}const _d=Symbol(""),dl=Symbol(""),gn=Symbol(""),mo=Symbol(""),zn=Symbol("");function _s(){let e=[];function t(o){return e.push(o),()=>{const l=e.indexOf(o);l>-1&&e.splice(l,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Nt(e,t,n,o,l,r=a=>a()){const a=o&&(o.enterCallbacks[l]=o.enterCallbacks[l]||[]);return()=>new Promise((i,d)=>{const _=c=>{c===!1?d(as(Oe.NAVIGATION_ABORTED,{from:n,to:t})):c instanceof Error?d(c):cd(c)?d(as(Oe.NAVIGATION_GUARD_REDIRECT,{from:t,to:c})):(a&&o.enterCallbacks[l]===a&&typeof c=="function"&&a.push(c),i())},f=r(()=>e.call(o&&o.instances[l],t,n,_));let u=Promise.resolve(f);e.length<3&&(u=u.then(_)),u.catch(c=>d(c))})}function Pn(e,t,n,o,l=r=>r()){const r=[];for(const a of e)for(const i in a.components){let d=a.components[i];if(!(t!=="beforeRouteEnter"&&!a.instances[i]))if(Mr(d)){const _=(d.__vccOpts||d)[t];_&&r.push(Nt(_,n,o,a,i,l))}else{let _=d();r.push(()=>_.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${a.path}"`);const u=jc(f)?f.default:f;a.mods[i]=f,a.components[i]=u;const c=(u.__vccOpts||u)[t];return c&&Nt(c,n,o,a,i,l)()}))}}return r}function hd(e,t){const n=[],o=[],l=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const i=t.matched[a];i&&(e.matched.find(_=>rs(_,i))?o.push(i):n.push(i));const d=e.matched[a];d&&(t.matched.find(_=>rs(_,d))||l.push(d))}return[n,o,l]}let bd=()=>location.protocol+"//"+location.host;function Kr(e,t){const{pathname:n,search:o,hash:l}=t,r=e.indexOf("#");if(r>-1){let a=l.includes(e.slice(r))?e.slice(r).length:1,i=l.slice(a);return i[0]!=="/"&&(i="/"+i),rl(i,"")}return rl(n,e)+o+l}function md(e,t,n,o){let l=[],r=[],a=null;const i=({state:c})=>{const b=Kr(e,location),A=n.value,v=t.value;let x=0;if(c){if(n.value=b,t.value=c,a&&a===A){a=null;return}x=v?c.position-v.position:0}else o(b);l.forEach(U=>{U(n.value,A,{delta:x,type:Kn.pop,direction:x?x>0?In.forward:In.back:In.unknown})})};function d(){a=n.value}function _(c){l.push(c);const b=()=>{const A=l.indexOf(c);A>-1&&l.splice(A,1)};return r.push(b),b}function f(){if(document.visibilityState==="hidden"){const{history:c}=window;if(!c.state)return;c.replaceState(we({},c.state,{scroll:mn()}),"")}}function u(){for(const c of r)c();r=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:d,listen:_,destroy:u}}function ul(e,t,n,o=!1,l=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:l?mn():null}}function gd(e){const{history:t,location:n}=window,o={value:Kr(e,n)},l={value:t.state};l.value||r(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(d,_,f){const u=e.indexOf("#"),c=u>-1?(n.host&&document.querySelector("base")?e:e.slice(u))+d:bd()+e+d;try{t[f?"replaceState":"pushState"](_,"",c),l.value=_}catch(b){console.error(b),n[f?"replace":"assign"](c)}}function a(d,_){r(d,we({},t.state,ul(l.value.back,d,l.value.forward,!0),_,{position:l.value.position}),!0),o.value=d}function i(d,_){const f=we({},l.value,t.state,{forward:d,scroll:mn()});r(f.current,f,!0),r(d,we({},ul(o.value,d,null),{position:f.position+1},_),!1),o.value=d}return{location:o,state:l,push:i,replace:a}}function vd(e){e=sd(e);const t=gd(e),n=md(e,t.state,t.location,t.replace);function o(r,a=!0){a||n.pauseListeners(),history.go(r)}const l=we({location:"",base:e,go:o,createHref:od.bind(null,e)},t,n);return Object.defineProperty(l,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(l,"state",{enumerable:!0,get:()=>t.state.value}),l}function yd(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),vd(e)}let Gt=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Ne=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Ne||{});const xd={type:Gt.Static,value:""},wd=/[a-zA-Z0-9_]/;function $d(e){if(!e)return[[]];if(e==="/")return[[xd]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(b){throw new Error(`ERR (${n})/"${_}": ${b}`)}let n=Ne.Static,o=n;const l=[];let r;function a(){r&&l.push(r),r=[]}let i=0,d,_="",f="";function u(){_&&(n===Ne.Static?r.push({type:Gt.Static,value:_}):n===Ne.Param||n===Ne.ParamRegExp||n===Ne.ParamRegExpEnd?(r.length>1&&(d==="*"||d==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Gt.Param,value:_,regexp:f,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):t("Invalid state to consume buffer"),_="")}function c(){_+=d}for(;i<e.length;){if(d=e[i++],d==="\\"&&n!==Ne.ParamRegExp){o=n,n=Ne.EscapeNext;continue}switch(n){case Ne.Static:d==="/"?(_&&u(),a()):d===":"?(u(),n=Ne.Param):c();break;case Ne.EscapeNext:c(),n=o;break;case Ne.Param:d==="("?n=Ne.ParamRegExp:wd.test(d)?c():(u(),n=Ne.Static,d!=="*"&&d!=="?"&&d!=="+"&&i--);break;case Ne.ParamRegExp:d===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+d:n=Ne.ParamRegExpEnd:f+=d;break;case Ne.ParamRegExpEnd:u(),n=Ne.Static,d!=="*"&&d!=="?"&&d!=="+"&&i--,f="";break;default:t("Unknown state");break}}return n===Ne.ParamRegExp&&t(`Unfinished custom RegExp for param "${_}"`),u(),a(),l}const fl="[^/]+?",Ed={sensitive:!1,strict:!1,start:!0,end:!0};var Be=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Be||{});const Cd=/[.+*?^${}()[\]/\\]/g;function Sd(e,t){const n=we({},Ed,t),o=[];let l=n.start?"^":"";const r=[];for(const _ of e){const f=_.length?[]:[Be.Root];n.strict&&!_.length&&(l+="/");for(let u=0;u<_.length;u++){const c=_[u];let b=Be.Segment+(n.sensitive?Be.BonusCaseSensitive:0);if(c.type===Gt.Static)u||(l+="/"),l+=c.value.replace(Cd,"\\$&"),b+=Be.Static;else if(c.type===Gt.Param){const{value:A,repeatable:v,optional:x,regexp:U}=c;r.push({name:A,repeatable:v,optional:x});const B=U||fl;if(B!==fl){b+=Be.BonusCustomRegExp;try{`${B}`}catch(G){throw new Error(`Invalid custom RegExp for param "${A}" (${B}): `+G.message)}}let K=v?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;u||(K=x&&_.length<2?`(?:/${K})`:"/"+K),x&&(K+="?"),l+=K,b+=Be.Dynamic,x&&(b+=Be.BonusOptional),v&&(b+=Be.BonusRepeatable),B===".*"&&(b+=Be.BonusWildcard)}f.push(b)}o.push(f)}if(n.strict&&n.end){const _=o.length-1;o[_][o[_].length-1]+=Be.BonusStrict}n.strict||(l+="/?"),n.end?l+="$":n.strict&&!l.endsWith("/")&&(l+="(?:/|$)");const a=new RegExp(l,n.sensitive?"":"i");function i(_){const f=_.match(a),u={};if(!f)return null;for(let c=1;c<f.length;c++){const b=f[c]||"",A=r[c-1];u[A.name]=b&&A.repeatable?b.split("/"):b}return u}function d(_){let f="",u=!1;for(const c of e){(!u||!f.endsWith("/"))&&(f+="/"),u=!1;for(const b of c)if(b.type===Gt.Static)f+=b.value;else if(b.type===Gt.Param){const{value:A,repeatable:v,optional:x}=b,U=A in _?_[A]:"";if(ot(U)&&!v)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const B=ot(U)?U.join("/"):U;if(!B)if(x)c.length<2&&(f.endsWith("/")?f=f.slice(0,-1):u=!0);else throw new Error(`Missing required param "${A}"`);f+=B}}return f||"/"}return{re:a,score:o,keys:r,parse:i,stringify:d}}function kd(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===Be.Static+Be.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Be.Static+Be.Segment?1:-1:0}function Yr(e,t){let n=0;const o=e.score,l=t.score;for(;n<o.length&&n<l.length;){const r=kd(o[n],l[n]);if(r)return r;n++}if(Math.abs(l.length-o.length)===1){if(pl(o))return 1;if(pl(l))return-1}return l.length-o.length}function pl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Rd={strict:!1,end:!0,sensitive:!1};function Ad(e,t,n){const o=Sd($d(e.path),n),l=we(o,{record:e,parent:t,children:[],alias:[]});return t&&!l.record.aliasOf==!t.record.aliasOf&&t.children.push(l),l}function Dd(e,t){const n=[],o=new Map;t=ll(Rd,t);function l(u){return o.get(u)}function r(u,c,b){const A=!b,v=hl(u);v.aliasOf=b&&b.record;const x=ll(t,u),U=[v];if("alias"in u){const G=typeof u.alias=="string"?[u.alias]:u.alias;for(const Y of G)U.push(hl(we({},v,{components:b?b.record.components:v.components,path:Y,aliasOf:b?b.record:v})))}let B,K;for(const G of U){const{path:Y}=G;if(c&&Y[0]!=="/"){const y=c.record.path,k=y[y.length-1]==="/"?"":"/";G.path=c.record.path+(Y&&k+Y)}if(B=Ad(G,c,x),b?b.alias.push(B):(K=K||B,K!==B&&K.alias.push(B),A&&u.name&&!bl(B)&&a(u.name)),zr(B)&&d(B),v.children){const y=v.children;for(let k=0;k<y.length;k++)r(y[k],B,b&&b.children[k])}b=b||B}return K?()=>{a(K)}:$s}function a(u){if(Gr(u)){const c=o.get(u);c&&(o.delete(u),n.splice(n.indexOf(c),1),c.children.forEach(a),c.alias.forEach(a))}else{const c=n.indexOf(u);c>-1&&(n.splice(c,1),u.record.name&&o.delete(u.record.name),u.children.forEach(a),u.alias.forEach(a))}}function i(){return n}function d(u){const c=Pd(u,n);n.splice(c,0,u),u.record.name&&!bl(u)&&o.set(u.record.name,u)}function _(u,c){let b,A={},v,x;if("name"in u&&u.name){if(b=o.get(u.name),!b)throw as(Oe.MATCHER_NOT_FOUND,{location:u});x=b.record.name,A=we(_l(c.params,b.keys.filter(K=>!K.optional).concat(b.parent?b.parent.keys.filter(K=>K.optional):[]).map(K=>K.name)),u.params&&_l(u.params,b.keys.map(K=>K.name))),v=b.stringify(A)}else if(u.path!=null)v=u.path,b=n.find(K=>K.re.test(v)),b&&(A=b.parse(v),x=b.record.name);else{if(b=c.name?o.get(c.name):n.find(K=>K.re.test(c.path)),!b)throw as(Oe.MATCHER_NOT_FOUND,{location:u,currentLocation:c});x=b.record.name,A=we({},c.params,u.params),v=b.stringify(A)}const U=[];let B=b;for(;B;)U.unshift(B.record),B=B.parent;return{name:x,path:v,params:A,matched:U,meta:Id(U)}}e.forEach(u=>r(u));function f(){n.length=0,o.clear()}return{addRoute:r,resolve:_,removeRoute:a,clearRoutes:f,getRoutes:i,getRecordMatcher:l}}function _l(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function hl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Od(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Od(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function bl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Id(e){return e.reduce((t,n)=>we(t,n.meta),{})}function Pd(e,t){let n=0,o=t.length;for(;n!==o;){const r=n+o>>1;Yr(e,t[r])<0?o=r:n=r+1}const l=Td(e);return l&&(o=t.lastIndexOf(l,o-1)),o}function Td(e){let t=e;for(;t=t.parent;)if(zr(t)&&Yr(e,t)===0)return t}function zr({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ml(e){const t=et(gn),n=et(mo),o=Z(()=>{const d=me(e.to);return t.resolve(d)}),l=Z(()=>{const{matched:d}=o.value,{length:_}=d,f=d[_-1],u=n.matched;if(!f||!u.length)return-1;const c=u.findIndex(rs.bind(null,f));if(c>-1)return c;const b=gl(d[_-2]);return _>1&&gl(f)===b&&u[u.length-1].path!==b?u.findIndex(rs.bind(null,d[_-2])):c}),r=Z(()=>l.value>-1&&Md(n.params,o.value.params)),a=Z(()=>l.value>-1&&l.value===n.matched.length-1&&Br(n.params,o.value.params));function i(d={}){if(Fd(d)){const _=t[me(e.replace)?"replace":"push"](me(e.to)).catch($s);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>_),_}return Promise.resolve()}return{route:o,href:Z(()=>o.value.href),isActive:r,isExactActive:a,navigate:i}}function Nd(e){return e.length===1?e[0]:e}const jd=nr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ml,setup(e,{slots:t}){const n=js(ml(e)),{options:o}=et(gn),l=Z(()=>({[vl(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[vl(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Nd(t.default(n));return e.custom?r:Or("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:l.value},r)}}}),vn=jd;function Fd(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Md(e,t){for(const n in t){const o=t[n],l=e[n];if(typeof o=="string"){if(o!==l)return!1}else if(!ot(l)||l.length!==o.length||o.some((r,a)=>r!==l[a]))return!1}return!0}function gl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const vl=(e,t,n)=>e??t??n,Vd=nr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=et(zn),l=Z(()=>e.route||o.value),r=et(dl,0),a=Z(()=>{let _=me(r);const{matched:f}=l.value;let u;for(;(u=f[_])&&!u.components;)_++;return _}),i=Z(()=>l.value.matched[a.value]);Bs(dl,Z(()=>a.value+1)),Bs(_d,i),Bs(zn,l);const d=pe();return Pe(()=>[d.value,i.value,e.name],([_,f,u],[c,b,A])=>{f&&(f.instances[u]=_,b&&b!==f&&_&&_===c&&(f.leaveGuards.size||(f.leaveGuards=b.leaveGuards),f.updateGuards.size||(f.updateGuards=b.updateGuards))),_&&f&&(!b||!rs(f,b)||!c)&&(f.enterCallbacks[u]||[]).forEach(v=>v(_))},{flush:"post"}),()=>{const _=l.value,f=e.name,u=i.value,c=u&&u.components[f];if(!c)return yl(n.default,{Component:c,route:_});const b=u.props[f],A=b?b===!0?_.params:typeof b=="function"?b(_):b:null,x=Or(c,we({},A,t,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(u.instances[f]=null)},ref:d}));return yl(n.default,{Component:x,route:_})||x}}});function yl(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Qr=Vd;function Ud(e){const t=Dd(e.routes,e),n=e.parseQuery||fd,o=e.stringifyQuery||cl,l=e.history,r=_s(),a=_s(),i=_s(),d=ja(Ot);let _=Ot;Zt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Dn.bind(null,R=>""+R),u=Dn.bind(null,zc),c=Dn.bind(null,Is);function b(R,z){let Q,oe;return Gr(R)?(Q=t.getRecordMatcher(R),oe=z):oe=R,t.addRoute(oe,Q)}function A(R){const z=t.getRecordMatcher(R);z&&t.removeRoute(z)}function v(){return t.getRoutes().map(R=>R.record)}function x(R){return!!t.getRecordMatcher(R)}function U(R,z){if(z=we({},z||d.value),typeof R=="string"){const C=On(n,R,z.path),I=t.resolve({path:C.path},z),P=l.createHref(C.fullPath);return we(C,I,{params:c(I.params),hash:Is(C.hash),redirectedFrom:void 0,href:P})}let Q;if(R.path!=null)Q=we({},R,{path:On(n,R.path,z.path).path});else{const C=we({},R.params);for(const I in C)C[I]==null&&delete C[I];Q=we({},R,{params:u(C)}),z.params=u(z.params)}const oe=t.resolve(Q,z),ge=R.hash||"";oe.params=f(c(oe.params));const m=Xc(o,we({},R,{hash:Wc(ge),path:oe.path})),g=l.createHref(m);return we({fullPath:m,hash:ge,query:o===cl?pd(R.query):R.query||{}},oe,{redirectedFrom:void 0,href:g})}function B(R){return typeof R=="string"?On(n,R,d.value.path):we({},R)}function K(R,z){if(_!==R)return as(Oe.NAVIGATION_CANCELLED,{from:z,to:R})}function G(R){return k(R)}function Y(R){return G(we(B(R),{replace:!0}))}function y(R,z){const Q=R.matched[R.matched.length-1];if(Q&&Q.redirect){const{redirect:oe}=Q;let ge=typeof oe=="function"?oe(R,z):oe;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=B(ge):{path:ge},ge.params={}),we({query:R.query,hash:R.hash,params:ge.path!=null?{}:R.params},ge)}}function k(R,z){const Q=_=U(R),oe=d.value,ge=R.state,m=R.force,g=R.replace===!0,C=y(Q,oe);if(C)return k(we(B(C),{state:typeof C=="object"?we({},ge,C.state):ge,force:m,replace:g}),z||Q);const I=Q;I.redirectedFrom=z;let P;return!m&&Zc(o,oe,Q)&&(P=as(Oe.NAVIGATION_DUPLICATED,{to:I,from:oe}),Xe(oe,oe,!0,!1)),(P?Promise.resolve(P):T(I,oe)).catch(O=>mt(O)?mt(O,Oe.NAVIGATION_GUARD_REDIRECT)?O:lt(O):_e(O,I,oe)).then(O=>{if(O){if(mt(O,Oe.NAVIGATION_GUARD_REDIRECT))return k(we({replace:g},B(O.to),{state:typeof O.to=="object"?we({},ge,O.to.state):ge,force:m}),z||I)}else O=E(I,oe,!0,g,ge);return q(I,oe,O),O})}function D(R,z){const Q=K(R,z);return Q?Promise.reject(Q):Promise.resolve()}function ee(R){const z=V.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(R):R()}function T(R,z){let Q;const[oe,ge,m]=hd(R,z);Q=Pn(oe.reverse(),"beforeRouteLeave",R,z);for(const C of oe)C.leaveGuards.forEach(I=>{Q.push(Nt(I,R,z))});const g=D.bind(null,R,z);return Q.push(g),S(Q).then(()=>{Q=[];for(const C of r.list())Q.push(Nt(C,R,z));return Q.push(g),S(Q)}).then(()=>{Q=Pn(ge,"beforeRouteUpdate",R,z);for(const C of ge)C.updateGuards.forEach(I=>{Q.push(Nt(I,R,z))});return Q.push(g),S(Q)}).then(()=>{Q=[];for(const C of m)if(C.beforeEnter)if(ot(C.beforeEnter))for(const I of C.beforeEnter)Q.push(Nt(I,R,z));else Q.push(Nt(C.beforeEnter,R,z));return Q.push(g),S(Q)}).then(()=>(R.matched.forEach(C=>C.enterCallbacks={}),Q=Pn(m,"beforeRouteEnter",R,z,ee),Q.push(g),S(Q))).then(()=>{Q=[];for(const C of a.list())Q.push(Nt(C,R,z));return Q.push(g),S(Q)}).catch(C=>mt(C,Oe.NAVIGATION_CANCELLED)?C:Promise.reject(C))}function q(R,z,Q){i.list().forEach(oe=>ee(()=>oe(R,z,Q)))}function E(R,z,Q,oe,ge){const m=K(R,z);if(m)return m;const g=z===Ot,C=Zt?history.state:{};Q&&(oe||g?l.replace(R.fullPath,we({scroll:g&&C&&C.scroll},ge)):l.push(R.fullPath,ge)),d.value=R,Xe(R,z,Q,g),lt()}let N;function j(){N||(N=l.listen((R,z,Q)=>{if(!p.listening)return;const oe=U(R),ge=y(oe,p.currentRoute.value);if(ge){k(we(ge,{replace:!0,force:!0}),oe).catch($s);return}_=oe;const m=d.value;Zt&&ad(il(m.fullPath,Q.delta),mn()),T(oe,m).catch(g=>mt(g,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_CANCELLED)?g:mt(g,Oe.NAVIGATION_GUARD_REDIRECT)?(k(we(B(g.to),{force:!0}),oe).then(C=>{mt(C,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===Kn.pop&&l.go(-1,!1)}).catch($s),Promise.reject()):(Q.delta&&l.go(-Q.delta,!1),_e(g,oe,m))).then(g=>{g=g||E(oe,m,!1),g&&(Q.delta&&!mt(g,Oe.NAVIGATION_CANCELLED)?l.go(-Q.delta,!1):Q.type===Kn.pop&&mt(g,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_DUPLICATED)&&l.go(-1,!1)),q(oe,m,g)}).catch($s)}))}let F=_s(),se=_s(),ie;function _e(R,z,Q){lt(R);const oe=se.list();return oe.length?oe.forEach(ge=>ge(R,z,Q)):console.error(R),Promise.reject(R)}function tt(){return ie&&d.value!==Ot?Promise.resolve():new Promise((R,z)=>{F.add([R,z])})}function lt(R){return ie||(ie=!R,j(),F.list().forEach(([z,Q])=>R?Q(R):z()),F.reset()),R}function Xe(R,z,Q,oe){const{scrollBehavior:ge}=e;if(!Zt||!ge)return Promise.resolve();const m=!Q&&id(il(R.fullPath,0))||(oe||!Q)&&history.state&&history.state.scroll||null;return un().then(()=>ge(R,z,m)).then(g=>g&&rd(g)).catch(g=>_e(g,R,z))}const je=R=>l.go(R);let ht;const V=new Set,p={currentRoute:d,listening:!0,addRoute:b,removeRoute:A,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:v,resolve:U,options:e,push:G,replace:Y,go:je,back:()=>je(-1),forward:()=>je(1),beforeEach:r.add,beforeResolve:a.add,afterEach:i.add,onError:se.add,isReady:tt,install(R){R.component("RouterLink",vn),R.component("RouterView",Qr),R.config.globalProperties.$router=p,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>me(d)}),Zt&&!ht&&d.value===Ot&&(ht=!0,G(l.location).catch(oe=>{}));const z={};for(const oe in Ot)Object.defineProperty(z,oe,{get:()=>d.value[oe],enumerable:!0});R.provide(gn,p),R.provide(mo,Yl(z)),R.provide(zn,d);const Q=R.unmount;V.add(R),R.unmount=function(){V.delete(R),V.size<1&&(_=Ot,N&&N(),N=null,d.value=Ot,ht=!1,ie=!1),Q()}}};function S(R){return R.reduce((z,Q)=>z.then(()=>ee(Q)),Promise.resolve())}return p}function cs(){return et(gn)}function go(e){return et(mo)}const Ld={__name:"App",setup(e){return(t,n)=>(w(),At(me(Qr)))}},qs=window.djangoConfig?.projectId??62,Ie=window.djangoConfig?.baseUrl??"http://localhost:8000",xl=window.djangoConfig?.csrfToken??"falsocsrf",be={apiBaseUrl:Ie,csrfToken:xl,idProject:qs,urlLogo:Ie+"/static/img/logo.png",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":xl},URLProjectData:Ie+"/api/projects/all-info/"+qs+"/",URLSourcesAvailable:Ie+"/api/projects/resources/available/",URLTechnicalsAvailable:Ie+"/api/technicals/avaliables/",URLVehiclesAvailable:Ie+"/api/vehicles/avaliables/",URLResourcesProject:Ie+"/api/projects/"+qs+"/resources/",URLUpdateResourceItem:Ie+"/api/projects/resources/update/",URLDeleteResourceProject:Ie+"/api/projects/resources/delete/${id_project_resource}/",URLSheetProjects:Ie+"/api/workorders/sheets/project/"+qs+"/",URLAddSheetProject:Ie+"/api/workorders/sheets/create/",URLUpdateSheetProject:Ie+"/api/workorders/sheets/update/",URLAddResourceToProject:Ie+"/api/projects/resources/add/",URLCreateCustodyChain:Ie+"/api/workorders/custody_chain/create/",URLCustodyChainDetail:Ie+"/api/workorders/custody_chain/detail/${id}/",URLUpdateCustodyChain:Ie+"/api/workorders/custody_chain/${id}/edit/",PDFCustodyChainReport:Ie+"/reports/custody-chain/${id}/",PDFCertFinalDisposition:Ie+"/reports/final-disposition/${id}/",URLWorkSheetReport:Ie+"/reports/worksheet/${id}/",URLReleaseResource:Ie+"/api/projects/resources/release/"},ds=zt("projectResourcesStore",{state:()=>({selectedResource:null,resourcesProject:[],newResourceProject:{id:null,project:null,resource:Object,type:null,detailed_description:null,cost:0,frecuency_type:"DAY",interval_days:2,week_days:null,month_days:null,operation_start_date:null,operation_end_date:null,is_retired:!1,retirement_date:null,retirement_reason:null,is_active:!0,is_selected:!1,is_confirm_delete:!1}}),actions:{async fetchResourcesProject(){try{const e=await fetch(be.URLResourcesProject,{method:"GET",headers:be.headers});if(!e.ok)throw new Error("Failed to fetch project resources");const t=await e.json();this.resourcesProject=t.data}catch(e){console.error("Error fetching project resources:",e),this.resourcesProject=[]}},async addResourcesToProject(e){try{const t=[];e.forEach(l=>{const r=l.resource?.type_equipment==="SERVIC",a=r?l.physical_equipment_code||0:l.resource_id,i={project_id:be.idProject,resource_id:l.resource_id,detailed_description:l.detailed_description,operation_start_date:l.operation_start_date,frequency_type:l.frequency_type||"MONTH",physical_equipment_code:a};switch(r?i.maintenance_cost=l.maintenance_cost||0:i.cost=l.cost||0,l.frequency_type){case"DAY":const d=parseInt(l.interval_days);i.interval_days=isNaN(d)||d<1?1:d;break;case"WEEK":i.weekdays=l.weekdays||[];break;case"MONTH":i.monthdays=l.monthdays||[];break}if(t.push(i),l.include_maintenance&&!r){const d={project_id:be.idProject,resource_id:l.resource_id,detailed_description:`Mantenimiento - ${l.detailed_description}`,maintenance_cost:l.maintenance_cost||0,operation_start_date:l.operation_start_date,frequency_type:l.maintenance_frequency_type||"DAY",physical_equipment_code:l.resource_id};switch(l.maintenance_frequency_type){case"DAY":const _=parseInt(l.maintenance_interval_days);d.interval_days=isNaN(_)||_<1?1:_;break;case"WEEK":d.weekdays=l.maintenance_weekdays||[];break;case"MONTH":d.monthdays=l.maintenance_monthdays||[];break}t.push(d)}});const n=await fetch(be.URLAddResourceToProject,{method:"POST",headers:be.headers,body:JSON.stringify(t)}),o=await n.json();if(!n.ok)throw new Error(o.error||`Error al agregar recursos. Se agregaron ${o.added||0} de ${t.length}`);return o}catch(t){throw console.error("Error adding resources to project:",t),t}},async updateResourceProject(e){try{const t=await fetch(be.URLUpdateResourceItem,{method:"PUT",headers:be.headers,body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to update project resource");const o=this.resourcesProject.findIndex(l=>l.id===e.id);return o!==-1&&(this.resourcesProject[o]={...this.resourcesProject[o],...n.data}),n.data}catch(t){throw console.error("Error updating project resource:",t),t}},async deleteResourceProject(e){try{const t=be.URLDeleteResourceProject.replace("${id_project_resource}",e),n=await fetch(t,{method:"DELETE",headers:be.headers});if(!n.ok){let o="Failed to delete project resource";try{o=(await n.json()).error||o}catch{o=await n.text()||o}throw new Error(o)}this.resourcesProject=this.resourcesProject.filter(o=>o.id!==e)}catch(t){throw console.error("Error deleting project resource:",t),t}},async releaseResourceProject(e){try{const t=await fetch(be.URLReleaseResource,{method:"PUT",headers:be.headers,body:JSON.stringify({id:e})}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to release project resource");const o=this.resourcesProject.findIndex(l=>l.id===e);return o!==-1&&(this.resourcesProject[o].is_active=!1),n}catch(t){throw console.error("Error releasing project resource:",t),t}}}}),Fe=zt("projectStore",{state:()=>({project:{id:null,partner_id:null,partner_name:null,location:null,cardinal_point:null,contact_name:null,contact_phone:null,start_date:null,end_date:null,is_closed:!1},workOrders:[],workOrdersCount:0,totalCustodyChains:0,loading:!1,error:null}),getters:{allCustodyChains:e=>e.workOrders.flatMap(t=>t.custody_chains||[]),getWorkOrderById:e=>t=>e.workOrders.find(n=>n.id===t),getCustodyChainById:e=>t=>{for(const n of e.workOrders){const o=n.custody_chains?.find(l=>l.id===t);if(o)return o}return null},projectStats:e=>({totalWorkOrders:e.workOrdersCount,totalCustodyChains:e.totalCustodyChains,inProgressWorkOrders:e.workOrders.filter(t=>t.status==="IN_PROGRESS").length,invoicedWorkOrders:e.workOrders.filter(t=>t.status==="INVOICED").length}),resourceIdsInSheets:e=>{const t=new Set;return e.workOrders.forEach(n=>{(n.details||[]).forEach(o=>{const l=o?.project_resource_item?.id;l&&t.add(l)})}),t},isResourceInSheet:e=>t=>e.workOrders.some(n=>(n.details||[]).some(o=>o?.project_resource_item?.id===t))},actions:{async fetchProjectData(){this.loading=!0,this.error=null,console.log(`Fetching all info for project ${be.idProject}...`);try{const e=await fetch(be.URLProjectData,{method:"GET",headers:be.headers});if(!e.ok)throw new Error(`Failed to fetch project info: ${e.status}`);const t=await e.json();if(t.success&&t.data)this.project=t.data.project,this.workOrders=t.data.work_orders||[],this.workOrdersCount=t.data.work_orders_count||0,this.totalCustodyChains=t.data.total_custody_chains||0,console.log(`Project ${this.project.id} loaded successfully with ${this.workOrdersCount} work orders`);else throw new Error(t.error||"Invalid response format")}catch(e){console.error("Error fetching project data:",e),this.error=e.message,this.resetProjectData()}finally{this.loading=!1}},async fetchProjectAllInfo(e){this.loading=!0,this.error=null,console.log(`Fetching all info for project ${e}...`);try{const t=`${be.apiBaseUrl}/api/projects/all-info/${e}/`,n=await fetch(t,{method:"GET",headers:be.headers});if(!n.ok)throw new Error(`Failed to fetch project info: ${n.status}`);const o=await n.json();if(o.success&&o.data)this.project=o.data.project,this.workOrders=o.data.work_orders||[],this.workOrdersCount=o.data.work_orders_count||0,this.totalCustodyChains=o.data.total_custody_chains||0,console.log(`Project ${e} loaded successfully with ${this.workOrdersCount} work orders`);else throw new Error(o.error||"Invalid response format")}catch(t){console.error("Error fetching project all info:",t),this.error=t.message,this.resetProjectData()}finally{this.loading=!1}},resetProjectData(){this.project={id:null,partner_id:null,partner_name:null,location:null,cardinal_point:null,contact_name:null,contact_phone:null,start_date:null,end_date:null,is_closed:!1},this.workOrders=[],this.workOrdersCount=0,this.totalCustodyChains=0},updateWorkOrder(e,t){const n=this.workOrders.findIndex(o=>o.id===e);n!==-1&&(this.workOrders[n]={...this.workOrders[n],...t})},updateCustodyChain(e,t){for(const n of this.workOrders){const o=n.custody_chains?.findIndex(l=>l.id===e);if(o!==-1&&o!==void 0){n.custody_chains[o]={...n.custody_chains[o],...t};break}}},async refreshCurrentProject(){await this.fetchProjectData()}}}),qd=e=>{const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)||t===null||t===void 0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(0):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},Hd=e=>{const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)||t===null||t===void 0?"0.00":new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},nn=e=>{if(!e)return"--";const[t,n,o]=e.split("-"),l=new Date(t,n-1,o);return new Intl.DateTimeFormat("es-GT",{day:"2-digit",month:"2-digit",year:"numeric"}).format(l)},Bd={class:"space-y-3"},Gd={class:"flex justify-between items-center mb-4"},Wd={class:"overflow-x-auto"},Kd={class:"table table-zebra w-full"},Yd={key:0},zd={class:"p-2 border border-gray-300"},Qd={class:"flex items-center justify-between"},Jd={key:0,class:"badge badge-success badge-sm gap-1",title:"Recurso activo"},Xd={key:1,class:"badge badge-error badge-sm gap-1",title:"Recurso inactivo"},Zd={class:"font-mono"},eu={class:"p-2 border border-gray-300 text-center"},tu={class:"p-2 border border-gray-300"},su={class:"flex items-center gap-2"},nu={key:0,class:"text-red-500 border rounded p-1 bg-red-100 text-xs mr-1"},ou={key:1,class:"text-blue-600 border rounded p-1 bg-blue-100 text-xs mr-1",title:"Este recurso est asignado a una planilla de trabajo"},lu={class:"p-2 border border-gray-300"},ru={class:"p-2 border border-gray-300 text-right font-mono"},au={class:"p-2 border border-gray-300 text-center"},iu={class:"text-xs"},cu={class:"p-2 border border-gray-300 text-end font-mono"},du={class:"p-2 border border-gray-300 text-end font-mono"},uu={class:"p-2 border border-gray-300 text-end"},fu={class:"flex gap-2 justify-end"},pu=["title","disabled","onClick"],_u=["title","disabled","onClick"],hu={class:"stats shadow w-full"},bu={class:"stat"},mu={class:"stat-value text-primary"},gu={class:"stat-desc"},vu={class:"stat text-end"},yu={class:"stat-value text-info text-end"},xu={__name:"TabResources",emits:["edit-resource"],setup(e,{emit:t}){const n=t,o=ds(),l=Fe(),r=Z(()=>[...o.resourcesProject].sort((u,c)=>u.type_resource==="EQUIPO"&&c.type_resource==="SERVICIO"?-1:u.type_resource==="SERVICIO"&&c.type_resource==="EQUIPO"?1:u.id-c.id)),a=pe(null),i=u=>parseFloat(u)===0,d=u=>l.isResourceInSheet(u),_=u=>{n("edit-resource",u)},f=async u=>{if(a.value===u.id)try{await o.deleteResourceProject(u.id),a.value=null}catch(c){console.error("Error al eliminar recurso:",c),alert(c.message||"Error al eliminar el recurso"),a.value=null}else a.value=u.id};return(u,c)=>(w(),$("div",Bd,[s("div",Gd,[c[1]||(c[1]=s("h2",{class:"font-semibold text-gray-800 flex items-center gap-2"},[s("i",{class:"las la-tools text-blue-600"}),L(" Recursos Asignados ")],-1)),Ce(me(vn),{class:"btn btn-primary btn-sm",to:{name:"resource-form"}},{default:kt(()=>[...c[0]||(c[0]=[s("i",{class:"las la-plus"},null,-1),L(" Asignar Recursos ",-1)])]),_:1})]),s("div",Wd,[s("table",Kd,[c[7]||(c[7]=s("thead",null,[s("tr",{class:"bg-gray-500 text-white"},[s("th",{class:"p-2 border border-gray-100 text-center"},"#"),s("th",{class:"p-2 border border-gray-100 text-center"},"Tipo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Cdigo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Descripcin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Costo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Frecuencia"),s("th",{class:"p-2 border border-gray-100 text-center"},"Fecha Inicio"),s("th",{class:"p-2 border border-gray-100 text-center"},"Fecha Fin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Acciones")])],-1)),s("tbody",null,[r.value.length===0?(w(),$("tr",Yd,[...c[2]||(c[2]=[s("td",{colspan:"9",class:"text-center text-gray-500 py-8"},[s("i",{class:"las la-inbox text-4xl"}),s("p",null,"No hay recursos asignados a este proyecto")],-1)])])):(w(!0),$(de,{key:1},ye(r.value,b=>(w(),$("tr",{key:b.id,class:le({"text-red-500 font-bold bg-red-100":i(b.cost)})},[s("td",zd,[s("div",Qd,[b.is_active?(w(),$("span",Jd,[...c[3]||(c[3]=[s("i",{class:"las la-check-circle"},null,-1)])])):(w(),$("span",Xd,[...c[4]||(c[4]=[s("i",{class:"las la-times-circle"},null,-1)])])),s("span",Zd,h(b.id),1)])]),s("td",eu,h(b.type_resource),1),s("td",tu,[s("div",su,[b.is_retired?(w(),$("span",nu,"RETIRADO")):te("",!0),d(b.id)?(w(),$("span",ou,"EN USO")):te("",!0),L(" "+h(b.resource_item_code),1)])]),s("td",lu,h(b.detailed_description),1),s("td",ru,h(me(Hd)(b.cost)),1),s("td",au,[s("span",iu,h(b.frequency_type==="DAY"?"Diario":b.frequency_type==="WEEK"?"Semanal":b.frequency_type==="MONTH"?"Mensual":b.frequency_type),1)]),s("td",cu,h(me(nn)(b.operation_start_date)),1),s("td",du,h(b.operation_end_date?me(nn)(b.operation_end_date):"Indefinido"),1),s("td",uu,[s("div",fu,[s("button",{class:le(["btn btn-xs border-blue-500 text-teal-500 bg-white",{"opacity-50 cursor-not-allowed":!b.is_active}]),title:b.is_active?"Editar":"No se puede editar: el recurso est inactivo",disabled:!b.is_active,onClick:A=>_(b)},[...c[5]||(c[5]=[s("i",{class:"las la-edit"},null,-1),L(" EDITAR ",-1)])],10,pu),s("button",{class:le(["btn btn-xs border-red-500 text-red-500 bg-white",{"opacity-50 cursor-not-allowed":d(b.id)||!b.is_active,"bg-red-500 text-black":a.value===b.id}]),title:b.is_active?d(b.id)?"No se puede eliminar: el recurso est asignado a una planilla de trabajo":a.value===b.id?"Haz clic nuevamente para confirmar":"Eliminar recurso":"No se puede eliminar: el recurso est inactivo",disabled:d(b.id)||!b.is_active,onClick:A=>f(b)},[c[6]||(c[6]=s("i",{class:"las la-trash"},null,-1)),L(" "+h(a.value===b.id?"CONFIRMAR":"ELIMINAR"),1)],10,_u)])])],2))),128))])])]),s("div",hu,[s("div",bu,[c[8]||(c[8]=s("div",{class:"stat-title"},"Total Recursos",-1)),s("div",mu,h(r.value.length),1),s("div",gu,h(r.value.filter(b=>b.type_resource==="EQUIPO").length)+" Equipos y "+h(r.value.filter(b=>b.type_resource==="SERVICIO").length)+" Servicios",1)]),s("div",vu,[c[9]||(c[9]=s("div",{class:"stat-title"},"Costo Total",-1)),s("div",yu,h(me(qd)(r.value.reduce((b,A)=>b+parseFloat(A.cost),0))),1),c[10]||(c[10]=s("div",{class:"stat-desc"},"Suma de todos los recursos",-1))])])]))}},vo=zt("sheetProjectsStore",{state:()=>({newSheetProject:{id:null,project:null,issue_date:null,period_start:null,period_end:null,status:"IN_PROGRESS",series_code:"PSL-PS-00000-00",service_type:"ALQUILER Y MANTENIMIENTO",total_gallons:0,total_barrels:0,total_cubic_meters:0,client_po_reference:null,contact_reference:null,contact_phone_reference:null,final_disposition_reference:null,invoice_reference:null,subtotal:0,tax_amount:0,total:0,notes:"",sheet_project_file:null,certificate_final_disposition_file:null},loading:!1,error:null}),getters:{sheetProjects:()=>Fe().workOrders||[],getSheetProjectById:()=>e=>Fe().getWorkOrderById(e),hasInProgressSheet:()=>Fe().workOrders.some(t=>t.status==="IN_PROGRESS"),lastActiveSheetProjectID:()=>Fe().workOrders.find(n=>n.status==="IN_PROGRESS")?.id||null,getCustodyChainsForSheet:()=>e=>Fe().getWorkOrderById(e)?.custody_chains||[]},actions:{async addSheetProject(e,t=[]){this.loading=!0,this.error=null,console.log("Adding new sheet project",e),console.log("Selected resources:",t);try{const n={project_id:e.project,period_start:e.period_start,period_end:e.period_end,service_type:e.service_type,status:e.status||"IN_PROGRESS",series_code:e.series_code||"PSL-PS-00000-00",client_po_reference:e.client_po_reference||null,invoice_reference:e.invoice_reference||null};e.issue_date&&(n.issue_date=e.issue_date),e.contact_reference&&(n.contact_reference=e.contact_reference),e.contact_phone_reference&&(n.contact_phone_reference=e.contact_phone_reference),e.final_disposition_reference&&(n.final_disposition_reference=e.final_disposition_reference),t&&t.length>0&&(n.details=t.map(a=>({detail_id:0,project_resource_id:a.id,resource_item_id:a.resource_item_id,detailed_description:a.detailed_description,cost:a.cost,type_resource:a.type_resource,frequency_type:a.frequency_type,interval_days:a.interval_days,weekdays:a.weekdays,monthdays:a.monthdays,quantity:0,total_line:0,total_price:0})));const o=await fetch(be.URLAddSheetProject,{method:"POST",headers:be.headers,body:JSON.stringify(n)}),l=await o.json();if(!o.ok)throw new Error(l.error||`HTTP error! status: ${o.status}`);return await Fe().refreshCurrentProject(),l.data.id}catch(n){throw console.error("Error adding sheet project:",n),this.error=n.message,n}finally{this.loading=!1}},async updateSheetProject(e,t=[]){this.loading=!0,this.error=null,console.log("Updating sheet project:",e),console.log("Selected resources for update:",t);try{const n={id:e.id,period_start:e.period_start,service_type:e.service_type};e.period_end&&(n.period_end=e.period_end),e.status&&(n.status=e.status),e.contact_reference&&(n.contact_reference=e.contact_reference),e.contact_phone_reference&&(n.contact_phone_reference=e.contact_phone_reference),e.client_po_reference&&(n.client_po_reference=e.client_po_reference),e.final_disposition_reference&&(n.final_disposition_reference=e.final_disposition_reference),e.invoice_reference&&(n.invoice_reference=e.invoice_reference),t&&t.length>0&&(n.details=t.map(a=>({detail_id:a.detail_id||0,project_resource_id:a.id,resource_item_id:a.resource_item_id,resource_item_code:a.resource_item_code,resource_item_name:a.resource_item_name,detailed_description:a.detailed_description,cost:a.cost,type_resource:a.type_resource,frequency_type:a.frequency_type,interval_days:a.interval_days,weekdays:a.weekdays,monthdays:a.monthdays})));const o=await fetch(be.URLUpdateSheetProject,{method:"PUT",headers:be.headers,body:JSON.stringify(n)}),l=await o.json();if(!o.ok)throw new Error(l.error||`HTTP error! status: ${o.status}`);return await Fe().refreshCurrentProject(),l.data}catch(n){throw console.error("Error updating sheet project:",n),this.error=n.message,n}finally{this.loading=!1}},async closeSheetProject(e){this.loading=!0,this.error=null,console.log("Closing sheet project with ID:",e);try{const n=Fe().getWorkOrderById(e);if(!n)throw new Error("Planilla no encontrada");return await this.updateSheetProject({...n,status:"INVOICED",period_end:new Date().toISOString().split("T")[0]}),!0}catch(t){throw console.error("Error closing sheet project:",t),this.error=t.message,t}finally{this.loading=!1}},initializeNewSheetProject(e){this.newSheetProject={id:null,project:e.id,issue_date:new Date().toISOString().split("T")[0],period_start:null,period_end:null,status:"IN_PROGRESS",series_code:"PSL-PS-00000-00",service_type:"ALQUILER Y MANTENIMIENTO",total_gallons:0,total_barrels:0,total_cubic_meters:0,client_po_reference:null,contact_reference:e.contact_name,contact_phone_reference:e.contact_phone,final_disposition_reference:null,invoice_reference:null,subtotal:0,tax_amount:0,total:0,notes:"",sheet_project_file:null,certificate_final_disposition_file:null}},resetNewSheetProject(){this.newSheetProject={id:null,project:null,issue_date:null,period_start:null,period_end:null,status:"IN_PROGRESS",series_code:"PSL-PS-00000-00",service_type:"ALQUILER Y MANTENIMIENTO",total_gallons:0,total_barrels:0,total_cubic_meters:0,client_po_reference:null,contact_reference:null,contact_phone_reference:null,final_disposition_reference:null,invoice_reference:null,subtotal:0,tax_amount:0,total:0,notes:"",sheet_project_file:null,certificate_final_disposition_file:null}}}}),wu={class:"space-y-3"},$u={class:"flex justify-between items-center mb-4"},Eu={key:1,class:"text-amber-700 badge bg-yellow-100"},Cu={class:"overflow-x-auto"},Su={class:"table table-zebra w-full"},ku={key:0},Ru={class:"p-2 border border-gray-300"},Au={class:"p-2 border border-gray-300 font-mono"},Du={class:"p-2 border border-gray-300"},Ou={class:"p-2 border border-gray-300 text-end"},Iu={class:"p-2 border border-gray-300 text-end"},Pu={class:"p-2 border border-gray-300 text-end"},Tu={class:"p-2 border border-gray-300"},Nu={class:"p-2 border border-gray-300"},ju={class:"p-2 border border-gray-300"},Fu={class:"p-2 border border-gray-300 text-right font-mono"},Mu={class:"p-2 border border-gray-300 text-right font-mono"},Vu={class:"p-2 border border-gray-300 text-right font-mono"},Uu={class:"p-2 border border-gray-300 text-end"},Lu={class:"flex gap-2 justify-end"},qu=["onClick"],Hu=["onClick"],Bu=["href"],Gu=["href"],Wu={__name:"TabSheetProject",setup(e){const t=cs(),n=Fe();vo();const o=Z(()=>n.workOrders||[]),l=Z(()=>o.value.some(u=>u.status==="IN_PROGRESS")),r=Z(()=>o.value.map(u=>{const c=u.custody_chains||[],b=c.reduce((x,U)=>x+(U.total_gallons||0),0),A=c.reduce((x,U)=>x+(U.total_barrels||0),0),v=c.reduce((x,U)=>x+(U.total_cubic_meters||0),0);return{...u,calculated_total_gallons:b,calculated_total_barrels:A,calculated_total_cubic_meters:v,custody_chains_count:c.length}})),a=u=>u?new Intl.DateTimeFormat("es-EC",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(u)):"N/A",i=u=>({IN_PROGRESS:{text:"EN EJECUCIN",class:"bg-green-500 text-white"},INVOICED:{text:"FACTURADO",class:"bg-cyan-500 text-white"},CANCELLED:{text:"CANCELADO",class:"bg-orange-500 text-white"}})[u]||{text:u,class:"bg-gray-500 text-white"},d=()=>{t.push({name:"sheet-project-form"})},_=u=>{t.push({name:"sheet-project-form",params:{id:u.id}})},f=u=>{t.push({name:"sheet-project-view",params:{id:u}})};return(u,c)=>(w(),$("div",wu,[s("div",$u,[c[2]||(c[2]=s("h2",{class:"font-semibold text-gray-800 flex items-center gap-2"},[s("i",{class:"las la-file-invoice-dollar text-blue-600"}),L(" Planillas del Proyecto ")],-1)),l.value?(w(),$("div",Eu,[...c[1]||(c[1]=[s("i",{class:"las la-exclamation-triangle"},null,-1),L(" PLANILLA EN EJECUCIN ",-1)])])):(w(),$("button",{key:0,onClick:d,class:"btn btn-primary btn-sm"},[...c[0]||(c[0]=[s("i",{class:"las la-plus"},null,-1),L(" Crear Nueva Planilla ",-1)])]))]),s("div",Cu,[s("table",Su,[c[8]||(c[8]=s("thead",null,[s("tr",{class:"bg-gray-500 text-white"},[s("th",{class:"p-2 border border-gray-100 text-center"},"#"),s("th",{class:"p-2 border border-gray-100 text-center"},"Serie"),s("th",{class:"p-2 border border-gray-100 text-center"},"Estado"),s("th",{class:"p-2 border border-gray-100 text-center"},"Fecha Emisin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Perodo Inicio"),s("th",{class:"p-2 border border-gray-100 text-center"},"Perodo Fin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Contacto Ref."),s("th",{class:"p-2 border border-gray-100 text-center"},"Telfono"),s("th",{class:"p-2 border border-gray-100 text-center"},"Tipo Servicio"),s("th",{class:"p-2 border border-gray-100 text-center"},"Galones"),s("th",{class:"p-2 border border-gray-100 text-center"},"Barriles"),s("th",{class:"p-2 border border-gray-100 text-center"},"M"),s("th",{class:"p-2 border border-gray-100 text-center"},"Acciones")])],-1)),s("tbody",null,[r.value.length===0?(w(),$("tr",ku,[...c[3]||(c[3]=[s("td",{colspan:"13",class:"text-center text-gray-500 py-8"},[s("i",{class:"las la-inbox text-4xl"}),s("p",null,"No hay planillas registradas para este proyecto")],-1)])])):(w(!0),$(de,{key:1},ye(r.value,b=>(w(),$("tr",{key:b.id},[s("td",Ru,h(b.id),1),s("td",Au,h(b.series_code),1),s("td",Du,[s("span",{class:le(["badge px-3 py-1 rounded text-xs font-medium",i(b.status).class])},h(i(b.status).text),3)]),s("td",Ou,h(a(b.issue_date)),1),s("td",Iu,h(a(b.period_start)),1),s("td",Pu,h(b.period_end?a(b.period_end):"--"),1),s("td",Tu,h(b.contact_reference||"N/A"),1),s("td",Nu,h(b.contact_phone_reference||"N/A"),1),s("td",ju,h(b.service_type),1),s("td",Fu,h(parseFloat(b.calculated_total_gallons||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),s("td",Mu,h(parseFloat(b.calculated_total_barrels||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),s("td",Vu,h(parseFloat(b.calculated_total_cubic_meters||0).toFixed(2)),1),s("td",Uu,[s("div",Lu,[s("button",{onClick:A=>_(b),class:"btn btn-xs border-blue-500 text-teal-500 bg-white",title:"Editar planilla"},[...c[4]||(c[4]=[s("i",{class:"las la-edit"},null,-1),L(" EDITAR ",-1)])],8,qu),s("button",{onClick:A=>f(b.id),class:"btn btn-xs border-purple-500 text-purple-500 bg-white",title:"Ver cadenas de custodia"},[c[5]||(c[5]=s("i",{class:"las la-link"},null,-1)),L(" C. CUSTODIA ("+h(b.custody_chains_count)+") ",1)],8,Hu),s("a",{href:me(be).URLWorkSheetReport.replace("${id}",b.id),target:"_blank",class:"btn btn-xs border-green-500 text-green-500 bg-white",title:"Descargar reporte PDF de la planilla"},[...c[6]||(c[6]=[s("i",{class:"las la-file-pdf"},null,-1),L(" PLANILLA ",-1)])],8,Bu),s("a",{href:me(be).PDFCertFinalDisposition.replace("${id}",b.id),target:"_blank",class:"btn btn-xs border-amber-500 text-amber-600 bg-white",title:"Descargar certificado de disposicin final"},[...c[7]||(c[7]=[s("i",{class:"las la-certificate"},null,-1),L(" CDF ",-1)])],8,Gu)])])]))),128))])])])]))}};function Ku(e,t,n){const o=[],{frequency_type:l,interval_days:r,weekdays:a,monthdays:i}=e;if(l==="DAY"){const d=r===0?1:r;let _=new Date(t);for(;_<=n;)o.push(new Date(_)),_.setDate(_.getDate()+d)}else if(l==="WEEK"){if(!a||a.length===0)return console.warn("Recurso WEEK sin weekdays definidos:",e),o;let d=new Date(t);for(;d<=n;){const _=(d.getDay()+6)%7;a.includes(_)&&o.push(new Date(d)),d.setDate(d.getDate()+1)}}else if(l==="MONTH"){if(!i||i.length===0)return console.warn("Recurso MONTH sin monthdays definidos:",e),o;let d=new Date(t);for(;d<=n;){const _=d.getDate();i.includes(_)&&o.push(new Date(d)),d.setDate(d.getDate()+1)}}return o}function Yu(e,t=90,n=null){const o=n?new Date(n):new Date;o.setHours(0,0,0,0);const l=new Date(o);l.setDate(o.getDate()+t);const r=[];return e.forEach(a=>{if(!a.is_active||a.is_retired||a.type_resource!=="SERVICIO")return;if(!a.operation_start_date){console.warn("Recurso sin fecha de inicio de operacin:",a);return}const[i,d,_]=a.operation_start_date.split("-").map(Number),f=new Date(i,d-1,_),u=f>o?f:o;Ku(a,u,l).forEach(b=>{r.push({resource_id:a.id,resource_item_id:a.resource_item_id,resource_code:a.resource_item_code,resource_name:a.resource_item_name,description:a.detailed_description,cost:parseFloat(a.cost),frequency_type:a.frequency_type,interval_days:a.interval_days,weekdays:a.weekdays,monthdays:a.monthdays,operation_start_date:a.operation_start_date,scheduled_date:b.toISOString().split("T")[0],day_of_week:b.toLocaleDateString("es-GT",{weekday:"long"}),week_number:zu(b),days_until:Math.ceil((b-o)/(1e3*60*60*24))})})}),r.sort((a,i)=>new Date(a.scheduled_date)-new Date(i.scheduled_date))}function zu(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),n=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-n);const o=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-o)/864e5+1)/7)}function Qu(e){return e.reduce((t,n)=>{const o=`Semana ${n.week_number}`;return t[o]||(t[o]=[]),t[o].push(n),t},{})}function Ju(e){return e.reduce((t,n)=>{const l=new Date(n.scheduled_date).toLocaleDateString("es-GT",{year:"numeric",month:"long"});return t[l]||(t[l]=[]),t[l].push(n),t},{})}function Xu(e){return{total_maintenances:e.length,total_cost:e.reduce((t,n)=>t+n.cost,0),resources_count:new Set(e.map(t=>t.resource_id)).size,by_week:Qu(e),by_month:Ju(e)}}const Zu={class:"space-y-4"},ef={class:"bg-slate-700 rounded-lg p-3 shadow border border-slate-600"},tf={class:"flex items-center justify-between"},sf={class:"text-center flex-1"},nf={class:"text-white font-bold text-xl capitalize"},of={class:"grid grid-cols-3 gap-2 mt-3"},lf={class:"bg-white rounded-lg p-3 text-center border border-gray-200"},rf={class:"text-gray-800 font-bold text-2xl"},af={class:"bg-white rounded-lg p-3 text-center border border-gray-200"},cf={class:"text-gray-800 font-bold text-2xl"},df={class:"bg-white rounded-lg p-3 text-center border border-gray-200"},uf={class:"text-gray-800 font-bold text-lg"},ff={key:0,class:"alert alert-warning"},pf={key:1,class:"alert alert-info"},_f={key:2,class:"bg-white rounded-lg shadow-lg overflow-hidden border-2 border-slate-300"},hf={class:"grid grid-cols-7 bg-slate-700"},bf=["onClick"],mf={class:"flex items-center justify-between mb-1"},gf={key:0,class:"badge badge-xs badge-success"},vf={key:0,class:"space-y-0.5"},yf={class:"text-xs truncate text-gray-600"},xf={key:0,class:"text-xs text-gray-500 pl-3"},wf={key:3,class:"bg-white rounded-lg shadow-lg p-4 border-l-4 border-lime-500"},$f={class:"flex items-center justify-between mb-4"},Ef={class:"text-lg font-semibold text-gray-700"},Cf={class:"overflow-x-auto"},Sf={class:"table table-sm"},kf={class:"text-xs"},Rf={class:"badge badge-outline badge-sm"},Af={class:"text-xs font-medium"},Df={class:"text-xs text-gray-600"},Of={class:"text-xs"},If={class:"text-xs text-right font-semibold"},Pf={class:"bg-lime-100 font-semibold"},Tf={class:"text-right text-xs"},Nf={key:4,class:"alert alert-info"},jf={__name:"TabCalendar",setup(e){const t=ds(),{resourcesProject:n}=Nc(t),o=pe(!0),l=["Lun","Mar","Mi","Jue","Vie","Sb","Dom"],r=pe(0),a=pe(null),i=Z(()=>{const y=new Date,k=y.getFullYear(),D=y.getMonth()+r.value,ee=new Date(k,D,1),T=new Date(k,D+1,0);return{year:ee.getFullYear(),month:ee.getMonth(),firstDay:ee,lastDay:T,daysInMonth:T.getDate()}}),d=Z(()=>{if(!n.value||n.value.length===0)return[];const{firstDay:y,lastDay:k}=i.value,D=Math.ceil((k-y)/(1e3*60*60*24))+1;return Yu(n.value,D,y)}),_=Z(()=>{const y={};return d.value.forEach(k=>{y[k.scheduled_date]||(y[k.scheduled_date]=[]),y[k.scheduled_date].push(k)}),y}),f=Z(()=>{const{firstDay:y,daysInMonth:k,year:D,month:ee}=i.value,T=[];let q=(y.getDay()+6)%7,E=[];for(let N=0;N<q;N++)E.push(null);for(let N=1;N<=k;N++){const j=`${D}-${String(ee+1).padStart(2,"0")}-${String(N).padStart(2,"0")}`,F=_.value[j]||[];E.push({day:N,dateStr:j,maintenances:F,isToday:u(D,ee,N),hasMaintenances:F.length>0}),E.length===7&&(T.push(E),E=[])}if(E.length>0){for(;E.length<7;)E.push(null);T.push(E)}return T}),u=(y,k,D)=>{const ee=new Date;return ee.getFullYear()===y&&ee.getMonth()===k&&ee.getDate()===D},c=Z(()=>Xu(d.value)),b=Z(()=>{const{firstDay:y}=i.value;return{monthYear:y.toLocaleDateString("es-GT",{month:"long",year:"numeric"})}}),A=()=>{r.value-=1,a.value=null},v=()=>{r.value+=1,a.value=null},x=()=>{r.value=0,a.value=null},U=y=>{y&&y.hasMaintenances&&(a.value=a.value?.dateStr===y.dateStr?null:y)},B=y=>new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(y),K=y=>({DAY:"bg-blue-500",WEEK:"bg-purple-500",MONTH:"bg-orange-500"})[y]||"bg-gray-500",G=y=>({DAY:"badge-primary",WEEK:"badge-secondary",MONTH:"badge-accent"})[y]||"badge-ghost",Y=y=>{switch(y.frequency_type){case"DAY":return y.interval_days===0?"Diario":`Cada ${y.interval_days} das`;case"WEEK":return"Semanal";case"MONTH":return"Mensual";default:return y.frequency_type}};return _t(async()=>{(!n.value||n.value.length===0)&&await t.fetchResourcesProject(),o.value=!1}),Pe(n,y=>{y&&y.length>0&&(o.value=!1)},{immediate:!0}),(y,k)=>(w(),$("div",Zu,[s("div",ef,[s("div",tf,[s("button",{onClick:A,class:"btn btn-circle btn-sm bg-white text-gray-600 hover:bg-gray-50 border-gray-300"},[...k[1]||(k[1]=[s("i",{class:"las la-chevron-left text-xl"},null,-1)])]),s("div",sf,[s("h2",nf,h(b.value.monthYear),1),r.value!==0?(w(),$("button",{key:0,onClick:x,class:"btn btn-xs bg-white text-gray-600 hover:bg-gray-50 border-gray-300 mt-2"},[...k[2]||(k[2]=[s("i",{class:"las la-calendar-day"},null,-1),L(" Mes Actual ",-1)])])):te("",!0)]),s("button",{onClick:v,class:"btn btn-circle btn-sm bg-white text-gray-600 hover:bg-gray-50 border-gray-300"},[...k[3]||(k[3]=[s("i",{class:"las la-chevron-right text-xl"},null,-1)])])]),s("div",of,[s("div",lf,[k[4]||(k[4]=s("p",{class:"text-gray-500 text-xs"},"Mantenimientos",-1)),s("p",rf,h(c.value.total_maintenances),1)]),s("div",af,[k[5]||(k[5]=s("p",{class:"text-gray-500 text-xs"},"Recursos",-1)),s("p",cf,h(c.value.resources_count),1)]),s("div",df,[k[6]||(k[6]=s("p",{class:"text-gray-500 text-xs"},"Costo Total",-1)),s("p",uf,h(B(c.value.total_cost)),1)])]),k[7]||(k[7]=Gi('<div class="flex justify-center gap-3 mt-2 bg-slate-800 text-white rounded-lg py-1.5 px-2"><div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-blue-500"></span><span class="text-white text-xs">Intervalo das</span></div><div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-purple-500"></span><span class="text-white text-xs">Das semana</span></div><div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-orange-500"></span><span class="text-white text-xs">Das mes</span></div></div>',1))]),o.value?(w(),$("div",ff,[...k[8]||(k[8]=[s("i",{class:"las la-spinner la-spin text-2xl"},null,-1),s("span",null,"Cargando recursos del proyecto...",-1)])])):!me(n)||me(n).length===0?(w(),$("div",pf,[...k[9]||(k[9]=[s("i",{class:"las la-info-circle text-2xl"},null,-1),s("span",null,"No hay recursos asignados a este proyecto.",-1)])])):(w(),$("div",_f,[s("div",hf,[(w(),$(de,null,ye(l,D=>s("div",{key:D,class:"p-2 text-center text-sm font-semibold text-white border-r border-slate-600 last:border-r-0"},h(D),1)),64))]),(w(!0),$(de,null,ye(f.value,(D,ee)=>(w(),$("div",{key:ee,class:"grid grid-cols-7 border-t-2 border-slate-300"},[(w(!0),$(de,null,ye(D,(T,q)=>(w(),$("div",{key:q,class:le(["min-h-24 p-1 border-r-2 border-slate-300 last:border-r-0 transition-colors",{"bg-gray-50":!T,"bg-lime-50 hover:bg-lime-100 cursor-pointer":T?.hasMaintenances,"bg-white":T&&!T.hasMaintenances,"ring-2 ring-lime-500 ring-inset":T?.isToday,"bg-lime-200":a.value?.dateStr===T?.dateStr}]),onClick:E=>U(T)},[T?(w(),$(de,{key:0},[s("div",mf,[s("span",{class:le(["text-sm font-medium",{"text-lime-700":T.isToday,"text-gray-700":!T.isToday&&T.hasMaintenances,"text-gray-400":!T.hasMaintenances}])},h(T.day),3),T.hasMaintenances?(w(),$("span",gf,h(T.maintenances.length),1)):te("",!0)]),T.hasMaintenances?(w(),$("div",vf,[(w(!0),$(de,null,ye(T.maintenances.slice(0,3),(E,N)=>(w(),$("div",{key:E.resource_id,class:"flex items-center gap-1"},[s("span",{class:le(["w-2 h-2 rounded-full flex-shrink-0",K(E.frequency_type)])},null,2),s("span",yf,h(E.resource_code),1)]))),128)),T.maintenances.length>3?(w(),$("div",xf," +"+h(T.maintenances.length-3)+" ms ",1)):te("",!0)])):te("",!0)],64)):te("",!0)],10,bf))),128))]))),128))])),a.value?(w(),$("div",wf,[s("div",$f,[s("h3",Ef,[k[10]||(k[10]=s("i",{class:"las la-calendar-check text-lime-600"},null,-1)),L(" Mantenimientos del "+h(new Date(a.value.dateStr).toLocaleDateString("es-GT",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),1)]),s("button",{onClick:k[0]||(k[0]=D=>a.value=null),class:"btn btn-circle btn-sm btn-ghost"},[...k[11]||(k[11]=[s("i",{class:"las la-times"},null,-1)])])]),s("div",Cf,[s("table",Sf,[k[13]||(k[13]=s("thead",null,[s("tr",{class:"bg-lime-50"},[s("th",{class:"text-xs"},"Cdigo"),s("th",{class:"text-xs"},"Recurso"),s("th",{class:"text-xs"},"Descripcin"),s("th",{class:"text-xs"},"Frecuencia"),s("th",{class:"text-xs text-right"},"Costo")])],-1)),s("tbody",null,[(w(!0),$(de,null,ye(a.value.maintenances,D=>(w(),$("tr",{key:D.resource_id,class:"hover:bg-lime-50"},[s("td",kf,[s("span",Rf,h(D.resource_code),1)]),s("td",Af,h(D.resource_name),1),s("td",Df,h(D.description||"-"),1),s("td",Of,[s("span",{class:le(["badge badge-sm",G(D.frequency_type)])},h(Y(D)),3)]),s("td",If,h(B(D.cost)),1)]))),128))]),s("tfoot",null,[s("tr",Pf,[k[12]||(k[12]=s("td",{colspan:"4",class:"text-right text-xs"},"Total del da:",-1)),s("td",Tf,h(B(a.value.maintenances.reduce((D,ee)=>D+ee.cost,0))),1)])])])])])):te("",!0),me(n)&&me(n).length>0&&d.value.length===0?(w(),$("div",Nf,[...k[14]||(k[14]=[s("i",{class:"las la-info-circle text-2xl"},null,-1),s("span",null,"No hay mantenimientos programados para este mes.",-1)])])):te("",!0)]))}},Ff={key:0,class:"flex justify-between items-center mb-4 pb-3 border-b-2 border-blue-300"},Mf={class:"text-lg font-semibold text-gray-700"},Vf={class:"modal-content"},Ps={__name:"Modal",props:{isOpen:{type:Boolean,default:!1},title:{type:String,default:""},size:{type:String,default:"lg",validator:e=>["sm","md","lg","xl","2xl"].includes(e)}},emits:["close"],setup(e,{emit:t}){const n=t,o=()=>{n("close")},l={sm:"modal-box w-11/12 max-w-md",md:"modal-box w-11/12 max-w-2xl",lg:"modal-box w-11/12 max-w-4xl",xl:"modal-box w-11/12 max-w-6xl","2xl":"modal-box w-11/12 max-w-7xl"};return(r,a)=>(w(),$("div",{class:le(["modal",{"modal-open":e.isOpen}])},[s("div",{class:le(l[e.size])},[e.title?(w(),$("div",Ff,[s("h3",Mf,h(e.title),1),s("button",{class:"btn btn-sm btn-circle btn-ghost",onClick:o},"  ")])):te("",!0),s("div",Vf,[ui(r.$slots,"default")])],2),s("div",{class:"modal-backdrop",onClick:o})],2))}},yo=zt("resourcesStore",{state:()=>({selectedResource:null,resources:[],newResource:{id:null,code:null,name:null,type:null,type_equipment:null,type_equipment_display:null,brand:null,model:null,status_equipment:null,status_disponibility:null,current_location:null,capacity_gallons:null,is_selected:!1,is_confirm_delete:!1,is_retired:!1}}),getters:{resourcesAvailable:e=>e.resources,physicalEquipmentsNotAvailable:e=>e.resources.filter(t=>t.type_equipment!=="SERVIC"&&t.available===!1)},actions:{async fetchResourcesAvailable(){try{const e=await fetch(be.URLSourcesAvailable,{method:"GET",headers:be.headers});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();this.resources=t.data||[]}catch(e){console.error("Error fetching available resources:",e),this.resources=[]}},setSelectedResource(e){this.selectedResource=this.resources.find(t=>t.id===e)||null}}}),Uf={class:"form-control w-full relative"},Lf={key:0,class:"label"},qf={class:"label-text"},Hf=["placeholder"],Bf={key:1,class:"absolute z-10 w-full mt-1 bg-base-100 shadow-lg rounded-lg max-h-60 overflow-auto top-full"},Gf={class:"menu"},Wf=["onMousedown"],Kf={class:"hover:bg-base-200"},Jr={__name:"AutocompleteResource",props:{label:{type:String,default:"Recurso"},placeholder:{type:String,default:"Buscar recurso..."},excludeIds:{type:Array,default:()=>[]}},emits:["resource-selected"],setup(e,{emit:t}){const n=e,o=t,l=yo(),r=pe(""),a=pe(!1),i=Z(()=>{const c=l.resourcesAvailable||l.resources;return Array.isArray(c)?c:c&&typeof c=="object"?Object.values(c):[]});_t(async()=>{console.log("mounted AutocompleteResource"),await l.fetchResourcesAvailable()});const d=Z(()=>{let c=i.value;return c=c.filter(b=>b.available===!0),n.excludeIds.length>0&&(c=c.filter(b=>!n.excludeIds.includes(b.id))),r.value?c.filter(b=>(b.display_name||b.title||"").toLowerCase().includes(r.value.toLowerCase())):c}),_=()=>{a.value=!0},f=c=>{r.value="",l.setSelectedResource(c.id),a.value=!1,o("resource-selected",c)},u=()=>{setTimeout(()=>{a.value=!1},200)};return(c,b)=>(w(),$("div",Uf,[e.label?(w(),$("label",Lf,[s("span",qf,h(e.label),1)])):te("",!0),ne(s("input",{type:"text","onUpdate:modelValue":b[0]||(b[0]=A=>r.value=A),onInput:_,onFocus:b[1]||(b[1]=A=>a.value=!0),onBlur:u,placeholder:e.placeholder,class:"input input-bordered w-full"},null,40,Hf),[[he,r.value]]),a.value&&d.value.length>0?(w(),$("div",Bf,[s("ul",Gf,[(w(!0),$(de,null,ye(d.value,A=>(w(),$("li",{key:A.id,onMousedown:v=>f(A)},[s("a",Kf,h(A.display_name||A.title),1)],40,Wf))),128))])])):te("",!0)]))}},Yf={class:"space-y-4"},zf={key:0,class:"alert alert-error shadow-lg"},Qf={key:1,class:"alert alert-success shadow-lg"},Jf={key:0,class:"grid grid-cols-12 gap-4 items-center"},Xf={class:"col-span-8"},Zf={key:1,class:"grid grid-cols-12 gap-4 items-center"},ep={class:"col-span-8"},tp=["value"],sp={class:"grid grid-cols-12 gap-4 items-start"},np={class:"col-span-8"},op={class:"grid grid-cols-12 gap-4 items-center"},lp={class:"col-span-8"},rp={class:"grid grid-cols-12 gap-4 items-center"},ap={class:"col-span-8"},ip=["min"],cp={key:0,class:"label"},dp={class:"grid grid-cols-12 gap-4 items-center"},up={class:"col-span-8"},fp={class:"bg-gray-50 rounded-lg p-4 space-y-3"},pp={class:"grid grid-cols-12 gap-4 items-center"},_p={class:"col-span-8"},hp=["value"],bp={key:0,class:"label"},mp={key:0,class:"grid grid-cols-12 gap-4 items-center"},gp={class:"col-span-8"},vp={class:"label"},yp={class:"label-text-alt text-info"},xp={key:1,class:"grid grid-cols-12 gap-4 items-start"},wp={class:"col-span-8"},$p={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-2"},Ep=["onClick"],Cp={class:"hidden sm:inline"},Sp={class:"sm:hidden"},kp={class:"label"},Rp={class:"label-text-alt text-info"},Ap={key:2,class:"grid grid-cols-12 gap-4 items-start"},Dp={class:"col-span-8"},Op={class:"grid grid-cols-7 sm:grid-cols-10 gap-2"},Ip=["onClick"],Pp={class:"label"},Tp={class:"label-text-alt text-info"},Np={class:"flex justify-between items-center pt-4"},jp=["disabled"],Fp={class:"flex gap-3"},Mp=["disabled"],Vp=["disabled"],Up={key:0,class:"loading loading-spinner loading-sm"},Lp={key:1},qp={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Hp={class:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4"},Bp={class:"space-y-4"},Gp=["disabled"],Wp={class:"flex justify-end gap-3"},Kp=["disabled"],Yp=["disabled"],zp={key:0,class:"loading loading-spinner loading-sm"},Qp={key:1},Jp={__name:"ResourceForm",props:{resource:{type:Object,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,o=t,l=ds(),r=yo(),a=Fe(),i=pe(!1),d=pe(""),_=pe(""),f=pe(!1),u=pe(""),c=pe(!1),b=pe(!1),A=[{value:"DAY",label:"Por intervalo de das"},{value:"WEEK",label:"Das de la semana"},{value:"MONTH",label:"Das del mes"}],v=[{value:0,label:"Lunes"},{value:1,label:"Martes"},{value:2,label:"Mircoles"},{value:3,label:"Jueves"},{value:4,label:"Viernes"},{value:5,label:"Sbado"},{value:6,label:"Domingo"}],x=pe({id:null,resource_id:null,resource_display_name:"",detailed_description:"",type_resource:"SERVICIO",cost:0,frequency_type:"MONTH",interval_days:3,weekdays:[],monthdays:[],operation_start_date:null,operation_end_date:null,is_retired:!1}),U=Z(()=>!!n.resource),B=Z(()=>x.value.type_resource==="EQUIPO"),K=Z(()=>B.value?A.filter(j=>j.value==="DAY"):A),G=Z(()=>U.value?l.resources.filter(j=>j.id!==n.resource?.id&&j.type_resource==="EQUIPO").map(j=>j.resource_id):l.resources.filter(j=>j.type_resource==="EQUIPO").map(j=>j.resource_id));Pe(()=>n.resource,j=>{j&&(x.value={id:j.id,resource_id:j.resource_id,resource_display_name:j.resource_display_name||j.detailed_description,detailed_description:j.detailed_description,type_resource:j.type_resource,cost:j.cost||0,frequency_type:j.type_resource==="EQUIPO"?"DAY":j.frequency_type||"DAY",interval_days:j.type_resource==="EQUIPO"?1:j.interval_days||3,weekdays:j.type_resource==="EQUIPO"?[]:j.weekdays||[],monthdays:j.type_resource==="EQUIPO"?[]:j.monthdays||[],operation_start_date:j.operation_start_date,operation_end_date:j.operation_end_date,is_retired:j.is_retired||!1})},{immediate:!0}),Pe(()=>x.value.cost,j=>{x.value.type_resource==="EQUIPO"&&x.value.frequency_type!=="DAY"&&(x.value.frequency_type="DAY",x.value.interval_days=1,x.value.weekdays=[],x.value.monthdays=[])});const Y=()=>{const j=r.selectedResource;j&&(x.value.resource_id=j.id,x.value.resource_display_name=j.display_name,x.value.detailed_description=j.display_name,x.value.type_resource=j.type_equipment==="SERVIC"?"SERVICIO":"EQUIPO",x.value.type_resource==="EQUIPO"?(x.value.frequency_type="DAY",x.value.interval_days=1,x.value.weekdays=[],x.value.monthdays=[]):(x.value.frequency_type="MONTH",x.value.interval_days=3,x.value.weekdays=[],x.value.monthdays=[]))};Pe(()=>x.value.operation_start_date,j=>{x.value.type_resource==="EQUIPO"&&(x.value.frequency_type="DAY",x.value.interval_days=1,x.value.weekdays=[],x.value.monthdays=[])}),Pe(()=>x.value.type_resource,j=>{j==="EQUIPO"&&(x.value.frequency_type="DAY",x.value.interval_days=1,x.value.weekdays=[],x.value.monthdays=[])});const y=()=>{x.value.frequency_type==="DAY"?(x.value.interval_days=x.value.interval_days||3,x.value.weekdays=[],x.value.monthdays=[]):x.value.frequency_type==="WEEK"?(x.value.interval_days=0,x.value.weekdays=x.value.weekdays||[],x.value.monthdays=[]):x.value.frequency_type==="MONTH"&&(x.value.interval_days=0,x.value.weekdays=[],x.value.monthdays=x.value.monthdays||[])},k=j=>{const F=x.value.weekdays.indexOf(j);F===-1?x.value.weekdays.push(j):x.value.weekdays.splice(F,1)},D=j=>{const F=x.value.monthdays.indexOf(j);F===-1?x.value.monthdays.push(j):x.value.monthdays.splice(F,1)},ee=()=>!U.value&&!x.value.resource_id?(d.value="Debe seleccionar un recurso",!1):x.value.operation_start_date?x.value.frequency_type==="DAY"&&(!x.value.interval_days||x.value.interval_days<1)?(d.value="El intervalo de das debe ser mayor a 0",!1):x.value.frequency_type==="WEEK"&&(!x.value.weekdays||x.value.weekdays.length===0)?(d.value="Debe seleccionar al menos un da de la semana",!1):x.value.frequency_type==="MONTH"&&(!x.value.monthdays||x.value.monthdays.length===0)?(d.value="Debe seleccionar al menos un da del mes",!1):!0:(d.value="Debe ingresar la fecha de inicio de operaciones",!1),T=async()=>{if(d.value="",_.value="",!!ee()){i.value=!0;try{const j={...x.value,interval_days:x.value.frequency_type==="DAY"?x.value.interval_days:0,weekdays:x.value.frequency_type==="WEEK"?x.value.weekdays:null,monthdays:x.value.frequency_type==="MONTH"?x.value.monthdays:null};if(U.value){await l.updateResourceProject(j),o("close");return}else await l.addResourcesToProject([j]),_.value="Recurso agregado exitosamente";setTimeout(()=>{o("close")},1500)}catch(j){console.error("Error al guardar recurso:",j),d.value=j.message||"Error al guardar el recurso"}finally{i.value=!1}}},q=()=>{b.value?N():(d.value="",b.value=!0)},E=()=>{f.value=!1,u.value="",b.value=!1},N=async()=>{c.value=!0,d.value="";try{const j={id:x.value.id,operation_start_date:x.value.operation_start_date,operation_end_date:x.value.operation_end_date};await l.updateResourceProject(j),await l.releaseResourceProject(x.value.id),l.fetchResourcesProject(),o("close");return}catch(j){console.error("Error al liberar recurso:",j),d.value=j.message||"Error al liberar el recurso",b.value=!1}finally{c.value=!1}};return _t(()=>{U.value||(x.value.operation_start_date=a.project?.start_date||null)}),(j,F)=>(w(),$("div",Yf,[d.value?(w(),$("div",zf,[s("div",null,[F[9]||(F[9]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("span",null,h(d.value),1)]),s("button",{onClick:F[0]||(F[0]=se=>d.value=""),class:"btn btn-sm btn-ghost"},[...F[10]||(F[10]=[s("i",{class:"las la-times"},null,-1)])])])):te("",!0),_.value?(w(),$("div",Qf,[s("div",null,[F[11]||(F[11]=s("i",{class:"las la-check-circle text-2xl"},null,-1)),s("span",null,h(_.value),1)])])):te("",!0),s("form",{onSubmit:Os(T,["prevent"]),class:"space-y-3"},[U.value?(w(),$("div",Zf,[F[13]||(F[13]=s("label",{class:"col-span-4 text-right font-semibold"}," Recurso ",-1)),s("div",ep,[s("input",{type:"text",class:"input input-bordered bg-gray-100 w-full",value:x.value.resource_display_name,disabled:""},null,8,tp)])])):(w(),$("div",Jf,[F[12]||(F[12]=s("label",{class:"col-span-4 text-right font-semibold"},[L(" Seleccionar Recurso "),s("span",{class:"text-error"},"*")],-1)),s("div",Xf,[Ce(Jr,{placeholder:"Buscar recurso disponible...",excludeIds:G.value,onResourceSelected:Y},null,8,["excludeIds"])])])),s("div",sp,[F[14]||(F[14]=s("label",{class:"col-span-4 text-right font-semibold pt-3"}," Descripcin Detallada ",-1)),s("div",np,[ne(s("textarea",{class:"textarea textarea-bordered h-20 w-full","onUpdate:modelValue":F[1]||(F[1]=se=>x.value.detailed_description=se),placeholder:"Ingrese detalles adicionales del recurso..."},null,512),[[he,x.value.detailed_description]])])]),s("div",op,[F[15]||(F[15]=s("label",{class:"col-span-4 text-right font-semibold"},[L(" Fecha Inicio Operaciones "),s("span",{class:"text-error"},"*")],-1)),s("div",lp,[ne(s("input",{type:"date",class:"input input-bordered w-full","onUpdate:modelValue":F[2]||(F[2]=se=>x.value.operation_start_date=se),required:""},null,512),[[he,x.value.operation_start_date]])])]),s("div",rp,[F[16]||(F[16]=s("label",{class:"col-span-4 text-right font-semibold"}," Fecha Fin Operaciones ",-1)),s("div",ap,[ne(s("input",{type:"date",class:"input input-bordered w-full","onUpdate:modelValue":F[3]||(F[3]=se=>x.value.operation_end_date=se),min:x.value.operation_start_date},null,8,ip),[[he,x.value.operation_end_date]]),x.value.operation_end_date&&x.value.operation_start_date?(w(),$("div",cp,[s("span",{class:le(["label-text-alt",new Date(x.value.operation_end_date)<=new Date(x.value.operation_start_date)?"text-error":"text-success"])},[s("i",{class:le(new Date(x.value.operation_end_date)<=new Date(x.value.operation_start_date)?"las la-times-circle":"las la-check-circle")},null,2),L(" "+h(new Date(x.value.operation_end_date)<=new Date(x.value.operation_start_date)?"La fecha de fin debe ser mayor a la de inicio":"Rango de fechas vlido"),1)],2)])):te("",!0)])]),s("div",dp,[F[17]||(F[17]=s("label",{class:"col-span-4 text-right font-semibold"}," Costo ",-1)),s("div",up,[ne(s("input",{type:"number",step:"0.01",min:"0",class:"input input-bordered text-right w-full","onUpdate:modelValue":F[4]||(F[4]=se=>x.value.cost=se),placeholder:"0.00"},null,512),[[he,x.value.cost]])])]),F[26]||(F[26]=s("div",{class:"divider"},"Configuracin de Intervalos",-1)),s("div",fp,[s("div",pp,[F[19]||(F[19]=s("label",{class:"col-span-4 text-right font-semibold"},[L(" Tipo de Frecuencia "),s("span",{class:"text-error"},"*")],-1)),s("div",_p,[ne(s("select",{class:"select select-bordered w-full","onUpdate:modelValue":F[5]||(F[5]=se=>x.value.frequency_type=se),onChange:y},[(w(!0),$(de,null,ye(K.value,se=>(w(),$("option",{key:se.value,value:se.value},h(se.label),9,hp))),128))],544),[[wt,x.value.frequency_type]]),B.value?(w(),$("div",bp,[...F[18]||(F[18]=[s("span",{class:"label-text-alt text-info"},[s("i",{class:"las la-info-circle"}),L(" Los equipos siempre operan con frecuencia diaria ")],-1)])])):te("",!0)])]),x.value.frequency_type==="DAY"?(w(),$("div",mp,[F[21]||(F[21]=s("label",{class:"col-span-4 text-right font-semibold"},[L(" Intervalo en das "),s("span",{class:"text-error"},"*")],-1)),s("div",gp,[ne(s("input",{type:"number",min:"1",class:"input input-bordered w-full","onUpdate:modelValue":F[6]||(F[6]=se=>x.value.interval_days=se),placeholder:"Ej: 3",required:""},null,512),[[he,x.value.interval_days]]),s("div",vp,[s("span",yp,[F[20]||(F[20]=s("i",{class:"las la-info-circle"},null,-1)),L(" Frecuencia cada "+h(x.value.interval_days||0)+" da(s) ",1)])])])])):x.value.frequency_type==="WEEK"?(w(),$("div",xp,[F[23]||(F[23]=s("label",{class:"col-span-4 text-right font-semibold pt-2"},[L(" Das de la semana "),s("span",{class:"text-error"},"*")],-1)),s("div",wp,[s("div",$p,[(w(),$(de,null,ye(v,se=>s("button",{key:se.value,type:"button",class:le(["btn btn-sm",x.value.weekdays.includes(se.value)?"btn-primary":"btn-outline"]),onClick:ie=>k(se.value)},[s("span",Cp,h(se.label),1),s("span",Sp,h(se.label.substring(0,3)),1)],10,Ep)),64))]),s("div",kp,[s("span",Rp,[F[22]||(F[22]=s("i",{class:"las la-info-circle"},null,-1)),L(" "+h(x.value.weekdays.length)+" da(s) seleccionado(s) ",1)])])])])):x.value.frequency_type==="MONTH"?(w(),$("div",Ap,[F[25]||(F[25]=s("label",{class:"col-span-4 text-right font-semibold pt-2"},[L(" Das del mes "),s("span",{class:"text-error"},"*")],-1)),s("div",Dp,[s("div",Op,[(w(),$(de,null,ye(31,se=>s("button",{key:se,type:"button",class:le(["btn btn-sm",x.value.monthdays.includes(se)?"btn-primary":"btn-outline"]),onClick:ie=>D(se)},h(se),11,Ip)),64))]),s("div",Pp,[s("span",Tp,[F[24]||(F[24]=s("i",{class:"las la-info-circle"},null,-1)),L(" "+h(x.value.monthdays.length)+" da(s) seleccionado(s) ",1)])])])])):te("",!0)]),s("div",Np,[s("div",null,[U.value&&!x.value.is_retired&&x.value.operation_end_date?(w(),$("button",{key:0,type:"button",class:le(b.value?"btn btn-error btn-sm":"btn btn-warning btn-sm"),onClick:q,disabled:i.value||c.value},[s("i",{class:le(b.value?"las la-exclamation-triangle":"las la-hand-paper")},null,2),L(" "+h(b.value?"CONFIRMAR LIBERACIN":"Liberar Recurso"),1)],10,jp)):te("",!0)]),s("div",Fp,[s("button",{type:"button",class:"btn btn-ghost",onClick:F[7]||(F[7]=se=>o("close")),disabled:i.value||c.value}," Cancelar ",8,Mp),s("button",{type:"submit",class:"btn btn-primary",disabled:i.value||c.value},[i.value?(w(),$("span",Up)):(w(),$("span",Lp,h(U.value?"Actualizar":"Guardar"),1))],8,Vp)])])],32),f.value?(w(),$("div",qp,[s("div",Hp,[F[30]||(F[30]=s("h3",{class:"text-lg font-semibold mb-4 text-warning"},[s("i",{class:"las la-exclamation-triangle"}),L(" Confirmar Liberacin de Equipo ")],-1)),s("div",Bp,[F[29]||(F[29]=s("p",{class:"text-sm text-gray-600"}," Est seguro que desea liberar este equipo del proyecto? ",-1)),s("div",null,[F[27]||(F[27]=s("label",{class:"block text-sm font-semibold mb-2"},[L(" Motivo de liberacin "),s("span",{class:"text-error"},"*")],-1)),ne(s("textarea",{class:"textarea textarea-bordered w-full h-24","onUpdate:modelValue":F[8]||(F[8]=se=>u.value=se),placeholder:"Ingrese el motivo por el cual se libera el equipo...",disabled:c.value},null,8,Gp),[[he,u.value]])]),s("div",Wp,[s("button",{type:"button",class:"btn btn-ghost btn-sm",onClick:E,disabled:c.value}," Cancelar ",8,Kp),s("button",{type:"button",class:"btn btn-warning btn-sm",onClick:N,disabled:c.value},[c.value?(w(),$("span",zp)):(w(),$("span",Qp,[...F[28]||(F[28]=[s("i",{class:"las la-check"},null,-1),L(" Confirmar Liberacin ",-1)])]))],8,Yp)])])])])):te("",!0)]))}},Xp={id:"project-app",class:"w-[90%] mx-auto p-4 bg-white rounded-2xl shadow-md border border-blue-300 border-t-[15px] border-t-blue-300"},Zp={class:"flex justify-between items-center border-b-blue-500 border-b pb-1 mb-3"},e_={class:"text-xl font-semibold text-blue-500"},t_={class:"flex items-center gap-3"},s_={class:"text-gray-500"},n_={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},o_={class:"space-y-1"},l_={class:"flex items-center gap-2 py-0.5"},r_={class:"font-semibold text-xs"},a_={class:"flex items-center gap-2 py-0.5"},i_={class:"font-semibold text-xs"},c_={key:0,class:"badge badge-info ml-1"},d_={class:"space-y-1"},u_={class:"flex items-center gap-2 py-0.5"},f_={class:"font-semibold text-xs"},p_={class:"flex items-center gap-2 py-0.5"},__={key:0,class:"font-semibold text-xs"},h_={key:1,class:"text-success font-bold text-xs"},b_={class:"space-y-1"},m_={class:"flex items-center gap-2 py-0.5"},g_={class:"font-semibold text-xs"},v_={class:"flex items-center gap-2 py-0.5"},y_={class:"font-semibold text-xs"},x_={role:"tablist",class:"tabs tabs-lifted bg-base-100 p-1"},w_={role:"tabpanel",class:"tab-content bg-base-100 rounded-box p-4"},$_={role:"tabpanel",class:"tab-content bg-base-100 rounded-box p-4"},E_={role:"tabpanel",class:"tab-content bg-base-100 rounded-box p-4"},C_={__name:"ProjectsView",setup(e){const t=Fe(),n=ds(),o=Z(()=>t.project),l=pe(!1),r=pe(""),a=pe(null),i=pe(null),d=f=>{r.value="Editar Recurso del Proyecto",a.value="ResourceForm",i.value=f,l.value=!0},_=()=>{l.value=!1,a.value=null,r.value="",i.value=null};return _t(()=>{t.fetchProjectData(),n.fetchResourcesProject()}),(f,u)=>(w(),$("div",null,[s("div",Xp,[s("div",Zp,[s("h1",e_," Ficha de Proyecto #"+h(o.value?.id||"N/A"),1),s("div",t_,[s("div",s_,[s("span",{class:le(["badge",o.value?.is_closed?"badge-error":"badge-success"])},h(o.value?.is_closed?"Cerrado":"Abierto"),3)])])]),s("div",n_,[s("div",o_,[s("div",l_,[u[0]||(u[0]=s("i",{class:"las la-building text-blue-500 text-sm"},null,-1)),u[1]||(u[1]=s("span",{class:"text-xs text-gray-500"},"Cliente:",-1)),s("span",r_,h(o.value?.partner_name||"N/A"),1)]),s("div",a_,[u[2]||(u[2]=s("i",{class:"las la-map-marker text-blue-500 text-sm"},null,-1)),u[3]||(u[3]=s("span",{class:"text-xs text-gray-500"},"Campamento:",-1)),s("span",i_,[L(h(o.value?.location||"N/A")+" ",1),o.value?.location&&o.value?.cardinal_point?(w(),$("span",c_,h(o.value?.cardinal_point?` ${o.value.cardinal_point}`:""),1)):te("",!0)])])]),s("div",d_,[s("div",u_,[u[4]||(u[4]=s("i",{class:"las la-calendar-check text-blue-500 text-sm"},null,-1)),u[5]||(u[5]=s("span",{class:"text-xs text-gray-500"},"Inicio:",-1)),s("span",f_,h(me(nn)(o.value?.start_date)),1)]),s("div",p_,[u[6]||(u[6]=s("i",{class:"las la-calendar-times text-blue-500 text-sm"},null,-1)),u[7]||(u[7]=s("span",{class:"text-xs text-gray-500"},"Fin:",-1)),o.value?.end_date?(w(),$("span",__,h(me(nn)(o.value?.end_date)),1)):(w(),$("span",h_,"EN CURSO"))])]),s("div",b_,[s("div",m_,[u[8]||(u[8]=s("i",{class:"las la-user text-blue-500 text-sm"},null,-1)),u[9]||(u[9]=s("span",{class:"text-xs text-gray-500"},"Contacto:",-1)),s("span",g_,h(o.value?.contact_name||"N/A"),1)]),s("div",v_,[u[10]||(u[10]=s("i",{class:"las la-phone text-blue-500 text-sm"},null,-1)),u[11]||(u[11]=s("span",{class:"text-xs text-gray-500"},"Telfono:",-1)),s("span",y_,h(o.value?.contact_phone||"N/A"),1)])])]),s("div",x_,[u[12]||(u[12]=s("input",{type:"radio",name:"project_tabs",role:"tab",class:"tab bg-amber-500 text-white font-semibold border-s-gray-50 border-s-2","aria-label":"Recursos Asignados",checked:""},null,-1)),s("div",w_,[Ce(xu,{onEditResource:d})]),u[13]||(u[13]=s("input",{type:"radio",name:"project_tabs",role:"tab",class:"tab bg-cyan-500 text-white font-semibold border-s-gray-50 border-s-2","aria-label":"Planillas de Trabajo"},null,-1)),s("div",$_,[Ce(Wu)]),u[14]||(u[14]=s("input",{type:"radio",name:"project_tabs",role:"tab",class:"tab bg-lime-500 text-white font-semibold border-s-gray-50 border-s-2","aria-label":"Calendario Mantenimientos"},null,-1)),s("div",E_,[Ce(jf)])]),u[15]||(u[15]=s("div",{class:"mt-8 bg-white border-t border-gray-200 shadow-md rounded-b-xl flex justify-end gap-3 px-4 py-3"},[s("a",{href:"/projects/",class:"btn btn-primary btn-sm"},[s("i",{class:"las la-times"}),L(" Volver A Proyectos ")])],-1))]),Ce(Ps,{"is-open":l.value,title:r.value,size:"lg",onClose:_},{default:kt(()=>[a.value==="ResourceForm"?(w(),At(Jp,{key:0,resource:i.value,onClose:_},null,8,["resource"])):te("",!0)]),_:1},8,["is-open","title"])]))}},S_={class:"container mx-auto p-4"},k_={key:0,class:"alert alert-error shadow-lg mb-4"},R_={key:1,class:"alert alert-success shadow-lg mb-4"},A_={class:"card-body space-y-4"},D_={class:"flex gap-4"},O_={class:"form-control w-full"},I_={class:"mt-2 mb-2"},P_={class:"table table-zebra w-full"},T_={class:"border border-gray-300"},N_={class:"border border-gray-300"},j_={class:"border border-gray-300"},F_={class:"border border-gray-300"},M_=["onUpdate:modelValue"],V_=["value"],U_={key:1,class:"text-gray-400 text-sm"},L_={class:"border border-gray-300"},q_=["onUpdate:modelValue"],H_={class:"border border-gray-300"},B_=["onUpdate:modelValue","onFocus"],G_={key:1,class:"text-gray-400 text-sm"},W_={class:"border border-gray-300"},K_={key:0,class:"text-sm font-medium text-gray-600"},Y_={key:1,class:"text-gray-400 text-sm"},z_={class:"border border-gray-300 text-center"},Q_=["onUpdate:modelValue","disabled","onChange"],J_={class:"border border-gray-300"},X_={key:0,class:"space-y-2"},Z_=["onUpdate:modelValue","onChange"],eh=["value"],th={key:0},sh=["onUpdate:modelValue"],nh={key:1,class:"flex flex-wrap gap-1"},oh=["onClick"],lh={key:2,class:"grid grid-cols-7 gap-1"},rh=["onClick"],ah={key:1,class:"text-gray-400 text-sm"},ih={class:"border border-gray-300"},ch=["onUpdate:modelValue","onFocus","disabled"],dh={class:"border border-gray-300 text-center"},uh=["onClick","disabled"],fh={key:0},ph={class:"flex flex-col-reverse sm:flex-row gap-3 sm:justify-end"},_h=["disabled"],hh={key:0,class:"loading loading-spinner loading-sm"},bh={key:1},mh={__name:"ResourceItemsForm",setup(e){const t=yo(),n=ds(),o=Fe(),l=cs(),r=pe([]),a=pe(!1),i=pe(""),d=pe(""),_=Z(()=>t.physicalEquipmentsNotAvailable||[]),f=Z(()=>r.value.filter(y=>y.resource?.type_equipment_display!=="SERVICIO").map(y=>y.resource_id)),u=[{value:"DAY",label:"Por intervalo de das"},{value:"WEEK",label:"Das de la semana"},{value:"MONTH",label:"Das del mes"}],c=[{value:0,label:"Lunes"},{value:1,label:"Martes"},{value:2,label:"Mircoles"},{value:3,label:"Jueves"},{value:4,label:"Viernes"},{value:5,label:"Sbado"},{value:6,label:"Domingo"}],b=async()=>{const y=t.selectedResource,k=y.type_equipment==="SERVIC";if(!k&&t.resources&&Array.isArray(t.resources)){const ee=t.resources.find(T=>T.id===y.id);ee&&(ee.is_selected=!0)}const D={resource:y,resource_id:y.id,resource_display_name:y.display_name,detailed_description:y.display_name,frequency_type:"DAY",interval_days:k?3:1,weekdays:[],monthdays:[],cost:0,maintenance_cost:0,operation_start_date:o.project?.start_date||null,include_maintenance:k,physical_equipment_code:null,maintenance_frequency_type:"DAY",maintenance_interval_days:3,maintenance_weekdays:[],maintenance_monthdays:[]};r.value.push(D),t.selectedResource=null},A=y=>{const k=r.value[y];if(k.resource?.type_equipment_display!=="SERVICIO"&&t.resources&&Array.isArray(t.resources)){const D=t.resources.find(ee=>ee.id===k.resource_id);D&&(D.is_selected=!1)}r.value.splice(y,1)},v=async()=>{i.value="",d.value="",a.value=!0;try{if(r.value.filter(D=>!D.operation_start_date).length>0){i.value="Todos los recursos deben tener una fecha de inicio de operaciones",a.value=!1;return}const k=await n.addResourcesToProject(r.value);d.value=`Se agregaron ${k.added} recurso(s) exitosamente`,l.push("/project")}catch(y){console.error("Error submitting form:",y),i.value=y.message||"Error al guardar los recursos. Por favor intente nuevamente."}finally{a.value=!1}},x=(y,k)=>{if(!y.include_maintenance)y.maintenance_cost=0,y.maintenance_frequency_type="DAY",y.maintenance_interval_days=0,y.maintenance_weekdays=[],y.maintenance_monthdays=[];else{y.maintenance_frequency_type=y.maintenance_frequency_type||"DAY",(!y.maintenance_interval_days||y.maintenance_interval_days===0)&&(y.maintenance_interval_days=3);const T=k.target.closest("tr").querySelector('input[data-input="maintenance-interval"]');T&&setTimeout(()=>{T.focus(),T.select()},50)}},U=y=>{y.maintenance_frequency_type==="DAY"?((!y.maintenance_interval_days||y.maintenance_interval_days===0)&&(y.maintenance_interval_days=3),y.maintenance_weekdays=[],y.maintenance_monthdays=[]):y.maintenance_frequency_type==="WEEK"?(y.maintenance_interval_days=0,y.maintenance_weekdays=y.maintenance_weekdays||[],y.maintenance_monthdays=[]):y.maintenance_frequency_type==="MONTH"&&(y.maintenance_interval_days=0,y.maintenance_weekdays=[],y.maintenance_monthdays=y.maintenance_monthdays||[])},B=(y,k)=>{y.maintenance_weekdays||(y.maintenance_weekdays=[]);const D=y.maintenance_weekdays.indexOf(k);D===-1?y.maintenance_weekdays.push(k):y.maintenance_weekdays.splice(D,1)},K=(y,k)=>{y.maintenance_monthdays||(y.maintenance_monthdays=[]);const D=y.maintenance_monthdays.indexOf(k);D===-1?y.maintenance_monthdays.push(k):y.maintenance_monthdays.splice(D,1)},G=y=>{y.cost===0&&(y.cost=null)},Y=y=>{y.maintenance_cost===0&&(y.maintenance_cost=null)};return _t(async()=>{await t.fetchResourcesAvailable()}),(y,k)=>(w(),$("div",S_,[i.value?(w(),$("div",k_,[s("div",null,[k[1]||(k[1]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("span",null,h(i.value),1)]),s("button",{onClick:k[0]||(k[0]=D=>i.value=""),class:"btn btn-sm btn-ghost"},[...k[2]||(k[2]=[s("i",{class:"las la-times"},null,-1)])])])):te("",!0),d.value?(w(),$("div",R_,[s("div",null,[k[3]||(k[3]=s("i",{class:"las la-check-circle text-2xl"},null,-1)),s("span",null,h(d.value),1)])])):te("",!0),s("form",{class:"card bg-base-100 shadow-xl border border-gray-200 rounded-lg",onSubmit:Os(v,["prevent"])},[s("div",A_,[s("div",D_,[s("div",O_,[k[4]||(k[4]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Seleccionar Recurso *")],-1)),Ce(Jr,{placeholder:"Buscar recurso disponible...",excludeIds:f.value,onResourceSelected:b},null,8,["excludeIds"])])]),s("div",I_,[s("table",P_,[k[8]||(k[8]=s("thead",null,[s("tr",{class:"bg-lime-800 text-white border border-green-500 text-center uppercase text-xs"},[s("th",{class:"border"},"#"),s("th",{class:"border"},"Detalle"),s("th",{class:"border"},"Tipo"),s("th",{class:"border"},"Equipo Fsico"),s("th",{class:"border"},"Fecha Inicio *"),s("th",{class:"border"},"Costo Alq"),s("th",{class:"border"},"Frec. Alquiler"),s("th",{class:"border"},"Mant"),s("th",{class:"border"},"Frec. Mant"),s("th",{class:"border"},"Costo Mnt"),s("th",{class:"border"},"Acciones")])],-1)),s("tbody",null,[(w(!0),$(de,null,ye(r.value,(D,ee)=>(w(),$("tr",{key:ee},[s("td",T_,h(ee+1),1),s("td",N_,h(D.resource_display_name||D.detailed_description),1),s("td",j_,h(D.resource?.type_equipment_display==="SERVICIO"?"SERVICIO":"EQUIPO"),1),s("td",F_,[D.resource?.type_equipment==="SERVIC"?ne((w(),$("select",{key:0,class:"select select-sm select-bordered w-full","onUpdate:modelValue":T=>D.physical_equipment_code=T},[k[5]||(k[5]=s("option",{value:null},"Sin equipo asignado",-1)),(w(!0),$(de,null,ye(_.value,T=>(w(),$("option",{key:T.id,value:T.id},h(T.code)+" - "+h(T.type_equipment_display),9,V_))),128))],8,M_)),[[wt,D.physical_equipment_code]]):(w(),$("span",U_,"-"))]),s("td",L_,[ne(s("input",{type:"date",class:le(["input input-sm input-bordered w-full",{"input-error":!D.operation_start_date}]),"onUpdate:modelValue":T=>D.operation_start_date=T,required:""},null,10,q_),[[he,D.operation_start_date]])]),s("td",H_,[D.resource?.type_equipment_display!=="SERVICIO"?ne((w(),$("input",{key:0,type:"number",step:"0.01",min:"0",class:"input input-sm input-bordered w-full text-end","onUpdate:modelValue":T=>D.cost=T,onFocus:T=>G(D),placeholder:"0.00"},null,40,B_)),[[he,D.cost]]):(w(),$("span",G_,"N/A"))]),s("td",W_,[D.resource?.type_equipment_display!=="SERVICIO"?(w(),$("span",K_," Diario ")):(w(),$("span",Y_,"N/A"))]),s("td",z_,[ne(s("input",{type:"checkbox",class:"checkbox checkbox-sm","onUpdate:modelValue":T=>D.include_maintenance=T,disabled:D.resource?.type_equipment_display==="SERVICIO",onChange:T=>x(D,T)},null,40,Q_),[[Bt,D.include_maintenance]])]),s("td",J_,[D.include_maintenance?(w(),$("div",X_,[ne(s("select",{class:"select select-sm select-bordered w-full","onUpdate:modelValue":T=>D.maintenance_frequency_type=T,onChange:T=>U(D)},[(w(),$(de,null,ye(u,T=>s("option",{key:T.value,value:T.value},h(T.label),9,eh)),64))],40,Z_),[[wt,D.maintenance_frequency_type]]),D.maintenance_frequency_type==="DAY"?(w(),$("div",th,[ne(s("input",{type:"number",min:"1",class:"input input-sm input-bordered w-full","onUpdate:modelValue":T=>D.maintenance_interval_days=T,"data-input":"maintenance-interval",placeholder:"Das"},null,8,sh),[[he,D.maintenance_interval_days]])])):D.maintenance_frequency_type==="WEEK"?(w(),$("div",nh,[(w(),$(de,null,ye(c,T=>s("button",{key:T.value,type:"button",class:le(["btn btn-xs",D.maintenance_weekdays?.includes(T.value)?"btn-primary":"btn-outline"]),onClick:q=>B(D,T.value)},h(T.label.substring(0,3)),11,oh)),64))])):D.maintenance_frequency_type==="MONTH"?(w(),$("div",lh,[(w(),$(de,null,ye(31,T=>s("button",{key:T,type:"button",class:le(["btn btn-xs",D.maintenance_monthdays?.includes(T)?"btn-primary":"btn-outline"]),onClick:q=>K(D,T)},h(T),11,rh)),64))])):te("",!0)])):(w(),$("span",ah,"-"))]),s("td",ih,[ne(s("input",{type:"number",step:"0.01",min:"0",class:"input input-sm input-bordered w-full text-end","onUpdate:modelValue":T=>D.maintenance_cost=T,onFocus:T=>Y(D),placeholder:"0.00",disabled:!D.include_maintenance},null,40,ch),[[he,D.maintenance_cost]])]),s("td",dh,[s("button",{type:"button",class:"btn btn-sm btn-error",onClick:T=>A(ee),disabled:a.value},[...k[6]||(k[6]=[s("i",{class:"las la-trash text-lg"},null,-1)])],8,uh)])]))),128)),r.value.length===0?(w(),$("tr",fh,[...k[7]||(k[7]=[s("td",{colspan:"11",class:"text-center py-4 text-gray-500"}," No hay recursos agregados. Seleccione un recurso del autocomplete. ",-1)])])):te("",!0)])])]),k[10]||(k[10]=s("div",{class:"divider"},null,-1)),s("div",ph,[Ce(me(vn),{to:"/project",class:le(["btn btn-ghost",{"btn-disabled":a.value}])},{default:kt(()=>[...k[9]||(k[9]=[L(" Cancelar ",-1)])]),_:1},8,["class"]),s("button",{type:"submit",class:"btn btn-primary",disabled:r.value.length===0||a.value},[a.value?(w(),$("span",hh)):(w(),$("span",bh,"Guardar Recursos ("+h(r.value.length)+")",1))],8,_h)])])],32)]))}},Xr=zt("technicalStore",{state:()=>({technical:{},technicals:[]}),actions:{async fetchTechnicalsAvailable(){console.log("Fetching available technicals...");try{const e=await fetch(be.URLTechnicalsAvailable,{method:"GET",headers:be.headers});if(!e.ok)throw new Error("Failed to fetch technicals");const t=await e.json();this.technicals=t.data}catch(e){console.error("Error fetching technicals:",e)}}}}),Zr=zt("vehicleStore",{state:()=>({vehicle:{},vehicles:[]}),actions:{async fetchVehicles(){console.log("Fetching available vehicles...");try{const e=await fetch(be.URLVehiclesAvailable,{method:"GET",headers:be.headers});if(!e.ok)throw new Error("Failed to fetch vehicles");const t=await e.json();this.vehicles=t.data}catch(e){console.error("Error fetching vehicles:",e)}}}}),gh={key:0,class:"max-w-4xl mx-auto p-1"},vh={class:"text-xl font-bold mb-6"},yh={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},xh={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},wh={class:"border-b-1 border-r-1 border-sky-200"},$h={class:"ml-2"},Eh={class:"border-b-1 border-r-1 border-sky-200"},Ch={class:"ml-2"},Sh={class:"border-b-1 border-r-1 border-sky-200"},kh={class:"ml-2"},Rh={class:"border-b-1 border-r-1 border-sky-200"},Ah={class:"ml-2 font-mono"},Dh={class:"border-b-1 border-r-1 border-sky-200"},Oh={class:"ml-2 text-blue-600"},Ih={class:"border-b-1 border-r-1 border-sky-200"},Ph={class:"ml-2"},Th={class:"border-b-1 border-r-1 border-sky-200"},Nh={class:"ml-2"},jh={class:"border-b-1 border-r-1 border-sky-200"},Fh={class:"ml-2"},Mh={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},Vh={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},Uh={class:"border-b-1 border-r-1 border-sky-200"},Lh={class:"ml-2"},qh={class:"border-b-1 border-r-1 border-sky-200"},Hh={class:"border-b-1 border-r-1 border-sky-200"},Bh={class:"border-b-1 border-r-1 border-sky-200"},Gh={class:"ml-2 font-mono text-xs"},Wh={class:"border-b-1 border-r-1 border-sky-200"},Kh={class:"ml-2"},Yh={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},zh={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},Qh={class:"border-b-1 border-r-1 border-sky-200"},Jh={class:"ml-2"},Xh={class:"border-b-1 border-r-1 border-sky-200"},Zh={class:"ml-2"},eb={class:"border-b-1 border-r-1 border-sky-200"},tb={class:"ml-2"},sb={class:"border-b-1 border-r-1 border-sky-200"},nb={class:"ml-2"},ob={class:"border-b-1 border-r-1 border-sky-200"},lb={class:"ml-2"},rb={class:"border-b-1 border-r-1 border-sky-200"},ab={class:"ml-2"},ib={class:"border-b-1 border-r-1 border-sky-200"},cb={class:"ml-2"},db={class:"border-b-1 border-r-1 border-sky-200"},ub={class:"ml-2"},fb={key:0,class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},pb={class:"font-semibold text-lg mb-3"},_b={class:"overflow-x-auto border border-gray-300 rounded"},hb={class:"table table-sm w-full"},bb={class:"border-r border-gray-300"},mb={class:"border-r border-gray-300 font-mono text-sm"},gb={key:1,class:"bg-sky-50 rounded-lg p-4 mb-6 border-gray-200 border"},vb={class:"overflow-x-auto bg-base-100 border border-gray-300 rounded"},yb={class:"table table-xs w-full border-collapse"},xb={key:0,rowspan:5,class:"border border-gray-300 text-center font-semibold align-middle"},wb={class:"border border-gray-300 text-center"},$b={class:"border border-gray-300 text-center font-mono text-xs"},Eb={class:"border border-gray-300 text-center font-mono text-xs"},Cb={key:0,rowspan:5,class:"border border-gray-300 text-center font-semibold align-middle"},Sb={class:"border border-gray-300 text-center text-gray-400"},kb={key:2,class:"bg-sky-50 rounded-lg p-4 border-gray-200 border"},Rb={class:"text-sm bg-base-100 p-3 rounded border border-gray-300"},ea={__name:"TechnicalPresentation",props:{technical:{type:Object,default:null}},setup(e){const t=e,n=a=>a?new Date(a).toLocaleDateString("es-ES"):"N/A",o=(a,i)=>{if(!i)return"badge-ghost";const d=new Date,_=new Date(i),f=Math.floor((_-d)/(1e3*60*60*24));return f<0?"badge-error":f<=30?"badge-warning":"badge-success"},l=a=>{if(!a)return"Sin vencer";const i=new Date,d=new Date(a),_=Math.floor((d-i)/(1e3*60*60*24));return _<0?"VENCIDO":_<=30?"PRXIMO A VENCER":"VIGENTE"},r=Z(()=>t.technical?.vaccination_records?t.technical.vaccination_records.reduce((a,i)=>{const d=i.vaccine_type_display;return a[d]||(a[d]=[]),a[d].push(i),a},{}):{});return(a,i)=>e.technical?(w(),$("div",gh,[s("h5",vh,h(e.technical.first_name)+" "+h(e.technical.last_name),1),s("div",yh,[i[8]||(i[8]=s("h6",{class:"font-semibold text-lg mb-3"},"Datos Personales",-1)),s("div",xh,[s("div",wh,[i[0]||(i[0]=s("span",{class:"font-medium"},"ID:",-1)),s("span",$h,h(e.technical.id),1)]),s("div",Eh,[i[1]||(i[1]=s("span",{class:"font-medium"},"Nombre:",-1)),s("span",Ch,h(e.technical.first_name),1)]),s("div",Sh,[i[2]||(i[2]=s("span",{class:"font-medium"},"Apellido:",-1)),s("span",kh,h(e.technical.last_name),1)]),s("div",Rh,[i[3]||(i[3]=s("span",{class:"font-medium"},"Cdula (DNI):",-1)),s("span",Ah,h(e.technical.dni),1)]),s("div",Dh,[i[4]||(i[4]=s("span",{class:"font-medium"},"Email:",-1)),s("span",Oh,h(e.technical.email),1)]),s("div",Ih,[i[5]||(i[5]=s("span",{class:"font-medium"},"Telfono:",-1)),s("span",Ph,h(e.technical.nro_phone),1)]),s("div",Th,[i[6]||(i[6]=s("span",{class:"font-medium"},"Fecha Nacimiento:",-1)),s("span",Nh,h(n(e.technical.birth_date)),1)]),s("div",jh,[i[7]||(i[7]=s("span",{class:"font-medium"},"Fecha Ingreso:",-1)),s("span",Fh,h(n(e.technical.date_joined)),1)])])]),s("div",Mh,[i[14]||(i[14]=s("h6",{class:"font-semibold text-lg mb-3"},"Informacin Laboral",-1)),s("div",Vh,[s("div",Uh,[i[9]||(i[9]=s("span",{class:"font-medium"},"rea de Trabajo:",-1)),s("span",Lh,h(e.technical.work_area_display),1)]),s("div",qh,[i[10]||(i[10]=s("span",{class:"font-medium"},"Afiliado IESS:",-1)),s("span",{class:le(["ml-2 badge",e.technical.is_iess_affiliated?"badge-success":"badge-ghost"])},h(e.technical.is_iess_affiliated?"S":"No"),3)]),s("div",Hh,[i[11]||(i[11]=s("span",{class:"font-medium"},"Seguro de Vida:",-1)),s("span",{class:le(["ml-2 badge",e.technical.has_life_insurance_policy?"badge-success":"badge-ghost"])},h(e.technical.has_life_insurance_policy?"S":"No"),3)]),s("div",Bh,[i[12]||(i[12]=s("span",{class:"font-medium"},"Cdigo QUEST NCST:",-1)),s("span",Gh,h(e.technical.quest_ncst_code),1)]),s("div",Wh,[i[13]||(i[13]=s("span",{class:"font-medium"},"Instructor QUEST:",-1)),s("span",Kh,h(e.technical.quest_instructor),1)])])]),s("div",Yh,[i[23]||(i[23]=s("h6",{class:"font-semibold text-lg mb-3"},"Licencias y Certificados",-1)),s("div",zh,[s("div",Qh,[i[15]||(i[15]=s("span",{class:"font-medium"},"Licencia (Expedida):",-1)),s("span",Jh,h(n(e.technical.license_issue_date)),1)]),s("div",Xh,[i[16]||(i[16]=s("span",{class:"font-medium"},"Licencia (Vence):",-1)),s("span",Zh,[s("span",{class:le(["badge",o(e.technical.license_issue_date,e.technical.license_expiry_date)])},h(n(e.technical.license_expiry_date)),3)])]),s("div",eb,[i[17]||(i[17]=s("span",{class:"font-medium"},"Cond. Defensiva (Expedida):",-1)),s("span",tb,h(n(e.technical.defensive_driving_certificate_issue_date)),1)]),s("div",sb,[i[18]||(i[18]=s("span",{class:"font-medium"},"Cond. Defensiva (Vence):",-1)),s("span",nb,[s("span",{class:le(["badge",o(e.technical.defensive_driving_certificate_issue_date,e.technical.defensive_driving_certificate_expiry_date)])},h(n(e.technical.defensive_driving_certificate_expiry_date)),3)])]),s("div",ob,[i[19]||(i[19]=s("span",{class:"font-medium"},"Certificado MAE (Expedida):",-1)),s("span",lb,h(n(e.technical.mae_certificate_issue_date)),1)]),s("div",rb,[i[20]||(i[20]=s("span",{class:"font-medium"},"Certificado MAE (Vence):",-1)),s("span",ab,h(n(e.technical.mae_certificate_expiry_date)),1)]),s("div",ib,[i[21]||(i[21]=s("span",{class:"font-medium"},"Certificado Mdico (Expedida):",-1)),s("span",cb,h(n(e.technical.medical_certificate_issue_date)),1)]),s("div",db,[i[22]||(i[22]=s("span",{class:"font-medium"},"Certificado Mdico (Vence):",-1)),s("span",ub,h(n(e.technical.medical_certificate_expiry_date)),1)])])]),e.technical.passes&&e.technical.passes.length>0?(w(),$("div",fb,[s("h6",pb,"Pases de Acceso ("+h(e.technical.passes.length)+")",1),s("div",_b,[s("table",hb,[i[24]||(i[24]=s("thead",{class:"bg-sky-100"},[s("tr",null,[s("th",{class:"border-r border-gray-300"},"Bloque"),s("th",{class:"border-r border-gray-300"},"Vencimiento"),s("th",null,"Estado")])],-1)),s("tbody",null,[(w(!0),$(de,null,ye(e.technical.passes,d=>(w(),$("tr",{key:d.id,class:"hover"},[s("td",bb,h(d.bloque_display||d.bloque),1),s("td",mb,h(n(d.fecha_caducidad)),1),s("td",null,[s("span",{class:le(["badge",o(null,d.fecha_caducidad)])},h(l(d.fecha_caducidad)),3)])]))),128))])])])])):te("",!0),e.technical.vaccination_records&&e.technical.vaccination_records.length>0?(w(),$("div",gb,[i[28]||(i[28]=s("h6",{class:"font-semibold text-lg mb-3"},"Registro de Vacunaciones",-1)),s("div",vb,[s("table",yb,[i[27]||(i[27]=s("thead",null,[s("tr",{class:"bg-sky-100"},[s("th",{class:"border border-gray-300 text-center font-semibold text-blue-700"},"VACUNA"),s("th",{class:"border border-gray-300 text-center font-semibold text-blue-700"},"DOSIS"),s("th",{class:"border border-gray-300 text-center font-semibold text-blue-700"},"FECHA"),s("th",{class:"border border-gray-300 text-center font-semibold text-blue-700"},"LOTE")])],-1)),s("tbody",null,[(w(!0),$(de,null,ye(r.value,(d,_)=>(w(),$(de,{key:_},[(w(!0),$(de,null,ye(d.slice(0,5),(f,u)=>(w(),$("tr",{key:f.id,class:"hover:bg-sky-50"},[u===0?(w(),$("td",xb,h(_),1)):te("",!0),s("td",wb,h(f.dose_number),1),s("td",$b,h(n(f.application_date)),1),s("td",Eb,h(f.batch_number||""),1)]))),128)),(w(!0),$(de,null,ye(Math.max(0,5-d.length),f=>(w(),$("tr",{key:`${_}-empty-${f}`,class:"hover:bg-sky-50"},[d.length===0&&f===1?(w(),$("td",Cb,h(_),1)):te("",!0),s("td",Sb,h(d.length+f),1),i[25]||(i[25]=s("td",{class:"border border-gray-300 text-center"},null,-1)),i[26]||(i[26]=s("td",{class:"border border-gray-300 text-center"},null,-1))]))),128))],64))),128))])])])])):te("",!0),e.technical.notes?(w(),$("div",kb,[i[29]||(i[29]=s("h6",{class:"font-semibold text-lg mb-3"},"Notas",-1)),s("p",Rb,h(e.technical.notes),1)])):te("",!0)])):te("",!0)}},Ab={key:0,class:"max-w-4xl mx-auto p-1"},Db={class:"text-xl font-bold mb-6"},Ob={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},Ib={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},Pb={class:"border-b-1 border-r-1 border-sky-200"},Tb={class:"ml-2"},Nb={class:"border-b-1 border-r-1 border-sky-200"},jb={class:"ml-2 font-mono"},Fb={class:"border-b-1 border-r-1 border-sky-200"},Mb={class:"ml-2"},Vb={class:"border-b-1 border-r-1 border-sky-200"},Ub={class:"ml-2"},Lb={class:"border-b-1 border-r-1 border-sky-200"},qb={class:"ml-2"},Hb={class:"border-b-1 border-r-1 border-sky-200"},Bb={class:"ml-2"},Gb={class:"border-b-1 border-r-1 border-sky-200"},Wb={class:"border-b-1 border-r-1 border-sky-200"},Kb={class:"ml-2 font-mono text-xs"},Yb={class:"border-b-1 border-r-1 border-sky-200"},zb={class:"ml-2 font-mono text-xs"},Qb={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},Jb={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},Xb={class:"border-b-1 border-r-1 border-sky-200"},Zb={class:"ml-2"},em={class:"border-b-1 border-r-1 border-sky-200"},tm={class:"border-b-1 border-r-1 border-sky-200"},sm={class:"border-b-1 border-r-1 border-sky-200"},nm={class:"border-b-1 border-r-1 border-sky-200"},om={class:"ml-2"},lm={class:"border-b-1 border-r-1 border-sky-200"},rm={class:"ml-2"},am={class:"border-b-1 border-r-1 border-sky-200"},im={class:"ml-2"},cm={class:"border-b-1 border-r-1 border-sky-200"},dm={class:"ml-2"},um={class:"border-b-1 border-r-1 border-sky-200"},fm={class:"ml-2"},pm={class:"border-b-1 border-r-1 border-sky-200"},_m={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},hm={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},bm={class:"border-b-1 border-r-1 border-sky-200"},mm={class:"ml-2"},gm={class:"border-b-1 border-r-1 border-sky-200"},vm={class:"ml-2"},ym={class:"border-b-1 border-r-1 border-sky-200"},xm={class:"ml-2"},wm={class:"border-b-1 border-r-1 border-sky-200"},$m={key:0,class:"bg-sky-50 rounded-lg p-4 border-gray-200 border"},Em={class:"text-sm bg-base-100 p-3 rounded border border-gray-300"},ta={__name:"VehiclePresentation",props:{vehicle:{type:Object,default:null}},setup(e){const t=l=>l?new Date(l).toLocaleDateString("es-ES"):"N/A",n=l=>{switch(l){case"DISPONIBLE":return"badge-success";case"VIGENTE":return"badge-success";case"VENCIDO":return"badge-error";case"PROXIMO_A_VENCER":return"badge-warning";default:return"badge-ghost"}},o=l=>{if(!l)return!1;const r=new Date,a=new Date(l),i=Math.floor((a-r)/(1e3*60*60*24));return i<=30&&i>0};return(l,r)=>e.vehicle?(w(),$("div",Ab,[s("h5",Db,h(e.vehicle.brand)+" "+h(e.vehicle.model),1),s("div",Ob,[r[9]||(r[9]=s("h6",{class:"font-semibold text-lg mb-3"},"Estado del Vehculo",-1)),s("div",Ib,[s("div",Pb,[r[0]||(r[0]=s("span",{class:"font-medium"},"ID:",-1)),s("span",Tb,h(e.vehicle.id),1)]),s("div",Nb,[r[1]||(r[1]=s("span",{class:"font-medium"},"Placa:",-1)),s("span",jb,h(e.vehicle.no_plate),1)]),s("div",Fb,[r[2]||(r[2]=s("span",{class:"font-medium"},"Marca:",-1)),s("span",Mb,h(e.vehicle.brand),1)]),s("div",Vb,[r[3]||(r[3]=s("span",{class:"font-medium"},"Modelo:",-1)),s("span",Ub,h(e.vehicle.model),1)]),s("div",Lb,[r[4]||(r[4]=s("span",{class:"font-medium"},"Tipo:",-1)),s("span",qb,h(e.vehicle.type_vehicle),1)]),s("div",Hb,[r[5]||(r[5]=s("span",{class:"font-medium"},"Ao:",-1)),s("span",Bb,h(e.vehicle.year),1)]),s("div",Gb,[r[6]||(r[6]=s("span",{class:"font-medium"},"Estado:",-1)),s("span",{class:le(["ml-2 badge",n(e.vehicle.status_vehicle)])},h(e.vehicle.status_vehicle),3)]),s("div",Wb,[r[7]||(r[7]=s("span",{class:"font-medium"},"Nmero de Motor:",-1)),s("span",Kb,h(e.vehicle.engine_number),1)]),s("div",Yb,[r[8]||(r[8]=s("span",{class:"font-medium"},"Nmero de Chasis:",-1)),s("span",zb,h(e.vehicle.chassis_number),1)])])]),s("div",Qb,[r[20]||(r[20]=s("h6",{class:"font-semibold text-lg mb-3"},"Documentos y Certificaciones",-1)),s("div",Jb,[s("div",Xb,[r[10]||(r[10]=s("span",{class:"font-medium"},"Matrcula (Fecha):",-1)),s("span",Zb,h(t(e.vehicle.date_matricula)),1)]),s("div",em,[r[11]||(r[11]=s("span",{class:"font-medium"},"Matrcula (Vence):",-1)),s("span",{class:le(["ml-2",o(e.vehicle.due_date_matricula)?"text-warning font-semibold":""])},h(t(e.vehicle.due_date_matricula)),3)]),s("div",tm,[r[12]||(r[12]=s("span",{class:"font-medium"},"Cert. Operacional:",-1)),s("span",{class:le(["ml-2 badge",n(e.vehicle.status_cert_oper)])},h(e.vehicle.status_cert_oper),3)]),s("div",sm,[r[13]||(r[13]=s("span",{class:"font-medium"},"Cert. Oper. (Vence):",-1)),s("span",{class:le(["ml-2",o(e.vehicle.due_date_cert_oper)?"text-warning font-semibold":""])},h(t(e.vehicle.due_date_cert_oper)),3)]),s("div",nm,[r[14]||(r[14]=s("span",{class:"font-medium"},"MTOP (Fecha):",-1)),s("span",om,h(t(e.vehicle.date_mtop)),1)]),s("div",lm,[r[15]||(r[15]=s("span",{class:"font-medium"},"MTOP (Vence):",-1)),s("span",rm,h(t(e.vehicle.due_date_mtop)),1)]),s("div",am,[r[16]||(r[16]=s("span",{class:"font-medium"},"Revisin Tcnica:",-1)),s("span",im,h(t(e.vehicle.date_technical_review)),1)]),s("div",cm,[r[17]||(r[17]=s("span",{class:"font-medium"},"Rev. Tcnica (Vence):",-1)),s("span",dm,h(t(e.vehicle.due_date_technical_review)),1)]),s("div",um,[r[18]||(r[18]=s("span",{class:"font-medium"},"Satlite (Fecha):",-1)),s("span",fm,h(t(e.vehicle.date_satellite)),1)]),s("div",pm,[r[19]||(r[19]=s("span",{class:"font-medium"},"Satlite (Vence):",-1)),s("span",{class:le(["ml-2",o(e.vehicle.due_date_satellite)?"text-warning font-semibold":""])},h(t(e.vehicle.due_date_satellite)),3)])])]),s("div",_m,[r[25]||(r[25]=s("h6",{class:"font-semibold text-lg mb-3"},"Seguro",-1)),s("div",hm,[s("div",bm,[r[21]||(r[21]=s("span",{class:"font-medium"},"Aseguradora:",-1)),s("span",mm,h(e.vehicle.insurance_company),1)]),s("div",gm,[r[22]||(r[22]=s("span",{class:"font-medium"},"Pliza Nro:",-1)),s("span",vm,h(e.vehicle.nro_poliza||"N/A"),1)]),s("div",ym,[r[23]||(r[23]=s("span",{class:"font-medium"},"Fecha Expedicin:",-1)),s("span",xm,h(t(e.vehicle.insurance_issue_date)),1)]),s("div",wm,[r[24]||(r[24]=s("span",{class:"font-medium"},"Vencimiento:",-1)),s("span",{class:le(["ml-2",o(e.vehicle.insurance_expiration_date)?"text-warning font-semibold":""])},h(t(e.vehicle.insurance_expiration_date)),3)])])]),e.vehicle.notes?(w(),$("div",$m,[r[26]||(r[26]=s("h6",{class:"font-semibold text-lg mb-3"},"Notas",-1)),s("p",Em,h(e.vehicle.notes),1)])):te("",!0)])):te("",!0)}},Cm={class:"w-[95%] mx-auto p-6"},Sm={class:"bg-white rounded-lg shadow-md p-2 mb-2 border border-gray-200"},km={class:"flex justify-between items-center"},Rm={class:"text-gray-800 flex items-center gap-2 font-semibold"},Am={class:"flex gap-2"},Dm={class:"grid grid-cols-1 gap-4"},Om={class:"bg-gradient-to-r from-blue-500 to-sky-600 text-white p-4 rounded-t-lg backdrop-blur-sm"},Im={class:"flex justify-between items-start"},Pm={class:"flex-1"},Tm={class:"flex items-center gap-3 mb-2"},Nm={class:"text-xl font-bold"},jm={class:"badge text-blue-500 font-semibold bg-white px-3 py-1"},Fm={class:"text-right"},Mm={class:"text-2xl p1 rounded text-error bg-gray-100 w-100% font-mono border border-sky-600 border-2"},Vm={class:"me-2"},Um={class:"p-2"},Lm={class:"grid grid-cols-4 gap-4"},qm={class:"flex items-center gap-2"},Hm={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},Bm={class:"flex items-center gap-2"},Gm={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},Wm={class:"flex items-center gap-2"},Km={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},Ym={class:"flex items-center gap-2"},zm={class:"flex gap-1 flex-1"},Qm={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},Jm=["onClick"],Xm={class:"p-2 border-b bg-gray-50 border-b-gray-200"},Zm={class:"grid grid-cols-4 gap-4"},eg={class:"flex items-center gap-2"},tg={class:"flex gap-1 flex-1"},sg={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},ng={class:""},og=["onClick"],lg={class:"flex items-center gap-2"},rg={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},ag={class:"flex items-center gap-2"},ig={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},cg={class:"flex items-center gap-2"},dg={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},ug={class:"p-4 border-b border-b-gray-200"},fg={class:"font-semibold text-gray-700 mb-3"},pg={class:"overflow-x-auto"},_g={class:"table table-sm w-full table-zebra"},hg={class:"border border-gray-300 p-2"},bg={class:"border border-gray-300 p-2"},mg={class:"border border-gray-300 p-2 text-center"},gg={key:0},vg={class:"pt-2 pb-2"},yg={class:"flex gap-4"},xg={class:"flex gap-4"},wg={class:"p-3 border rounded border-gray-200"},$g={class:"text-xl text-primary ml-5"},Eg={class:"p-3 border rounded border-gray-200"},Cg={class:"text-xl text-primary ml-5"},Sg={class:"p-3 border rounded border-gray-200"},kg={class:"text-xl text-primary ml-5"},Rg={class:"flex-1 border rounded p-3 border-gray-200"},Ag={class:"text-primary ml-5"},Dg={class:"bg-gray-50 p-4 rounded-b-lg flex justify-between gap-2"},Og={class:"flex gap-2"},Ig=["onClick"],Pg={key:0,class:"bg-white rounded-lg shadow-md p-8 text-center"},Tg={__name:"CustodyChainView",setup(e){const t=Fe(),n=Xr(),o=Zr();_t(async()=>{await t.fetchProjectData(),await n.fetchTechnicalsAvailable(),await o.fetchVehicles()});const l=cs(),r=pe(null),a=pe(null),i=pe(!1),d=pe(!1),_=Z(()=>{if(!t.projectData?.work_orders)return[];const A=[];return t.projectData.work_orders.forEach(v=>{v.custody_chains&&v.custody_chains.forEach(x=>{A.push({...x,work_order:v})})}),A}),f=A=>{a.value=A,i.value=!0},u=A=>{r.value=A,d.value=!0},c=A=>A?A.substring(0,5):"N/A",b=A=>A?new Date(A).toLocaleDateString("es-ES"):"N/A";return(A,v)=>(w(),$("div",Cm,[s("div",Sm,[s("div",km,[s("h1",Rm,[v[6]||(v[6]=s("i",{class:"las la-file-invoice text-blue-500"},null,-1)),L(" Cadenas de Custodia - "+h(me(t).projectData?.project?.partner_name),1)]),s("div",Am,[s("button",{class:"btn btn-secondary btn-sm",onClick:v[0]||(v[0]=x=>me(l).push({name:"project-detail"}))},[...v[7]||(v[7]=[s("i",{class:"las la-arrow-left"},null,-1),L(" Volver ",-1)])]),s("button",{class:"btn btn-primary btn-sm",onClick:v[1]||(v[1]=x=>me(l).push({name:"custody-chain-form"}))},[...v[8]||(v[8]=[s("i",{class:"las la-plus"},null,-1),L(" Nueva Cadena de Custodia ",-1)])])])])]),s("div",Dm,[(w(!0),$(de,null,ye(_.value,x=>(w(),$("div",{key:x.id,class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow"},[s("div",Om,[s("div",Im,[s("div",Pm,[s("div",Tm,[s("h2",Nm," #"+h(me(t).projectData?.project?.id)+" "+h(me(t).projectData?.project?.partner_name)+" - "+h(me(t).projectData?.project?.location),1),s("span",jm,h(me(t).projectData?.project?.cardinal_point||"N/A"),1)])]),s("div",Fm,[s("div",Mm,[v[9]||(v[9]=s("span",{class:"text-gray-700 ms-5"},"Nro.",-1)),s("span",Vm,h(x.consecutive),1)])])])]),s("div",Um,[s("div",Lm,[s("div",qm,[v[10]||(v[10]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Fecha:",-1)),s("span",Hm,h(b(x.activity_date)),1)]),s("div",Bm,[v[12]||(v[12]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Inicio - Fin:",-1)),s("span",Gm,[L(h(c(x.start_time))+" - "+h(c(x.end_time))+" ",1),v[11]||(v[11]=s("span",{class:"ml-2 me-2 text-gray-200"},"|",-1)),L(" "+h(x.time_duration?.toFixed(2)||"0.00")+" HRS ",1)])]),s("div",Wm,[v[13]||(v[13]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Ubicacin:",-1)),s("span",Km,h(x.location),1)]),s("div",Ym,[v[16]||(v[16]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Placa Vehiculo:",-1)),s("div",zm,[s("span",Qm,[L(h(x.vehicle?.no_plate)+" ",1),v[14]||(v[14]=s("span",{class:"ml-2 me-2 text-gray-200"},"|",-1)),L(" "+h(x.vehicle?.brand)+" "+h(x.vehicle?.model),1)]),s("button",{type:"button",class:"btn btn-sm btn-outline",onClick:U=>u(x.vehicle),title:"Ver detalles del vehculo"},[...v[15]||(v[15]=[s("i",{class:"las la-eye"},null,-1)])],8,Jm)])])])]),s("div",Xm,[s("div",Zm,[s("div",eg,[v[19]||(v[19]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Tcnico:",-1)),s("div",tg,[s("span",sg,[L(h(x.technical?.first_name)+" "+h(x.technical?.last_name)+" ",1),v[17]||(v[17]=s("span",{class:"ml-2 me-2 text-gray-200"},"|",-1)),s("span",ng,"CI: "+h(x.dni_driver),1)]),s("button",{type:"button",class:"btn btn-sm btn-outline",onClick:U=>f(x.technical),title:"Ver detalles del tcnico"},[...v[18]||(v[18]=[s("i",{class:"las la-eye"},null,-1)])],8,og)])]),s("div",lg,[v[20]||(v[20]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Cargo:",-1)),s("span",rg,h(x.driver_position),1)]),s("div",ag,[v[22]||(v[22]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Contacto:",-1)),s("span",ig,[L(h(x.contact_name)+" ",1),v[21]||(v[21]=s("span",{class:"ml-2 me-2 text-gray-200"},"|",-1)),s("span",null,h(me(t).projectData?.project?.contact_phone),1)])]),s("div",cg,[v[23]||(v[23]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Empresa:",-1)),s("span",dg,h(me(t).projectData?.project?.partner_name),1)])])]),s("div",ug,[s("h3",fg,"Detalle de Cadena de Custodia ("+h(x.details_count)+" equipos)",1),s("div",pg,[s("table",_g,[v[26]||(v[26]=s("thead",null,[s("tr",{class:"bg-gray-500 text-white text-center"},[s("th",{class:"border border-gray-300 w-10"},"#"),s("th",{class:"border border-gray-300"},"Equipo"),s("th",{class:"border border-gray-300 w-30"},"ID Recurso"),s("th",{class:"border border-gray-300 w-30"},"Acciones")])],-1)),s("tbody",null,[(w(!0),$(de,null,ye(x.details,(U,B)=>(w(),$("tr",{class:"hover:bg-yellow-100",key:U.id},[s("td",hg,h(B+1),1),s("td",bg,h(U.project_resource?.resource_item_name),1),s("td",mg,h(U.project_resource_id),1),v[24]||(v[24]=s("td",{class:"border border-gray-300 p-2 text-center"},[s("span",{class:"border rounded p-1 cursor-pointer bg-red-400 text-white hover:bg-red-600 font-semibold"}," Eliminar ")],-1))]))),128)),!x.details||x.details.length===0?(w(),$("tr",gg,[...v[25]||(v[25]=[s("td",{colspan:"4",class:"text-center py-4 text-gray-500"}," No hay detalles en esta cadena de custodia ",-1)])])):te("",!0)])])]),s("div",vg,[s("div",yg,[s("div",xg,[s("div",wg,[v[27]||(v[27]=L(" Galones: ",-1)),s("span",$g,h(x.total_gallons),1)]),s("div",Eg,[v[28]||(v[28]=L(" Metro Cubicos: ",-1)),s("span",Cg,h(x.total_cubic_meters),1)]),s("div",Sg,[v[29]||(v[29]=L(" Barriles: ",-1)),s("span",kg,h(x.total_barrels),1)])]),s("div",Rg,[v[30]||(v[30]=s("span",{class:"font-semibold"},"Notas:",-1)),s("span",Ag,h(x.metadata?.notes||"Sin notas"),1)])])])]),s("div",Dg,[s("button",{class:"btn btn-sm btn-primary",onClick:v[2]||(v[2]=U=>me(l).push({name:"project-detail"}))},[...v[31]||(v[31]=[s("i",{class:"las la-arrow-left"},null,-1),L(" Volver ",-1)])]),s("div",Og,[s("button",{class:"btn btn-sm btn-primary",onClick:U=>me(l).push({name:"custody-chain-form",params:{id:x.id}})},[...v[32]||(v[32]=[s("i",{class:"las la-edit"},null,-1),L(" Editar ",-1)])],8,Ig),v[33]||(v[33]=s("button",{class:"btn btn-sm btn-primary"},[s("i",{class:"las la-print"}),L(" Imprimir ")],-1)),v[34]||(v[34]=s("button",{class:"btn btn-sm bg-red-600 text-white"},[s("i",{class:"las la-times-circle"}),L(" Anular ")],-1))])])]))),128)),_.value.length===0?(w(),$("div",Pg,[v[36]||(v[36]=s("i",{class:"las la-inbox text-6xl text-gray-300"},null,-1)),v[37]||(v[37]=s("p",{class:"text-gray-500 mt-4"},"No hay cadenas de custodia registradas para este proyecto",-1)),s("button",{class:"btn btn-primary btn-sm mt-4",onClick:v[3]||(v[3]=x=>me(l).push({name:"custody-chain-form"}))},[...v[35]||(v[35]=[s("i",{class:"las la-plus"},null,-1),L(" Crear Primera Cadena ",-1)])])])):te("",!0)]),Ce(Ps,{"is-open":i.value,title:`Detalles del Tcnico - ${a.value?.first_name} ${a.value?.last_name}`,size:"xl",onClose:v[4]||(v[4]=x=>i.value=!1)},{default:kt(()=>[a.value?(w(),At(ea,{key:0,technical:a.value},null,8,["technical"])):te("",!0)]),_:1},8,["is-open","title"]),Ce(Ps,{"is-open":d.value,title:`Detalles del Vehculo - ${r.value?.no_plate}`,size:"xl",onClose:v[5]||(v[5]=x=>d.value=!1)},{default:kt(()=>[r.value?(w(),At(ta,{key:0,vehicle:r.value},null,8,["vehicle"])):te("",!0)]),_:1},8,["is-open","title"])]))}},Ng=zt("custodyChainStore",{state:()=>({custodyChains:[],sheetProjectInfo:null,selectedCustodyChain:null,loading:!1,error:null,newCustodyChain:{id:null,id_sheet_project:null,issue_date:null,consecutive:"00000",activity_date:null,location:null,total_gallons:0,duration_hours:0,have_logistic:"NA"}}),actions:{async addCustodyChain(e){console.log("Adding new custody chain",e);try{const t=await fetch(be.URLCreateCustodyChain,{method:"POST",headers:be.headers,body:JSON.stringify(e)});if(!t.ok){const o=await t.json();throw new Error(o.message||"Failed to create custody chain")}const n=await t.json();return this.custodyChains.push(n.data),this.resetNewCustodyChain(),n.data}catch(t){throw console.error("Error creating custody chain:",t),t}},resetNewCustodyChain(){this.newCustodyChain={id:null,id_sheet_project:null,issue_date:new Date().toISOString().split("T")[0],consecutive:"00000",activity_date:new Date().toISOString().split("T")[0],location:null,total_gallons:0,duration_hours:0,have_logistic:"NA"}},async fetchCustodyCapphainDetail(e){this.loading=!0,this.error=null,console.log("Fetching custody chain detail for ID:",e);try{const t=be.URLCustodyChainDetail.replace("${id}",e),n=await fetch(t,{method:"GET",headers:be.headers});if(!n.ok)throw new Error("Failed to fetch custody chain detail");const o=await n.json();return this.selectedCustodyChain=o.data,o.data}catch(t){throw console.error("Error fetching custody chain detail:",t),this.error=t.message,t}finally{this.loading=!1}},async updateCustodyChain(e,t){this.loading=!0,this.error=null,console.log("Updating custody chain",e,t);try{const n=be.URLUpdateCustodyChain.replace("${id}",e),o=await fetch(n,{method:"PUT",headers:be.headers,body:JSON.stringify(t)});if(!o.ok){const a=await o.json();throw new Error(a.message||"Failed to update custody chain")}const l=await o.json(),r=this.custodyChains.findIndex(a=>a.id===e);return r!==-1&&(this.custodyChains[r]={...this.custodyChains[r],...l.data}),l.data}catch(n){throw console.error("Error updating custody chain:",n),this.error=n.message,n}finally{this.loading=!1}}}}),Ft=e=>{if(!e)return!1;const t=new Date;return new Date(e)<t},xt=e=>{if(!e)return!1;const t=new Date,n=new Date(e),o=Math.floor((n-t)/(1e3*60*60*24));return o<=30&&o>0},jg=e=>{if(!e)return{hasErrors:!1,hasWarnings:!1,issues:[]};const t=[];let n=!1,o=!1;return Ft(e.license_expiry_date)?(t.push({type:"error",field:"Licencia de Conducir",message:"Licencia de conducir VENCIDA"}),n=!0):xt(e.license_expiry_date)&&(t.push({type:"warning",field:"Licencia de Conducir",message:"Licencia de conducir prxima a vencer"}),o=!0),Ft(e.defensive_driving_certificate_expiry_date)?(t.push({type:"error",field:"Conduccin Defensiva",message:"Certificado de conduccin defensiva VENCIDO"}),n=!0):xt(e.defensive_driving_certificate_expiry_date)&&(t.push({type:"warning",field:"Conduccin Defensiva",message:"Certificado de conduccin defensiva prximo a vencer"}),o=!0),Ft(e.medical_certificate_expiry_date)?(t.push({type:"error",field:"Certificado Mdico",message:"Certificado mdico VENCIDO"}),n=!0):xt(e.medical_certificate_expiry_date)&&(t.push({type:"warning",field:"Certificado Mdico",message:"Certificado mdico prximo a vencer"}),o=!0),e.passes&&e.passes.length>0&&e.passes.forEach(l=>{Ft(l.fecha_caducidad)?(t.push({type:"error",field:`Pase ${l.bloque_display||l.bloque}`,message:"Pase de acceso VENCIDO"}),n=!0):xt(l.fecha_caducidad)&&(t.push({type:"warning",field:`Pase ${l.bloque_display||l.bloque}`,message:"Pase de acceso prximo a vencer"}),o=!0)}),e.is_iess_affiliated||(t.push({type:"warning",field:"IESS",message:"No est afiliado al IESS"}),o=!0),{hasErrors:n,hasWarnings:o,issues:t}},Fg=e=>{if(!e)return{hasErrors:!1,hasWarnings:!1,issues:[]};const t=[];let n=!1,o=!1;return Ft(e.due_date_matricula)?(t.push({type:"error",field:"Matrcula",message:"Matrcula VENCIDA"}),n=!0):xt(e.due_date_matricula)&&(t.push({type:"warning",field:"Matrcula",message:"Matrcula prxima a vencer"}),o=!0),e.status_cert_oper==="VENCIDO"?(t.push({type:"error",field:"Certificado Operacional",message:"Certificado operacional VENCIDO"}),n=!0):xt(e.due_date_cert_oper)&&(t.push({type:"warning",field:"Certificado Operacional",message:"Certificado operacional prximo a vencer"}),o=!0),Ft(e.due_date_technical_review)?(t.push({type:"error",field:"Revisin Tcnica",message:"Revisin tcnica VENCIDA"}),n=!0):xt(e.due_date_technical_review)&&(t.push({type:"warning",field:"Revisin Tcnica",message:"Revisin tcnica prxima a vencer"}),o=!0),Ft(e.insurance_expiration_date)?(t.push({type:"error",field:"Seguro",message:"Seguro VENCIDO"}),n=!0):xt(e.insurance_expiration_date)&&(t.push({type:"warning",field:"Seguro",message:"Seguro prximo a vencer"}),o=!0),Ft(e.due_date_satellite)?(t.push({type:"error",field:"Satlite",message:"Certificado de satlite VENCIDO"}),n=!0):xt(e.due_date_satellite)&&(t.push({type:"warning",field:"Satlite",message:"Certificado de satlite prximo a vencer"}),o=!0),{hasErrors:n,hasWarnings:o,issues:t}},sa=42,na=.158987,oa=.00378541,Mg=e=>{const t=parseFloat(e)||0;return{barrels:parseFloat((t/sa).toFixed(2)),cubicMeters:parseFloat((t*oa).toFixed(2))}},Vg=e=>{const t=parseFloat(e)||0;return{gallons:parseFloat((t*sa).toFixed(2)),cubicMeters:parseFloat((t*na).toFixed(2))}},Ug=e=>{const t=parseFloat(e)||0;return{gallons:parseFloat((t/oa).toFixed(2)),barrels:parseFloat((t/na).toFixed(2))}},Lg={class:"max-w-7xl mx-auto p-4"},qg={class:"bg-white rounded-lg p-4 mb-4 border border-gray-200 shadow-sm"},Hg={class:"flex justify-between items-center"},Bg={class:"text-xl font-semibold text-gray-800"},Gg={class:"text-sm text-gray-600 mt-1"},Wg={class:"flex items-center gap-3"},Kg={class:"form-control"},Yg=["disabled"],zg=["value"],Qg={class:"flex flex-col items-center"},Jg={key:0,class:"mt-3 pt-3 border-t border-gray-200"},Xg={key:0,class:"flex items-center gap-2 text-sm text-amber-600"},Zg={key:1,class:"flex items-center gap-2 text-sm text-red-600"},ev={key:2,class:"flex items-center gap-2 text-sm text-green-600"},tv={key:0,class:"mb-6 space-y-3"},sv={key:0,class:"alert alert-error shadow-lg"},nv={class:"flex items-start w-full"},ov={class:"flex-1"},lv={class:"text-sm mt-2 space-y-1"},rv={key:1,class:"alert alert-warning shadow-lg"},av={class:"flex items-start w-full"},iv={class:"flex-1"},cv={class:"text-sm mt-2 space-y-1"},dv={key:2,class:"alert alert-error shadow-lg"},uv={class:"flex items-start w-full"},fv={class:"flex-1"},pv={class:"text-sm mt-2 space-y-1"},_v={key:3,class:"alert alert-warning shadow-lg"},hv={class:"flex items-start w-full"},bv={class:"flex-1"},mv={class:"text-sm mt-2 space-y-1"},gv={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},vv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},yv={class:"form-control w-full"},xv={class:"label",for:"technical"},wv={class:"label-text font-medium"},$v={key:0,class:"badge badge-error badge-sm ml-1"},Ev={key:1,class:"badge badge-warning badge-sm ml-1"},Cv={class:"flex gap-2"},Sv=["disabled"],kv=["value"],Rv={class:"form-control w-full"},Av={class:"label",for:"vehicle"},Dv={class:"label-text font-medium"},Ov={key:0,class:"badge badge-error badge-sm ml-1"},Iv={key:1,class:"badge badge-warning badge-sm ml-1"},Pv={class:"flex gap-2"},Tv=["disabled"],Nv=["value"],jv={class:"form-control w-full"},Fv=["disabled"],Mv={class:"form-control w-full"},Vv=["disabled"],Uv={class:"form-control w-full"},Lv=["disabled"],qv={class:"form-control w-full"},Hv=["disabled"],Bv={class:"form-control w-full"},Gv=["disabled"],Wv={class:"form-control w-full"},Kv=["disabled"],Yv={key:0,class:"label"},zv={class:"label-text-alt text-error"},Qv={class:"form-control w-full"},Jv={class:"form-control w-full"},Xv=["disabled"],Zv={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},e0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},t0={class:"form-control w-full"},s0=["disabled"],n0={class:"form-control w-full"},o0=["disabled"],l0={class:"form-control w-full"},r0=["disabled"],a0={class:"form-control w-full"},i0=["disabled"],c0={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},d0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},u0={class:"form-control w-full"},f0=["disabled"],p0={class:"form-control w-full"},_0=["disabled"],h0={class:"form-control w-full"},b0=["disabled"],m0={class:"form-control w-full"},g0=["disabled"],v0={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},y0={class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},x0={class:"badge badge-primary ml-2"},w0={class:"overflow-x-auto"},$0={class:"table table-zebra w-full table-sm"},E0={class:"bg-gray-500 text-white"},C0={class:"border border-gray-300 w-24 text-center"},S0=["disabled"],k0=["onClick","title"],R0={class:"border border-gray-300"},A0={class:"flex items-center justify-between px-2"},D0={key:0,class:"badge badge-success badge-sm gap-1",title:"Recurso activo"},O0={key:1,class:"badge badge-error badge-sm gap-1",title:"Recurso inactivo"},I0=["checked","disabled","onClick"],P0={class:"border border-gray-300"},T0={class:"border border-gray-300"},N0={class:"border border-gray-300"},j0={class:"border border-gray-300 text-right font-mono"},F0={key:0},M0={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},V0={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},U0={class:"form-control"},L0={class:"label cursor-pointer justify-start gap-3"},q0=["disabled"],H0={class:"form-control"},B0={class:"label cursor-pointer justify-start gap-3"},G0=["disabled"],W0={class:"form-control"},K0={class:"label cursor-pointer justify-start gap-3"},Y0=["disabled"],z0={class:"form-control"},Q0={class:"label cursor-pointer justify-start gap-3"},J0=["disabled"],X0={class:"form-control"},Z0={class:"label cursor-pointer justify-start gap-3"},ey=["disabled"],ty={class:"form-control"},sy={class:"label cursor-pointer justify-start gap-3"},ny=["disabled"],oy={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},ly={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ry={class:"form-control w-full"},ay=["disabled"],iy={class:"form-control w-full"},cy=["disabled"],dy={class:"form-control w-full"},uy=["disabled"],fy={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},py={class:"form-control w-full"},_y=["disabled"],hy={class:"flex gap-3 justify-end mt-6"},by=["disabled"],my=["disabled"],gy={key:0,class:"las la-save"},vy={key:1,class:"las la-spinner animate-spin"},yy={__name:"CustodyChainForm",setup(e){const t=Fe(),n=Xr(),o=Zr(),l=Ng(),r=cs(),a=go(),i=pe(!1),d=pe(!1),_=pe(!1),f=Z(()=>{const V=parseInt(a.params.id);return isNaN(V)?0:V}),u=Z(()=>f.value>0),c=pe({technical:null,vehicle:null,sheet_project:null,consecutive:"",activity_date:new Date().toISOString().split("T")[0],location:"",issue_date:new Date().toISOString().split("T")[0],status:"DRAFT",start_time:"",end_time:"",time_duration:0,contact_name:"",dni_contact:"",contact_position:"",date_contact:new Date().toISOString().split("T")[0],driver_name:"",dni_driver:"",driver_position:"",driver_date:new Date().toISOString().split("T")[0],total_gallons:0,total_barrels:0,total_cubic_meters:0,black_water:!1,grey_water:!1,clean_water:!1,activated_sludge:!1,treated_wastewater:!1,organic_grease:!1,notes:"",technical_name:"",technical_dni:"",technical_position:"",vehicle_plate:"",vehicle_brand:"",vehicle_model:"",have_logistic:"NA"}),b=pe([]),A=pe("DRAFT"),v=Z(()=>A.value==="CLOSE");Z(()=>!v.value);const x=async()=>{if(u.value)try{i.value=!0;const V=await l.fetchCustodyCapphainDetail(f.value);if(V){const p=V.custody_chain,S=V.technical,R=V.vehicle,z=V.details||[];A.value=p.status||"DRAFT",c.value={technical:S?.id||null,vehicle:R?.id||null,sheet_project:p.sheet_project_id,consecutive:p.consecutive,activity_date:p.activity_date,location:p.location,issue_date:p.issue_date||new Date().toISOString().split("T")[0],status:p.status||"DRAFT",start_time:p.start_time||"",end_time:p.end_time||"",time_duration:p.time_duration||0,contact_name:p.contact_name||"",dni_contact:p.dni_contact||"",contact_position:p.contact_position||"",date_contact:p.date_contact||new Date().toISOString().split("T")[0],driver_name:p.driver_name||"",dni_driver:p.dni_driver||"",driver_position:p.driver_position||"",driver_date:p.driver_date||new Date().toISOString().split("T")[0],total_gallons:parseFloat(p.total_gallons)||0,total_barrels:parseFloat(p.total_barrels)||0,total_cubic_meters:parseFloat(p.total_cubic_meters)||0,black_water:p.black_water||!1,grey_water:p.grey_water||!1,clean_water:p.clean_water||!1,activated_sludge:p.activated_sludge||!1,treated_wastewater:p.treated_wastewater||!1,organic_grease:p.organic_grease||!1,notes:p.meta?.notes||"",technical_name:S?`${S.first_name} ${S.last_name}`:"",technical_dni:S?.dni||"",technical_position:S?.work_area_display||S?.work_area||"",vehicle_plate:R?.no_plate||"",vehicle_brand:R?.brand||"",vehicle_model:R?.model||"",have_logistic:p.have_logistic||"NA"},z.length>0&&(b.value=z.map(Q=>Q.project_resource.id))}else console.warn("Cadena de custodia no encontrada"),r.push({name:"projects-detail"})}catch(V){console.error("Error al cargar cadena de custodia:",V),alert("Error al cargar los datos de la cadena de custodia: "+V.message),r.push({name:"projects-detail"})}finally{i.value=!1}};_t(async()=>{await t.fetchProjectData(),await n.fetchTechnicalsAvailable(),await o.fetchVehicles(),u.value?await x():(c.value.location=t.project?.location||"",c.value.contact_name=t.project?.contact_name||"")});const U=Z(()=>t.workOrders.find(V=>V.status==="IN_PROGRESS")||null),B=Z(()=>!U.value||!U.value.details?[]:U.value.details.filter(V=>V.project_resource_item?.type_resource==="SERVICIO").map(V=>({id:V.project_resource_item.id,resource_item_code:V.resource_item_code,detailed_description:V.project_resource_item.detailed_description||V.detail,cost:V.unit_price||V.project_resource_item.cost||0,is_active:V.metadata?.is_active??!0,type:"SERVIC",selected:b.value.includes(V.project_resource_item.id)}))),K=Z(()=>B.value.filter(V=>V.selected)),G=Z(()=>n.technicals.map(V=>({id:V.id,display:`${V.first_name} ${V.last_name}`,fullData:V}))),Y=Z(()=>o.vehicles.map(V=>({id:V.id,display:`${V.no_plate} - ${V.brand} ${V.model}`,fullData:V}))),y=V=>{const p=B.value.find(R=>R.id===V);if(p&&p.type==="SERVIC"&&!p.is_active)return;const S=b.value.indexOf(V);S>-1?b.value.splice(S,1):b.value.push(V)},k=()=>{if(c.value.start_time&&c.value.end_time){const V=c.value.start_time.split(":"),p=c.value.end_time.split(":"),S=parseInt(V[0])*60+parseInt(V[1]),z=parseInt(p[0])*60+parseInt(p[1])-S;c.value.time_duration=z>0?z:0}},D=async()=>{try{if(i.value=!0,!c.value.technical||!c.value.vehicle||K.value.length===0){alert("Por favor complete los campos requeridos y seleccione al menos un recurso");return}const V={custody_chain:{technical_id:c.value.technical,vehicle_id:c.value.vehicle,activity_date:c.value.activity_date,issue_date:c.value.issue_date,consecutive:c.value.consecutive,status:c.value.status,location:c.value.location,start_time:c.value.start_time,end_time:c.value.end_time,time_duration:c.value.time_duration,contact_name:c.value.contact_name,dni_contact:c.value.dni_contact,contact_position:c.value.contact_position,date_contact:c.value.date_contact,driver_name:c.value.driver_name,dni_driver:c.value.dni_driver,driver_position:c.value.driver_position,driver_date:c.value.driver_date,total_gallons:parseFloat((parseFloat(c.value.total_gallons)||0).toFixed(2)),total_barrels:parseFloat((parseFloat(c.value.total_barrels)||0).toFixed(2)),total_cubic_meters:parseFloat((parseFloat(c.value.total_cubic_meters)||0).toFixed(2)),black_water:c.value.black_water,grey_water:c.value.grey_water,clean_water:c.value.clean_water,activated_sludge:c.value.activated_sludge,treated_wastewater:c.value.treated_wastewater,organic_grease:c.value.organic_grease,have_logistic:c.value.have_logistic,meta:{notes:c.value.notes,id_user_updated:be.userId||1}},details:b.value.map(p=>({project_resource_id:p}))};if(u.value){if(await l.updateCustodyChain(f.value,V)){await t.fetchProjectData();const S=t.workOrders.find(R=>R.status==="IN_PROGRESS");S?r.push({name:"sheet-project-view",params:{id:S.id}}):r.push({name:"projects-detail"})}}else{const p={technical_id:c.value.technical,vehicle_id:c.value.vehicle,project_id:be.idProject,activity_date:c.value.activity_date,issue_date:c.value.issue_date,consecutive:c.value.consecutive,location:c.value.location,start_time:c.value.start_time,end_time:c.value.end_time,duration_hours:c.value.time_duration,contact_name:c.value.contact_name,dni_contact:c.value.dni_contact,contact_position:c.value.contact_position,date_contact:c.value.date_contact,driver_name:c.value.driver_name,dni_driver:c.value.dni_driver,driver_position:c.value.driver_position,driver_date:c.value.driver_date,technical_name:c.value.technical_name,technical_dni:c.value.technical_dni,technical_position:c.value.technical_position,vehicle_plate:c.value.vehicle_plate,vehicle_brand:c.value.vehicle_brand,vehicle_model:c.value.vehicle_model,total_gallons:parseFloat(c.value.total_gallons)||0,total_barrels:parseFloat(c.value.total_barrels)||0,total_cubic_meters:parseFloat(c.value.total_cubic_meters)||0,black_water:c.value.black_water,grey_water:c.value.grey_water,clean_water:c.value.clean_water,activated_sludge:c.value.activated_sludge,treated_wastewater:c.value.treated_wastewater,organic_grease:c.value.organic_grease,have_logistic:c.value.have_logistic,notes:c.value.notes,resources:b.value};if(await l.addCustodyChain(p)){await t.fetchProjectData();const R=t.workOrders.find(z=>z.status==="IN_PROGRESS");R?r.push({name:"sheet-project-view",params:{id:R.id}}):r.push({name:"projects-detail"})}}}catch(V){console.error("Error al guardar:",V),alert("Error al "+(u.value?"actualizar":"guardar")+" la cadena de custodia: "+V.message)}finally{i.value=!1}},ee=()=>{E.value&&(d.value=!0)},T=()=>{N.value&&(_.value=!0)},q=()=>{const V=t.workOrders.find(p=>p.status==="IN_PROGRESS");V?r.push({name:"sheet-project-view",params:{id:V.id}}):r.push({name:"projects-detail"})};Pe(()=>t.project?.location,V=>{V&&!c.value.location&&!u.value&&(c.value.location=V)}),Pe(()=>t.project?.contact_name,V=>{V&&!c.value.contact_name&&!u.value&&(c.value.contact_name=V)});const E=Z(()=>c.value.technical?n.technicals.find(V=>V.id===c.value.technical):null),N=Z(()=>c.value.vehicle?o.vehicles.find(V=>V.id===c.value.vehicle):null),j=Z(()=>jg(E.value)),F=Z(()=>Fg(N.value)),se=Z(()=>j.value.hasErrors||j.value.hasWarnings||F.value.hasErrors||F.value.hasWarnings),ie=Z(()=>{if(!c.value.start_time||!c.value.end_time)return{isValid:!0,message:""};const V=c.value.start_time.split(":"),p=c.value.end_time.split(":"),S=parseInt(V[0])*60+parseInt(V[1]);return parseInt(p[0])*60+parseInt(p[1])<=S?{isValid:!1,message:"La hora de fin debe ser mayor que la hora de inicio"}:{isValid:!0,message:""}});Pe(()=>c.value.start_time,()=>{k()}),Pe(()=>c.value.end_time,()=>{k()}),Pe(()=>c.value.activity_date,V=>{V&&!u.value&&(c.value.issue_date=V,c.value.driver_date=V)}),Pe(()=>c.value.technical,V=>{if(V&&!u.value){const p=n.technicals.find(S=>S.id===V);p&&(c.value.technical_name=`${p.first_name} ${p.last_name}`,c.value.technical_dni=p.dni,c.value.technical_position=p.work_area_display||p.work_area,c.value.driver_name=`${p.first_name} ${p.last_name}`,c.value.dni_driver=p.dni,c.value.driver_position=p.work_area_display||p.work_area,c.value.driver_date=new Date().toISOString().split("T")[0])}}),Pe(()=>c.value.vehicle,V=>{if(V&&!u.value){const p=o.vehicles.find(S=>S.id===V);p&&(c.value.vehicle_plate=p.no_plate,c.value.vehicle_brand=p.brand,c.value.vehicle_model=p.model)}});const _e=pe(null);Pe(()=>c.value.total_gallons,(V,p)=>{if(_e.value==="gallons"&&V!==p){const S=Mg(V);_e.value=null,c.value.total_barrels=parseFloat(S.barrels.toFixed(2)),c.value.total_cubic_meters=parseFloat(S.cubicMeters.toFixed(2))}}),Pe(()=>c.value.total_barrels,(V,p)=>{if(_e.value==="barrels"&&V!==p){const S=Vg(V);_e.value=null,c.value.total_gallons=parseFloat(S.gallons.toFixed(2)),c.value.total_cubic_meters=parseFloat(S.cubicMeters.toFixed(2))}}),Pe(()=>c.value.total_cubic_meters,(V,p)=>{if(_e.value==="cubicMeters"&&V!==p){const S=Ug(V);_e.value=null,c.value.total_gallons=parseFloat(S.gallons.toFixed(2)),c.value.total_barrels=parseFloat(S.barrels.toFixed(2))}});const tt=()=>{_e.value="gallons"},lt=()=>{_e.value="barrels"},Xe=()=>{_e.value="cubicMeters"},je=Z(()=>[{value:"DRAFT",label:"BORRADOR",class:"badge-warning"},{value:"CLOSE",label:"CERRADO",class:"badge-success"}]),ht=Z(()=>je.value.find(V=>V.value===c.value.status)||je.value[0]);return(V,p)=>(w(),$("div",Lg,[s("div",qg,[s("div",Hg,[s("div",null,[s("h2",Bg,[p[31]||(p[31]=s("i",{class:"las la-link text-blue-600"},null,-1)),L(" "+h(u.value?`${v.value?"Ver":"Editar"} Cadena de Custodia #${f.value}`:"Nueva Cadena de Custodia"),1)]),s("p",Gg,h(v.value?"Esta cadena de custodia est cerrada y no puede ser modificada":u.value?"Modifique los datos de la cadena de custodia":"Complete los datos para crear una nueva cadena de custodia"),1)]),s("div",Wg,[s("div",Kg,[p[32]||(p[32]=s("label",{class:"label py-0 mb-1"},[s("span",{class:"label-text font-semibold text-xs"},"Estado")],-1)),ne(s("select",{"onUpdate:modelValue":p[0]||(p[0]=S=>c.value.status=S),disabled:v.value,class:le(["select select-bordered select-sm",{"select-warning":c.value.status==="DRAFT","select-success":c.value.status==="CLOSE"}])},[(w(!0),$(de,null,ye(je.value,S=>(w(),$("option",{key:S.value,value:S.value},h(S.label),9,zg))),128))],10,Yg),[[wt,c.value.status]])]),s("div",Qg,[p[33]||(p[33]=s("span",{class:"text-xs text-gray-500 mb-1"},"Estado Actual",-1)),s("span",{class:le(["badge badge-lg",ht.value.class])},[s("i",{class:le(["las mr-1",{"la-edit":c.value.status==="DRAFT","la-lock":c.value.status==="CLOSE"}])},null,2),L(" "+h(ht.value.label),1)],2)])])]),u.value?(w(),$("div",Jg,[!v.value&&c.value.status==="DRAFT"?(w(),$("div",Xg,[...p[34]||(p[34]=[s("i",{class:"las la-info-circle text-lg"},null,-1),s("span",null,[L("La cadena de custodia est en estado "),s("strong",null,"BORRADOR"),L(" y puede ser modificada libremente.")],-1)])])):v.value?(w(),$("div",Zg,[...p[35]||(p[35]=[s("i",{class:"las la-lock text-lg"},null,-1),s("span",null,[L("La cadena de custodia est "),s("strong",null,"CERRADA"),L(". No se pueden realizar modificaciones.")],-1)])])):(w(),$("div",ev,[...p[36]||(p[36]=[s("i",{class:"las la-check-circle text-lg"},null,-1),s("span",null,[L("Al guardar con estado "),s("strong",null,"CERRADO"),L(", no se podrn realizar ms modificaciones.")],-1)])]))])):te("",!0)]),se.value?(w(),$("div",tv,[j.value.hasErrors?(w(),$("div",sv,[s("div",nv,[p[38]||(p[38]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("div",ov,[p[37]||(p[37]=s("h3",{class:"font-bold"},"Problemas crticos con el tcnico seleccionado",-1)),s("ul",lv,[(w(!0),$(de,null,ye(j.value.issues.filter(S=>S.type==="error"),(S,R)=>(w(),$("li",{key:R},[s("strong",null,h(S.field)+":",1),L(" "+h(S.message),1)]))),128))])])])])):te("",!0),j.value.hasWarnings&&!j.value.hasErrors?(w(),$("div",rv,[s("div",av,[p[40]||(p[40]=s("i",{class:"las la-exclamation-triangle text-2xl"},null,-1)),s("div",iv,[p[39]||(p[39]=s("h3",{class:"font-bold"},"Advertencias del tcnico seleccionado",-1)),s("ul",cv,[(w(!0),$(de,null,ye(j.value.issues.filter(S=>S.type==="warning"),(S,R)=>(w(),$("li",{key:R},[s("strong",null,h(S.field)+":",1),L(" "+h(S.message),1)]))),128))])])])])):te("",!0),F.value.hasErrors?(w(),$("div",dv,[s("div",uv,[p[42]||(p[42]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("div",fv,[p[41]||(p[41]=s("h3",{class:"font-bold"},"Problemas crticos con el vehculo seleccionado",-1)),s("ul",pv,[(w(!0),$(de,null,ye(F.value.issues.filter(S=>S.type==="error"),(S,R)=>(w(),$("li",{key:R},[s("strong",null,h(S.field)+":",1),L(" "+h(S.message),1)]))),128))])])])])):te("",!0),F.value.hasWarnings&&!F.value.hasErrors?(w(),$("div",_v,[s("div",hv,[p[44]||(p[44]=s("i",{class:"las la-exclamation-triangle text-2xl"},null,-1)),s("div",bv,[p[43]||(p[43]=s("h3",{class:"font-bold"},"Advertencias del vehculo seleccionado",-1)),s("ul",mv,[(w(!0),$(de,null,ye(F.value.issues.filter(S=>S.type==="warning"),(S,R)=>(w(),$("li",{key:R},[s("strong",null,h(S.field)+":",1),L(" "+h(S.message),1)]))),128))])])])])):te("",!0)])):te("",!0),s("form",{onSubmit:Os(D,["prevent"]),class:"space-y-6"},[s("div",gv,[p[65]||(p[65]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Informacin General",-1)),s("div",vv,[s("div",yv,[s("label",xv,[s("span",wv,[p[47]||(p[47]=L(" Tcnico * ",-1)),j.value.hasErrors?(w(),$("span",$v,[...p[45]||(p[45]=[s("i",{class:"las la-exclamation-circle"},null,-1)])])):j.value.hasWarnings?(w(),$("span",Ev,[...p[46]||(p[46]=[s("i",{class:"las la-exclamation-triangle"},null,-1)])])):te("",!0)])]),s("div",Cv,[ne(s("select",{id:"technical","onUpdate:modelValue":p[1]||(p[1]=S=>c.value.technical=S),disabled:v.value,required:"",class:le(["select select-bordered w-full flex-1",{"select-error":j.value.hasErrors,"select-warning":j.value.hasWarnings&&!j.value.hasErrors}])},[p[48]||(p[48]=s("option",{value:null,disabled:""},"Seleccione un tcnico",-1)),(w(!0),$(de,null,ye(G.value,S=>(w(),$("option",{key:S.id,value:S.id},h(S.display),9,kv))),128))],10,Sv),[[wt,c.value.technical,void 0,{number:!0}]]),E.value?(w(),$("button",{key:0,type:"button",class:"btn btn-outline btn-square",onClick:ee,title:"Ver detalles del tcnico"},[...p[49]||(p[49]=[s("i",{class:"las la-eye text-lg"},null,-1)])])):te("",!0)])]),s("div",Rv,[s("label",Av,[s("span",Dv,[p[52]||(p[52]=L(" Vehculo * ",-1)),F.value.hasErrors?(w(),$("span",Ov,[...p[50]||(p[50]=[s("i",{class:"las la-exclamation-circle"},null,-1)])])):F.value.hasWarnings?(w(),$("span",Iv,[...p[51]||(p[51]=[s("i",{class:"las la-exclamation-triangle"},null,-1)])])):te("",!0)])]),s("div",Pv,[ne(s("select",{id:"vehicle","onUpdate:modelValue":p[2]||(p[2]=S=>c.value.vehicle=S),disabled:v.value,required:"",class:le(["select select-bordered w-full flex-1",{"select-error":F.value.hasErrors,"select-warning":F.value.hasWarnings&&!F.value.hasErrors}])},[p[53]||(p[53]=s("option",{value:null,disabled:""},"Seleccione un vehculo",-1)),(w(!0),$(de,null,ye(Y.value,S=>(w(),$("option",{key:S.id,value:S.id},h(S.display),9,Nv))),128))],10,Tv),[[wt,c.value.vehicle,void 0,{number:!0}]]),N.value?(w(),$("button",{key:0,type:"button",class:"btn btn-outline btn-square",onClick:T,title:"Ver detalles del vehculo"},[...p[54]||(p[54]=[s("i",{class:"las la-eye text-lg"},null,-1)])])):te("",!0)])]),s("div",jv,[p[55]||(p[55]=s("label",{class:"label",for:"consecutive"},[s("span",{class:"label-text font-medium"},"Consecutivo")],-1)),ne(s("input",{type:"text",id:"consecutive","onUpdate:modelValue":p[3]||(p[3]=S=>c.value.consecutive=S),disabled:v.value,placeholder:"Se generar automticamente",class:"input input-bordered w-full",maxlength:"7"},null,8,Fv),[[he,c.value.consecutive]])]),s("div",Mv,[p[56]||(p[56]=s("label",{class:"label",for:"activity_date"},[s("span",{class:"label-text font-medium"},"Fecha de Actividad *")],-1)),ne(s("input",{type:"date",id:"activity_date","onUpdate:modelValue":p[4]||(p[4]=S=>c.value.activity_date=S),disabled:v.value,required:"",class:"input input-bordered w-full"},null,8,Vv),[[he,c.value.activity_date]])]),s("div",Uv,[p[57]||(p[57]=s("label",{class:"label",for:"location"},[s("span",{class:"label-text font-medium"},"Ubicacin")],-1)),ne(s("input",{type:"text",id:"location","onUpdate:modelValue":p[5]||(p[5]=S=>c.value.location=S),disabled:v.value,placeholder:"Ej: Bloque 31",class:"input input-bordered w-full"},null,8,Lv),[[he,c.value.location]])]),s("div",qv,[p[58]||(p[58]=s("label",{class:"label",for:"issue_date"},[s("span",{class:"label-text font-medium"},"Fecha de Emisin")],-1)),ne(s("input",{type:"date",id:"issue_date","onUpdate:modelValue":p[6]||(p[6]=S=>c.value.issue_date=S),disabled:v.value,class:"input input-bordered w-full"},null,8,Hv),[[he,c.value.issue_date]])]),s("div",Bv,[p[59]||(p[59]=s("label",{class:"label",for:"start_time"},[s("span",{class:"label-text font-medium"},"Hora de Inicio")],-1)),ne(s("input",{type:"time",id:"start_time","onUpdate:modelValue":p[7]||(p[7]=S=>c.value.start_time=S),disabled:v.value,class:le(["input input-bordered w-full",{"input-error":!ie.value.isValid}])},null,10,Gv),[[he,c.value.start_time]])]),s("div",Wv,[p[61]||(p[61]=s("label",{class:"label",for:"end_time"},[s("span",{class:"label-text font-medium"},"Hora de Fin")],-1)),ne(s("input",{type:"time",id:"end_time","onUpdate:modelValue":p[8]||(p[8]=S=>c.value.end_time=S),disabled:v.value,class:le(["input input-bordered w-full",{"input-error":!ie.value.isValid}])},null,10,Kv),[[he,c.value.end_time]]),ie.value.isValid?te("",!0):(w(),$("label",Yv,[s("span",zv,[p[60]||(p[60]=s("i",{class:"las la-exclamation-circle"},null,-1)),L(" "+h(ie.value.message),1)])]))]),s("div",Qv,[p[62]||(p[62]=s("label",{class:"label",for:"time_duration"},[s("span",{class:"label-text font-medium"},"Duracin (Minutos)")],-1)),ne(s("input",{type:"number",id:"time_duration","onUpdate:modelValue":p[9]||(p[9]=S=>c.value.time_duration=S),step:"0.01",readonly:"",class:"input input-bordered w-full bg-gray-100"},null,512),[[he,c.value.time_duration]])]),s("div",Jv,[p[64]||(p[64]=s("label",{class:"label",for:"have_logistic"},[s("span",{class:"label-text font-medium"},"Tiene Logstica? *")],-1)),ne(s("select",{id:"have_logistic","onUpdate:modelValue":p[10]||(p[10]=S=>c.value.have_logistic=S),disabled:v.value,required:"",class:"select select-bordered w-full"},[...p[63]||(p[63]=[s("option",{value:"SI"},"S",-1),s("option",{value:"NO"},"NO",-1),s("option",{value:"NA"},"NO APLICA",-1)])],8,Xv),[[wt,c.value.have_logistic]])])])]),s("div",Zv,[p[70]||(p[70]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Informacin del Transportista",-1)),s("div",e0,[s("div",t0,[p[66]||(p[66]=s("label",{class:"label",for:"driver_name"},[s("span",{class:"label-text font-medium"},"Nombre de Transportista")],-1)),ne(s("input",{type:"text",id:"driver_name","onUpdate:modelValue":p[11]||(p[11]=S=>c.value.driver_name=S),disabled:v.value,placeholder:"Nombre completo",class:"input input-bordered w-full"},null,8,s0),[[he,c.value.driver_name]])]),s("div",n0,[p[67]||(p[67]=s("label",{class:"label",for:"dni_driver"},[s("span",{class:"label-text font-medium"},"Cdula de Transportista")],-1)),ne(s("input",{type:"text",id:"dni_driver","onUpdate:modelValue":p[12]||(p[12]=S=>c.value.dni_driver=S),disabled:v.value,placeholder:"Nmero de identificacin",maxlength:"15",class:"input input-bordered w-full"},null,8,o0),[[he,c.value.dni_driver]])]),s("div",l0,[p[68]||(p[68]=s("label",{class:"label",for:"driver_position"},[s("span",{class:"label-text font-medium"},"Cargo de Transportista")],-1)),ne(s("input",{type:"text",id:"driver_position","onUpdate:modelValue":p[13]||(p[13]=S=>c.value.driver_position=S),disabled:v.value,placeholder:"Ej: Conductor",class:"input input-bordered w-full"},null,8,r0),[[he,c.value.driver_position]])]),s("div",a0,[p[69]||(p[69]=s("label",{class:"label",for:"driver_date"},[s("span",{class:"label-text font-medium"},"Fecha de Transportista")],-1)),ne(s("input",{type:"date",id:"driver_date","onUpdate:modelValue":p[14]||(p[14]=S=>c.value.driver_date=S),disabled:v.value,class:"input input-bordered w-full"},null,8,i0),[[he,c.value.driver_date]])])])]),s("div",c0,[p[75]||(p[75]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Informacin de Contacto",-1)),s("div",d0,[s("div",u0,[p[71]||(p[71]=s("label",{class:"label",for:"contact_name"},[s("span",{class:"label-text font-medium"},"Nombre de Contacto")],-1)),ne(s("input",{type:"text",id:"contact_name","onUpdate:modelValue":p[15]||(p[15]=S=>c.value.contact_name=S),disabled:v.value,placeholder:"Nombre completo",class:"input input-bordered w-full"},null,8,f0),[[he,c.value.contact_name]])]),s("div",p0,[p[72]||(p[72]=s("label",{class:"label",for:"dni_contact"},[s("span",{class:"label-text font-medium"},"Cdula de Contacto")],-1)),ne(s("input",{type:"text",id:"dni_contact","onUpdate:modelValue":p[16]||(p[16]=S=>c.value.dni_contact=S),disabled:v.value,placeholder:"Nmero de identificacin",maxlength:"15",class:"input input-bordered w-full"},null,8,_0),[[he,c.value.dni_contact]])]),s("div",h0,[p[73]||(p[73]=s("label",{class:"label",for:"contact_position"},[s("span",{class:"label-text font-medium"},"Cargo de Contacto")],-1)),ne(s("input",{type:"text",id:"contact_position","onUpdate:modelValue":p[17]||(p[17]=S=>c.value.contact_position=S),disabled:v.value,placeholder:"Ej: Maquinista",class:"input input-bordered w-full"},null,8,b0),[[he,c.value.contact_position]])]),s("div",m0,[p[74]||(p[74]=s("label",{class:"label",for:"date_contact"},[s("span",{class:"label-text font-medium"},"Fecha de Contacto")],-1)),ne(s("input",{type:"date",id:"date_contact","onUpdate:modelValue":p[18]||(p[18]=S=>c.value.date_contact=S),disabled:v.value,class:"input input-bordered w-full"},null,8,g0),[[he,c.value.date_contact]])])])]),s("div",v0,[s("h6",y0,[p[76]||(p[76]=L(" Recursos de la Planilla ",-1)),s("span",x0,h(K.value.length)+" seleccionados",1)]),s("div",w0,[s("table",$0,[s("thead",null,[s("tr",E0,[s("th",C0,[s("input",{type:"checkbox",class:"checkbox checkbox-sm",disabled:v.value},null,8,S0)]),p[77]||(p[77]=s("th",{class:"border border-gray-300"},"#",-1)),p[78]||(p[78]=s("th",{class:"border border-gray-300"},"Cdigo",-1)),p[79]||(p[79]=s("th",{class:"border border-gray-300"},"Descripcin",-1)),p[80]||(p[80]=s("th",{class:"border border-gray-300 text-right"},"Costo",-1))])]),s("tbody",null,[(w(!0),$(de,null,ye(B.value,(S,R)=>(w(),$("tr",{key:S.id,class:le({"bg-blue-100":S.selected,"cursor-pointer hover:bg-blue-50":!v.value&&(S.type!=="SERVIC"||S.is_active),"opacity-60":v.value,"opacity-50 bg-gray-100":S.type==="SERVIC"&&!S.is_active,"cursor-not-allowed":S.type==="SERVIC"&&!S.is_active}),onClick:z=>!v.value&&y(S.id),title:S.type==="SERVIC"&&!S.is_active?"Recurso inactivo - no se puede seleccionar":""},[s("td",R0,[s("div",A0,[S.is_active?(w(),$("span",D0,[...p[81]||(p[81]=[s("i",{class:"las la-check-circle"},null,-1)])])):(w(),$("span",O0,[...p[82]||(p[82]=[s("i",{class:"las la-times-circle"},null,-1)])])),s("input",{type:"checkbox",class:"checkbox checkbox-sm checkbox-primary",checked:S.selected,disabled:v.value||S.type==="SERVIC"&&!S.is_active,onClick:Os(z=>!v.value&&y(S.id),["stop"])},null,8,I0)])]),s("td",P0,h(R+1),1),s("td",T0,h(S.resource_item_code),1),s("td",N0,h(S.detailed_description),1),s("td",j0,"$"+h(S.cost),1)],10,k0))),128)),B.value.length===0?(w(),$("tr",F0,[...p[83]||(p[83]=[s("td",{colspan:"5",class:"text-center text-gray-500 py-8"},[s("i",{class:"las la-inbox text-4xl"}),s("p",null,"No hay recursos disponibles")],-1)])])):te("",!0)])])])]),s("div",M0,[p[90]||(p[90]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Tipo de Residuos / Aguas",-1)),s("div",V0,[s("div",U0,[s("label",L0,[ne(s("input",{type:"checkbox","onUpdate:modelValue":p[19]||(p[19]=S=>c.value.black_water=S),disabled:v.value,class:"checkbox checkbox-primary"},null,8,q0),[[Bt,c.value.black_water]]),p[84]||(p[84]=s("span",{class:"label-text font-medium"},"Aguas Negras",-1))])]),s("div",H0,[s("label",B0,[ne(s("input",{type:"checkbox","onUpdate:modelValue":p[20]||(p[20]=S=>c.value.grey_water=S),disabled:v.value,class:"checkbox checkbox-primary"},null,8,G0),[[Bt,c.value.grey_water]]),p[85]||(p[85]=s("span",{class:"label-text font-medium"},"Aguas Grises",-1))])]),s("div",W0,[s("label",K0,[ne(s("input",{type:"checkbox","onUpdate:modelValue":p[21]||(p[21]=S=>c.value.clean_water=S),disabled:v.value,class:"checkbox checkbox-primary"},null,8,Y0),[[Bt,c.value.clean_water]]),p[86]||(p[86]=s("span",{class:"label-text font-medium"},"Aguas Limpias",-1))])]),s("div",z0,[s("label",Q0,[ne(s("input",{type:"checkbox","onUpdate:modelValue":p[22]||(p[22]=S=>c.value.activated_sludge=S),disabled:v.value,class:"checkbox checkbox-primary"},null,8,J0),[[Bt,c.value.activated_sludge]]),p[87]||(p[87]=s("span",{class:"label-text font-medium"},"Lodos Activados",-1))])]),s("div",X0,[s("label",Z0,[ne(s("input",{type:"checkbox","onUpdate:modelValue":p[23]||(p[23]=S=>c.value.treated_wastewater=S),disabled:v.value,class:"checkbox checkbox-primary"},null,8,ey),[[Bt,c.value.treated_wastewater]]),p[88]||(p[88]=s("span",{class:"label-text font-medium"},"Aguas Residuales Tratadas",-1))])]),s("div",ty,[s("label",sy,[ne(s("input",{type:"checkbox","onUpdate:modelValue":p[24]||(p[24]=S=>c.value.organic_grease=S),disabled:v.value,class:"checkbox checkbox-primary"},null,8,ny),[[Bt,c.value.organic_grease]]),p[89]||(p[89]=s("span",{class:"label-text font-medium"},"Grasa Orgnica",-1))])])])]),s("div",oy,[p[94]||(p[94]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},[L(" Totales "),s("span",{class:"text-xs text-gray-500 ml-2"},"(Los valores se convierten automticamente)")],-1)),s("div",ly,[s("div",ry,[p[91]||(p[91]=s("label",{class:"label",for:"total_gallons"},[s("span",{class:"label-text font-medium"},"Total Galones")],-1)),ne(s("input",{type:"number",id:"total_gallons","onUpdate:modelValue":p[25]||(p[25]=S=>c.value.total_gallons=S),onInput:tt,disabled:v.value,min:"0",step:"0.01",class:"input input-bordered w-full",placeholder:"0.00"},null,40,ay),[[he,c.value.total_gallons,void 0,{number:!0}]])]),s("div",iy,[p[92]||(p[92]=s("label",{class:"label",for:"total_barrels"},[s("span",{class:"label-text font-medium"},"Total Barriles")],-1)),ne(s("input",{type:"number",id:"total_barrels","onUpdate:modelValue":p[26]||(p[26]=S=>c.value.total_barrels=S),onInput:lt,disabled:v.value,min:"0",step:"0.01",class:"input input-bordered w-full",placeholder:"0.00"},null,40,cy),[[he,c.value.total_barrels,void 0,{number:!0}]])]),s("div",dy,[p[93]||(p[93]=s("label",{class:"label",for:"total_cubic_meters"},[s("span",{class:"label-text font-medium"},"Total Metros Cbicos")],-1)),ne(s("input",{type:"number",id:"total_cubic_meters","onUpdate:modelValue":p[27]||(p[27]=S=>c.value.total_cubic_meters=S),onInput:Xe,disabled:v.value,min:"0",step:"0.01",class:"input input-bordered w-full",placeholder:"0.00"},null,40,uy),[[he,c.value.total_cubic_meters,void 0,{number:!0}]])])])]),s("div",fy,[p[95]||(p[95]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Notas",-1)),s("div",py,[ne(s("textarea",{id:"notes","onUpdate:modelValue":p[28]||(p[28]=S=>c.value.notes=S),disabled:v.value,rows:"4",placeholder:"Observaciones o notas adicionales...",class:"textarea textarea-bordered w-full"},null,8,_y),[[he,c.value.notes]])])]),s("div",hy,[s("button",{type:"button",class:"btn btn-outline",onClick:q,disabled:i.value},[p[96]||(p[96]=s("i",{class:"las la-times"},null,-1)),L(" "+h(v.value?"Cerrar":"Cancelar"),1)],8,by),v.value?te("",!0):(w(),$("button",{key:0,type:"submit",class:"btn btn-primary",disabled:i.value},[i.value?(w(),$("i",vy)):(w(),$("i",gy)),L(" "+h(i.value?"Guardando...":u.value?"Actualizar Cadena de Custodia":"Guardar Cadena de Custodia"),1)],8,my))])],32),Ce(Ps,{"is-open":d.value,title:`Detalles del Tcnico - ${E.value?.first_name} ${E.value?.last_name}`,size:"xl",onClose:p[29]||(p[29]=S=>d.value=!1)},{default:kt(()=>[E.value?(w(),At(ea,{key:0,technical:E.value},null,8,["technical"])):te("",!0)]),_:1},8,["is-open","title"]),Ce(Ps,{"is-open":_.value,title:`Detalles del Vehculo - ${N.value?.no_plate}`,size:"xl",onClose:p[30]||(p[30]=S=>_.value=!1)},{default:kt(()=>[N.value?(w(),At(ta,{key:0,vehicle:N.value},null,8,["vehicle"])):te("",!0)]),_:1},8,["is-open","title"])]))}},xy={class:"w-[95%] mx-auto p-4"},wy={class:"bg-white rounded-2xl shadow-md border border-blue-300 border-t-[15px] border-t-blue-300 p-6 mb-6"},$y={class:"flex justify-between items-center border-b-blue-500 border-b pb-3 mb-4"},Ey={class:"text-xl font-semibold text-blue-500"},Cy={class:"flex gap-3"},Sy={key:1,class:"text-orange-700 badge bg-orange-100 px-4 py-3"},ky={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ry={class:"bg-blue-50 rounded-lg p-4 border border-blue-200"},Ay={class:"font-semibold text-blue-700 mb-3 flex items-center gap-2"},Dy={class:"space-y-2 text-sm"},Oy={class:"ml-2"},Iy={class:"ml-2"},Py={class:"ml-2"},Ty={class:"ml-2"},Ny={class:"bg-sky-50 rounded-lg p-4 border border-sky-200"},jy={class:"space-y-2 text-sm"},Fy={class:"ml-2 font-mono"},My={class:"ml-2"},Vy={class:"ml-2"},Uy={class:"bg-white rounded-xl shadow-md border border-gray-200 p-6"},Ly={class:"font-semibold text-lg mb-4 flex items-center gap-2 text-gray-800"},qy={class:"overflow-x-auto"},Hy={class:"table table-zebra w-full"},By={key:0},Gy={class:"p-2 border border-gray-300 text-center"},Wy={class:"p-2 border border-gray-300 font-mono"},Ky={class:"p-2 border border-gray-300 text-center"},Yy={class:"p-2 border border-gray-300 text-center"},zy={class:"p-2 border border-gray-300 text-center font-mono"},Qy={class:"p-2 border border-gray-300 text-center font-mono"},Jy={class:"p-2 border border-gray-300 text-center font-semibold"},Xy={class:"p-2 border border-gray-300"},Zy={class:"p-2 border border-gray-300"},e1={key:0,class:"text-xs"},t1={class:"font-semibold"},s1={key:1,class:"text-gray-400"},n1={class:"p-2 border border-gray-300"},o1={key:0,class:"text-xs"},l1={class:"font-semibold"},r1={class:"text-gray-500"},a1={key:1,class:"text-gray-400"},i1={class:"p-2 border border-gray-300 text-right font-mono"},c1={class:"p-2 border border-gray-300 text-right font-mono"},d1={class:"p-2 border border-gray-300 text-right font-mono"},u1={class:"p-2 border border-gray-300 text-center"},f1={class:"badge badge-info"},p1={class:"p-2 border border-gray-300 text-end"},_1={class:"flex gap-2 justify-end"},h1=["onClick"],b1=["onClick"],m1=["onClick","title","disabled"],g1={key:0},v1={class:"bg-gray-500 font-bold text-white"},y1={class:"p-2 border border-gray-300 text-center"},x1={class:"p-2 border border-gray-300 text-right font-mono"},w1={class:"p-2 border border-gray-300 text-right font-mono"},$1={class:"p-2 border border-gray-300 text-right font-mono"},E1={class:"stats shadow w-full mt-6"},C1={class:"stat"},S1={class:"stat-value text-primary"},k1={class:"stat"},R1={class:"stat-value text-info"},A1={class:"stat"},D1={class:"stat-value text-info"},O1={class:"stat"},I1={class:"stat-value text-info"},P1={class:"stat"},T1={class:"stat-value text-info"},N1={__name:"SheetProjectView",setup(e){const t=go(),n=cs(),o=Fe(),l=vo(),r=Z(()=>parseInt(t.params.id)),a=Z(()=>o.project),i=Z(()=>l.getSheetProjectById(r.value)),d=Z(()=>l.getCustodyChainsForSheet(r.value)),_=Y=>Y?new Intl.DateTimeFormat("es-EC",{day:"2-digit",month:"2-digit",year:"numeric",timeZone:"UTC"}).format(new Date(Y)):"N/A",f=Y=>Y||"--:--",u=Y=>({IN_PROGRESS:{text:"EN EJECUCIN",class:"badge-success"},INVOICED:{text:"FACTURADO",class:"badge-info"},CANCELLED:{text:"CANCELADO",class:"badge-warning"}})[Y]||{text:Y,class:"badge-ghost"},c=Y=>({DRAFT:{text:"BORRADOR",class:"badge-warning"},CLOSE:{text:"CERRADO",class:"badge-success"}})[Y]||{text:Y,class:"badge-ghost"},b=Z(()=>d.value.reduce((Y,y)=>Y+parseFloat(y.total_gallons||0),0)),A=Z(()=>d.value.reduce((Y,y)=>Y+parseFloat(y.total_barrels||0),0)),v=Z(()=>d.value.reduce((Y,y)=>Y+parseFloat(y.total_cubic_meters||0),0)),x=Z(()=>d.value.reduce((Y,y)=>Y+parseFloat(y.time_duration||0),0).toFixed(2)),U=()=>{n.push({name:"projects-detail"})},B=Y=>{n.push({name:"custody-chain-form",params:{id:Y}})},K=()=>{n.push({name:"custody-chain-form",query:{sheet_id:i.value?.id}})},G=Y=>{const y=be.PDFCustodyChainReport.replace("${id}",Y);window.open(y,"_blank")};return _t(async()=>{a.value.id||await o.fetchProjectData()}),(Y,y)=>(w(),$("div",xy,[s("div",wy,[s("div",$y,[s("h1",Ey,[y[0]||(y[0]=s("i",{class:"las la-link text-2xl"},null,-1)),L(" Cadenas de Custodia - Planilla "+h(i.value?.series_code||"N/A"),1)]),s("div",Cy,[i.value?.status==="IN_PROGRESS"?(w(),$("button",{key:0,onClick:K,class:"btn btn-primary btn-sm"},[...y[1]||(y[1]=[s("i",{class:"las la-plus"},null,-1),L(" Nueva Cadena de Custodia ",-1)])])):(w(),$("div",Sy,[...y[2]||(y[2]=[s("i",{class:"las la-exclamation-triangle"},null,-1),L(" PLANILLA CERRADA - NO SE PUEDEN AGREGAR CADENAS ",-1)])])),s("button",{onClick:U,class:"btn btn-outline btn-sm"},[...y[3]||(y[3]=[s("i",{class:"las la-arrow-left"},null,-1),L(" Volver ",-1)])])])]),s("div",ky,[s("div",Ry,[s("h3",Ay,[y[4]||(y[4]=s("i",{class:"las la-building"},null,-1)),L(" Informacin del Proyecto #"+h(a.value?.id||"N/A"),1)]),s("div",Dy,[s("div",null,[y[5]||(y[5]=s("span",{class:"font-medium"},"Cliente:",-1)),s("span",Oy,h(a.value?.partner_name||"N/A"),1)]),s("div",null,[y[6]||(y[6]=s("span",{class:"font-medium"},"Ubicacin:",-1)),s("span",Iy,h(a.value?.location||"N/A")+h(a.value?.cardinal_point?" - "+a.value.cardinal_point:""),1)]),s("div",null,[y[7]||(y[7]=s("span",{class:"font-medium"},"Contacto:",-1)),s("span",Py,h(a.value?.contact_name||"N/A")+" ("+h(a.value?.contact_phone||"N/A")+")",1)]),s("div",null,[y[8]||(y[8]=s("span",{class:"font-medium"},"Fecha Inicio:",-1)),s("span",Ty,h(_(a.value?.start_date)),1)])])]),s("div",Ny,[y[13]||(y[13]=s("h3",{class:"font-semibold text-sky-700 mb-3 flex items-center gap-2"},[s("i",{class:"las la-file-invoice"}),L(" Informacin de la Planilla ")],-1)),s("div",jy,[s("div",null,[y[9]||(y[9]=s("span",{class:"font-medium"},"Serie:",-1)),s("span",Fy,h(i.value?.series_code||"N/A"),1)]),s("div",null,[y[10]||(y[10]=s("span",{class:"font-medium"},"Estado:",-1)),s("span",{class:le(["ml-2 badge",u(i.value?.status).class])},h(u(i.value?.status).text),3)]),s("div",null,[y[11]||(y[11]=s("span",{class:"font-medium"},"Tipo Servicio:",-1)),s("span",My,h(i.value?.service_type||"N/A"),1)]),s("div",null,[y[12]||(y[12]=s("span",{class:"font-medium"},"Perodo:",-1)),s("span",Vy,h(_(i.value?.period_start))+" - "+h(i.value?.period_end?_(i.value.period_end):"En curso"),1)])])])])]),s("div",Uy,[s("h2",Ly,[y[14]||(y[14]=s("i",{class:"las la-list text-blue-600"},null,-1)),L(" Listado de Cadenas de Custodia ("+h(d.value.length)+") ",1)]),s("div",qy,[s("table",Hy,[y[22]||(y[22]=s("thead",null,[s("tr",{class:"bg-gray-500 text-white"},[s("th",{class:"p-2 border border-gray-100 text-center"},"#"),s("th",{class:"p-2 border border-gray-100 text-center"},"Consecutivo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Estado"),s("th",{class:"p-2 border border-gray-100 text-center"},"Fecha Actividad"),s("th",{class:"p-2 border border-gray-100 text-center"},"Hora Inicio"),s("th",{class:"p-2 border border-gray-100 text-center"},"Hora Fin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Minutos"),s("th",{class:"p-2 border border-gray-100 text-center"},"Ubicacin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Tcnico"),s("th",{class:"p-2 border border-gray-100 text-center"},"Vehculo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Galones"),s("th",{class:"p-2 border border-gray-100 text-center"},"Barriles"),s("th",{class:"p-2 border border-gray-100 text-center"},"M"),s("th",{class:"p-2 border border-gray-100 text-center"},"Recursos"),s("th",{class:"p-2 border border-gray-100 text-center"},"Acciones")])],-1)),s("tbody",null,[d.value.length===0?(w(),$("tr",By,[...y[15]||(y[15]=[s("td",{colspan:"15",class:"text-center text-gray-500 py-8"},[s("i",{class:"las la-inbox text-4xl"}),s("p",null,"No hay cadenas de custodia registradas para esta planilla")],-1)])])):(w(!0),$(de,{key:1},ye(d.value,k=>(w(),$("tr",{key:k.id},[s("td",Gy,h(k.id),1),s("td",Wy,h(k.consecutive),1),s("td",Ky,[s("span",{class:le(["badge",c(k.status).class])},h(c(k.status).text),3)]),s("td",Yy,h(_(k.activity_date)),1),s("td",zy,h(f(k.start_time)),1),s("td",Qy,h(f(k.end_time)),1),s("td",Jy,h(k.time_duration||0),1),s("td",Xy,h(k.location||"N/A"),1),s("td",Zy,[k.technical?(w(),$("div",e1,[s("div",t1,h(k.technical.first_name)+" "+h(k.technical.last_name),1)])):(w(),$("span",s1,"N/A"))]),s("td",n1,[k.vehicle?(w(),$("div",o1,[s("div",l1,h(k.vehicle.no_plate),1),s("div",r1,h(k.vehicle.brand),1)])):(w(),$("span",a1,"N/A"))]),s("td",i1,h(k.total_gallons||0),1),s("td",c1,h(k.total_barrels||0),1),s("td",d1,h(k.total_cubic_meters||0),1),s("td",u1,[s("span",f1,h(k.details_count||0),1)]),s("td",p1,[s("div",_1,[s("button",{onClick:D=>B(k.id),class:"btn btn-xs border-blue-500 text-teal-500 bg-white",title:"Ver detalle"},[...y[16]||(y[16]=[s("i",{class:"las la-eye"},null,-1),L(" VER ",-1)])],8,h1),s("button",{onClick:D=>G(k.id),class:"btn btn-xs border-red-500 text-red-500 bg-white",title:"Generar PDF"},[...y[17]||(y[17]=[s("i",{class:"las la-file-pdf"},null,-1),L(" PDF ",-1)])],8,b1),s("button",{onClick:D=>k.status==="DRAFT"?me(n).push({name:"custody-chain-form",params:{id:k.id}}):null,class:le(["btn btn-xs border-orange-500 text-orange-500 bg-white",{"btn-disabled opacity-50 cursor-not-allowed":k.status!=="DRAFT"}]),title:k.status==="DRAFT"?"Editar cadena":"No se puede editar una cadena cerrada",disabled:k.status!=="DRAFT"},[...y[18]||(y[18]=[s("i",{class:"las la-edit"},null,-1),L(" EDITAR ",-1)])],10,m1)])])]))),128))]),d.value.length>0?(w(),$("tfoot",g1,[s("tr",v1,[y[19]||(y[19]=s("td",{colspan:"6",class:"p-2 border border-gray-300 text-right"},"TOTALES:",-1)),s("td",y1,h(x.value)+" Mins",1),y[20]||(y[20]=s("td",{colspan:"3",class:"p-2 border border-gray-300"},null,-1)),s("td",x1,h(b.value.toFixed(2)),1),s("td",w1,h(A.value.toFixed(2)),1),s("td",$1,h(v.value.toFixed(2)),1),y[21]||(y[21]=s("td",{colspan:"2",class:"p-2 border border-gray-300"},null,-1))])])):te("",!0)])])]),s("div",E1,[s("div",C1,[y[23]||(y[23]=s("div",{class:"stat-title"},"Total Cadenas",-1)),s("div",S1,h(d.value.length),1),y[24]||(y[24]=s("div",{class:"stat-desc"},"Registradas",-1))]),s("div",k1,[y[25]||(y[25]=s("div",{class:"stat-title"},"Horas Totales",-1)),s("div",R1,h(x.value),1),y[26]||(y[26]=s("div",{class:"stat-desc"},"Horas trabajadas",-1))]),s("div",A1,[y[27]||(y[27]=s("div",{class:"stat-title"},"Total Galones",-1)),s("div",D1,h(b.value.toFixed(2)),1),y[28]||(y[28]=s("div",{class:"stat-desc"},"Acumulados",-1))]),s("div",O1,[y[29]||(y[29]=s("div",{class:"stat-title"},"Total Barriles",-1)),s("div",I1,h(A.value.toFixed(2)),1),y[30]||(y[30]=s("div",{class:"stat-desc"},"Acumulados",-1))]),s("div",P1,[y[31]||(y[31]=s("div",{class:"stat-title"},"Total M",-1)),s("div",T1,h(v.value.toFixed(2)),1),y[32]||(y[32]=s("div",{class:"stat-desc"},"Acumulados",-1))])])]))}},j1={class:"container mx-auto p-4"},F1={key:0,class:"alert alert-error shadow-lg mb-4"},M1={key:1,class:"alert alert-success shadow-lg mb-4"},V1={class:"card-body"},U1={class:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200"},L1={class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},q1={class:"flex items-center gap-3 mt-1"},H1={class:"text-gray-600 text-sm"},B1={key:0,class:"badge badge-primary badge-lg gap-2"},G1={class:"font-bold"},W1={class:"flex gap-2 items-center"},K1={class:"form-control w-48"},Y1={class:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg mb-4"},z1={class:"grid grid-cols-2 md:grid-cols-6 gap-3"},Q1={class:"bg-white p-3 rounded-lg shadow-sm text-center"},J1={class:"text-2xl font-bold text-blue-700 mt-1"},X1={class:"bg-white p-3 rounded-lg shadow-sm text-center"},Z1={class:"text-2xl font-bold text-green-700 mt-1"},ex={class:"bg-white p-3 rounded-lg shadow-sm text-center"},tx={class:"text-2xl font-bold text-purple-700 mt-1"},sx={class:"bg-white p-3 rounded-lg shadow-sm text-center"},nx={class:"text-2xl font-bold text-gray-700 mt-1"},ox={class:"bg-white p-3 rounded-lg shadow-sm text-center"},lx={class:"text-2xl font-bold text-orange-600 mt-1"},rx={class:"bg-white p-3 rounded-lg shadow-sm text-center"},ax={class:"text-2xl font-bold text-red-700 mt-1"},ix={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},cx={class:"form-control w-full"},dx={class:"form-control w-full"},ux={key:0,class:"label"},fx={class:"label-text-alt text-error"},px={class:"form-control w-full"},_x={key:0,class:"label"},hx={class:"label-text-alt text-error"},bx={class:"form-control w-full"},mx=["value"],gx={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},vx={class:"form-control w-full"},yx=["value"],xx={class:"form-control w-full"},wx={class:"form-control w-full"},$x={class:"form-control w-full"},Ex={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Cx={class:"form-control w-full"},Sx={class:"form-control w-full md:col-span-3"},kx={class:"text-sm"},Rx={class:"overflow-x-auto"},Ax={class:"table table-zebra w-full"},Dx={class:"bg-lime-800 text-white text-center"},Ox={class:"border"},Ix=["checked"],Px={key:0},Tx={class:"border text-center"},Nx=["checked","onChange"],jx={class:"border text-center"},Fx={class:"border"},Mx={class:"border"},Vx={class:"border text-center"},Ux={class:"border text-right"},Lx={class:"border text-center"},qx={class:"border text-center"},Hx={key:0},Bx={class:"bg-gray-200 font-semibold"},Gx={class:"border text-center"},Wx={class:"badge badge-sm badge-primary"},Kx={class:"border text-right"},Yx={colspan:"2",class:"border text-center"},zx={class:"form-control w-full"},Qx={class:"label"},Jx={class:"label-text-alt text-gray-500"},Xx={class:"bg-gray-50 p-4 rounded-lg flex items-center justify-between"},Zx={class:"flex gap-6 text-sm"},e2={class:"font-bold text-lg ml-2"},t2={class:"font-bold text-lg ml-2"},s2={class:"font-bold text-xl text-red-700 ml-2"},n2={class:"flex gap-3"},o2=["disabled"],l2={key:0,class:"loading loading-spinner loading-sm"},r2={key:1,class:"las la-save text-lg"},a2={__name:"SheetProjectForm",setup(e){const t=cs(),n=go(),o=vo(),l=Fe(),r=ds(),a=pe(!1),i=Z(()=>l.project),d=Z(()=>r.resourcesProject||[]),_=pe(n.params.id?parseInt(n.params.id):null),f=Z(()=>_.value!==null),u=Z(()=>o.newSheetProject),c=pe({total_gallons:0,total_barrels:0,total_cubic_meters:0,subtotal:0,tax_amount:0,total:0}),b=pe(""),A=pe(""),v=Z(()=>{if(!u.value.period_start||!u.value.period_end)return"";const q=new Date(u.value.period_start),E=new Date(u.value.period_end);return q.setHours(0,0,0,0),E.setHours(0,0,0,0),q.getTime()===E.getTime()?"Las fechas no pueden ser iguales":q>E?"La fecha de inicio debe ser menor que la fecha de fin":""}),x=Z(()=>{if(!u.value.period_start||!u.value.period_end)return 0;const q=new Date(u.value.period_start),E=new Date(u.value.period_end),N=Math.abs(E-q);return Math.ceil(N/(1e3*60*60*24))+1}),U=[{value:"ALQUILER",label:"Alquiler"},{value:"MANTENIMIENTO",label:"Mantenimiento"},{value:"ALQUILER Y MANTENIMIENTO",label:"Alquiler y Mantenimiento"}],B=[{value:"IN_PROGRESS",label:"En Progreso"},{value:"INVOICED",label:"Facturado"},{value:"CANCELLED",label:"Cancelado"}],K=Z(()=>d.value.filter(q=>q.is_active)),G=Z(()=>K.value.filter(q=>q.is_selected)),Y=Z(()=>K.value.length>0&&K.value.every(q=>q.is_selected)),y=()=>{const q=!Y.value;K.value.forEach(E=>{E.is_selected=q})},k=q=>{q.is_selected=!q.is_selected},D=()=>{console.log("Adjuntar archivo de planilla")},ee=()=>{console.log("Adjuntar certificado de disposicin final")};_t(async()=>{if(await l.fetchProjectData(),await r.fetchResourcesProject(),f.value){const q=o.getSheetProjectById(_.value);q?(Object.assign(o.newSheetProject,{id:q.id,project:q.project?.id||i.value.id,period_start:q.period_start||"",period_end:q.period_end||"",issue_date:q.issue_date||"",service_type:q.service_type||"ALQUILER Y MANTENIMIENTO",status:q.status||"IN_PROGRESS",series_code:q.series_code||"PSL-PS-0000-0000",contact_reference:q.contact_reference||"",contact_phone_reference:q.contact_phone_reference||"",client_po_reference:q.client_po_reference||"",final_disposition_reference:q.final_disposition_reference||"",invoice_reference:q.invoice_reference||"",notes:q.notes||""}),c.value={total_gallons:q.total_gallons||0,total_barrels:q.total_barrels||0,total_cubic_meters:q.total_cubic_meters||0,subtotal:q.subtotal||0,tax_amount:q.tax_amount||0,total:q.total||0}):b.value="Planilla no encontrada"}else o.initializeNewSheetProject(i.value);if(f.value){const q=o.getSheetProjectById(_.value);if(q&&q.details){const E={};for(const N of q.details){const j=N.project_resource_item?.id;j&&(E[j]||(E[j]=[]),E[j].push(N.id))}for(const N of d.value.filter(j=>j.is_active))E[N.id]&&E[N.id].length>0?(N.is_selected=!0,N.detail_id=E[N.id].shift()):(N.is_selected=!1,N.detail_id=0)}}else d.value.filter(q=>q.is_active).forEach(q=>{q.is_selected=!0,q.detail_id=0})});const T=async()=>{b.value="",A.value="",a.value=!0;try{if(!u.value.period_start)throw new Error("La fecha de inicio del perodo es requerida");if(!u.value.period_end)throw new Error("La fecha de fin del perodo es requerida");if(!u.value.service_type)throw new Error("El tipo de servicio es requerido");if(G.value.length===0)throw new Error("Debes seleccionar al menos un recurso para la planilla");if(i.value.end_date){const F=new Date(i.value.end_date),se=new Date(u.value.period_start),ie=new Date(u.value.period_end);if(se>F)throw new Error(`La fecha de inicio del perodo no puede ser posterior a la fecha de fin del proyecto (${new Date(i.value.end_date).toLocaleDateString("es-EC")})`);if(ie>F)throw new Error(`La fecha de fin del perodo no puede ser posterior a la fecha de fin del proyecto (${new Date(i.value.end_date).toLocaleDateString("es-EC")})`)}const q=new Date(u.value.period_start),E=new Date(u.value.period_end);if(q.setHours(0,0,0,0),E.setHours(0,0,0,0),q.getTime()===E.getTime())throw new Error("Las fechas de inicio y fin del perodo no pueden ser iguales");if(q>E)throw new Error("La fecha de inicio del perodo debe ser menor que la fecha de fin");const N={project:u.value.project,period_start:u.value.period_start,period_end:u.value.period_end,service_type:u.value.service_type,status:u.value.status||"IN_PROGRESS",series_code:u.value.series_code||"PSL-PS-00000-00",contact_reference:u.value.contact_reference||null,contact_phone_reference:u.value.contact_phone_reference||null,client_po_reference:u.value.client_po_reference||null,invoice_reference:u.value.invoice_reference||null,final_disposition_reference:u.value.final_disposition_reference||null};f.value&&(N.id=u.value.id);let j;f.value?(await o.updateSheetProject(N,G.value),j=N.id,A.value="Planilla actualizada exitosamente"):(j=await o.addSheetProject(N,G.value),A.value=`Planilla creada exitosamente con ID: ${j}`),setTimeout(()=>{t.push({name:"projects-detail"})},1500)}catch(q){console.error("Error al guardar planilla:",q),b.value=q.message||"Error al guardar la planilla"}finally{a.value=!1}};return(q,E)=>(w(),$("div",j1,[b.value?(w(),$("div",F1,[s("div",null,[E[12]||(E[12]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("span",null,h(b.value),1)])])):te("",!0),A.value?(w(),$("div",M1,[s("div",null,[E[13]||(E[13]=s("i",{class:"las la-check-circle text-2xl"},null,-1)),s("span",null,h(A.value),1)])])):te("",!0),s("form",{onSubmit:Os(T,["prevent"]),class:"card bg-base-100 shadow-xl border border-gray-200 rounded-lg"},[s("div",V1,[s("div",U1,[s("div",null,[s("h1",L1,[E[14]||(E[14]=s("i",{class:"las la-file-invoice text-blue-600"},null,-1)),L(" "+h(f.value?`Planilla ${u.value.series_code}`:"Nueva Planilla")+"  Proyecto #"+h(i.value?.id),1)]),s("div",q1,[s("p",H1,h(i.value?.partner_name||"")+"  "+h(i.value?.location||""),1),x.value>0?(w(),$("div",B1,[E[15]||(E[15]=s("i",{class:"las la-calendar-check"},null,-1)),E[16]||(E[16]=s("span",{class:"font-semibold"},"Das de Ejecucin:",-1)),s("span",G1,h(x.value),1)])):te("",!0)])]),s("div",W1,[s("button",{type:"button",onClick:D,class:"btn btn-info gap-2"},[...E[17]||(E[17]=[s("i",{class:"las la-file-pdf text-xl"},null,-1),L(" Adjuntar Planilla PDF ",-1)])]),s("button",{type:"button",onClick:ee,class:"btn btn-warning gap-2"},[...E[18]||(E[18]=[s("i",{class:"las la-file-pdf text-xl"},null,-1),L(" Adjuntar Cert. Disp. Final ",-1)])]),s("div",K1,[ne(s("input",{"onUpdate:modelValue":E[0]||(E[0]=N=>u.value.series_code=N),type:"text",class:"input input-bordered input-sm w-full font-bold text-red-800 font-mono text-[16px]",readonly:""},null,512),[[he,u.value.series_code]])])])]),s("div",Y1,[E[25]||(E[25]=s("h3",{class:"font-semibold text-gray-700 mb-3 flex items-center gap-2"},[s("i",{class:"las la-chart-bar text-blue-600"}),L(" Estadsticas de la Planilla ")],-1)),s("div",z1,[s("div",Q1,[E[19]||(E[19]=s("div",{class:"text-xs text-gray-500 font-medium uppercase"},"Galones",-1)),s("div",J1,h(c.value.total_gallons),1)]),s("div",X1,[E[20]||(E[20]=s("div",{class:"text-xs text-gray-500 font-medium uppercase"},"Barriles",-1)),s("div",Z1,h(c.value.total_barrels),1)]),s("div",ex,[E[21]||(E[21]=s("div",{class:"text-xs text-gray-500 font-medium uppercase"},"m",-1)),s("div",tx,h(c.value.total_cubic_meters),1)]),s("div",sx,[E[22]||(E[22]=s("div",{class:"text-xs text-gray-500 font-medium uppercase"},"Subtotal",-1)),s("div",nx,"$"+h(Number(c.value.subtotal).toFixed(2)),1)]),s("div",ox,[E[23]||(E[23]=s("div",{class:"text-xs text-gray-500 font-medium uppercase"},"IVA",-1)),s("div",lx,"$"+h(Number(c.value.tax_amount).toFixed(2)),1)]),s("div",rx,[E[24]||(E[24]=s("div",{class:"text-xs text-gray-500 font-medium uppercase"},"Total",-1)),s("div",ax,"$"+h(Number(c.value.total).toFixed(2)),1)])])]),E[51]||(E[51]=s("div",{class:"divider"},"Informacin de la Planilla",-1)),s("div",ix,[s("div",cx,[E[26]||(E[26]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Fecha Emisin")],-1)),ne(s("input",{"onUpdate:modelValue":E[1]||(E[1]=N=>u.value.issue_date=N),type:"date",class:"input input-bordered w-full"},null,512),[[he,u.value.issue_date]])]),s("div",dx,[E[27]||(E[27]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Inicio Perodo *")],-1)),ne(s("input",{"onUpdate:modelValue":E[2]||(E[2]=N=>u.value.period_start=N),type:"date",class:le(["input input-bordered w-full",{"input-error":!u.value.period_start||v.value}]),required:""},null,2),[[he,u.value.period_start]]),v.value&&u.value.period_start?(w(),$("label",ux,[s("span",fx,h(v.value),1)])):te("",!0)]),s("div",px,[E[28]||(E[28]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Fin Perodo *")],-1)),ne(s("input",{"onUpdate:modelValue":E[3]||(E[3]=N=>u.value.period_end=N),type:"date",class:le(["input input-bordered w-full",{"input-error":!u.value.period_end||v.value}]),required:""},null,2),[[he,u.value.period_end]]),v.value&&u.value.period_end?(w(),$("label",_x,[s("span",hx,h(v.value),1)])):te("",!0)]),s("div",bx,[E[29]||(E[29]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Estado")],-1)),ne(s("select",{"onUpdate:modelValue":E[4]||(E[4]=N=>u.value.status=N),class:"select select-bordered w-full"},[(w(),$(de,null,ye(B,N=>s("option",{key:N.value,value:N.value},h(N.label),9,mx)),64))],512),[[wt,u.value.status]])])]),E[52]||(E[52]=s("div",{class:"divider"},"Tipo de Servicio y Contacto",-1)),s("div",gx,[s("div",vx,[E[30]||(E[30]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Tipo Servicio *")],-1)),ne(s("select",{"onUpdate:modelValue":E[5]||(E[5]=N=>u.value.service_type=N),class:"select select-bordered w-full",required:""},[(w(),$(de,null,ye(U,N=>s("option",{key:N.value,value:N.value},h(N.label),9,yx)),64))],512),[[wt,u.value.service_type]])]),s("div",xx,[E[31]||(E[31]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Contacto")],-1)),ne(s("input",{"onUpdate:modelValue":E[6]||(E[6]=N=>u.value.contact_reference=N),type:"text",class:"input input-bordered w-full",placeholder:"Nombre contacto"},null,512),[[he,u.value.contact_reference]])]),s("div",wx,[E[32]||(E[32]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Telfono")],-1)),ne(s("input",{"onUpdate:modelValue":E[7]||(E[7]=N=>u.value.contact_phone_reference=N),type:"text",class:"input input-bordered w-full",placeholder:"+593..."},null,512),[[he,u.value.contact_phone_reference]])]),s("div",$x,[E[33]||(E[33]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"PO Cliente")],-1)),ne(s("input",{"onUpdate:modelValue":E[8]||(E[8]=N=>u.value.client_po_reference=N),type:"text",class:"input input-bordered w-full",placeholder:"PO-2026-001"},null,512),[[he,u.value.client_po_reference]])])]),E[53]||(E[53]=s("div",{class:"divider"},"Referencias Adicionales",-1)),s("div",Ex,[s("div",Cx,[E[34]||(E[34]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Ref. Factura")],-1)),ne(s("input",{"onUpdate:modelValue":E[9]||(E[9]=N=>u.value.invoice_reference=N),type:"text",class:"input input-bordered w-full",placeholder:"FAC-2026-001"},null,512),[[he,u.value.invoice_reference]])]),s("div",Sx,[E[35]||(E[35]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Disposicin Final")],-1)),ne(s("input",{"onUpdate:modelValue":E[10]||(E[10]=N=>u.value.final_disposition_reference=N),type:"text",class:"input input-bordered w-full",placeholder:"Planta de Tratamiento"},null,512),[[he,u.value.final_disposition_reference]])])]),E[54]||(E[54]=s("div",{class:"divider"},"Recursos Asignados al Proyecto",-1)),s("div",{class:le(["alert",G.value.length>0?"alert-info":"alert-warning"])},[s("i",{class:le(["las text-xl",G.value.length>0?"la-info-circle":"la-exclamation-triangle"])},null,2),s("div",null,[E[36]||(E[36]=s("h3",{class:"font-bold"},"Recursos Seleccionados",-1)),s("p",kx,h(G.value.length>0?`Has seleccionado ${G.value.length} de ${K.value.length} recurso(s) activos para esta planilla.`:"Selecciona al menos un recurso activo para incluir en la planilla."),1)])],2),s("div",Rx,[s("table",Ax,[s("thead",null,[s("tr",Dx,[s("th",Ox,[s("input",{type:"checkbox",class:"checkbox checkbox-sm",checked:Y.value,onChange:y},null,40,Ix)]),E[37]||(E[37]=s("th",{class:"border"},"#",-1)),E[38]||(E[38]=s("th",{class:"border"},"Cdigo",-1)),E[39]||(E[39]=s("th",{class:"border"},"Nombre",-1)),E[40]||(E[40]=s("th",{class:"border"},"Tipo",-1)),E[41]||(E[41]=s("th",{class:"border"},"Costo",-1)),E[42]||(E[42]=s("th",{class:"border"},"Fecha Inicio",-1)),E[43]||(E[43]=s("th",{class:"border"},"Estado",-1))])]),s("tbody",null,[K.value.length===0?(w(),$("tr",Px,[...E[44]||(E[44]=[s("td",{colspan:"8",class:"text-center py-4 text-gray-500"}," No hay recursos activos asignados al proyecto ",-1)])])):te("",!0),(w(!0),$(de,null,ye(K.value,(N,j)=>(w(),$("tr",{key:N.id},[s("td",Tx,[s("input",{type:"checkbox",class:"checkbox checkbox-sm",checked:N.is_selected,onChange:F=>k(N)},null,40,Nx)]),s("td",jx,h(j+1),1),s("td",Fx,h(N.resource_item_code||"N/A"),1),s("td",Mx,h(N.resource_item_name||"N/A"),1),s("td",Vx,[s("span",{class:le(["badge badge-sm",N.type_resource==="EQUIPO"?"badge-primary":"badge-info"])},h(N.type_resource),3)]),s("td",Ux,"$"+h(parseFloat(N.cost||0).toFixed(2)),1),s("td",Lx,h(N.operation_start_date?new Date(N.operation_start_date).toLocaleDateString("es-EC"):"N/A"),1),s("td",qx,[s("span",{class:le(["badge badge-sm",N.is_active?"badge-success":"badge-error"])},h(N.is_active?"Activo":"Inactivo"),3)])]))),128))]),K.value.length>0?(w(),$("tfoot",Hx,[s("tr",Bx,[s("td",Gx,[s("span",Wx,h(G.value.length),1)]),E[45]||(E[45]=s("td",{colspan:"4",class:"border text-right"},"Total recursos seleccionados:",-1)),s("td",Kx,"$"+h(G.value.reduce((N,j)=>N+parseFloat(j.cost||0),0).toFixed(2)),1),s("td",Yx,h(K.value.length)+" activos",1)])])):te("",!0)])]),E[55]||(E[55]=s("div",{class:"divider"},"Notas Adicionales",-1)),s("div",zx,[s("label",Qx,[E[46]||(E[46]=s("span",{class:"label-text font-semibold"},"Notas",-1)),s("span",Jx,h((u.value.notes||"").length)+"/500",1)]),ne(s("textarea",{"onUpdate:modelValue":E[11]||(E[11]=N=>u.value.notes=N),class:"textarea textarea-bordered w-full h-24",placeholder:"Ingrese notas adicionales sobre la planilla...",maxlength:"500"},null,512),[[he,u.value.notes]])]),E[56]||(E[56]=s("div",{class:"divider"},null,-1)),s("div",Xx,[s("div",Zx,[s("div",null,[E[47]||(E[47]=s("span",{class:"text-gray-600 font-medium"},"Subtotal:",-1)),s("span",e2,"$"+h(Number(c.value.subtotal).toFixed(2)),1)]),s("div",null,[E[48]||(E[48]=s("span",{class:"text-gray-600 font-medium"},"IVA:",-1)),s("span",t2,"$"+h(Number(c.value.tax_amount).toFixed(2)),1)]),s("div",null,[E[49]||(E[49]=s("span",{class:"text-gray-600 font-medium"},"Total:",-1)),s("span",s2,"$"+h(Number(c.value.total).toFixed(2)),1)])]),s("div",n2,[Ce(me(vn),{to:"/project",class:le(["btn btn-ghost",{"btn-disabled":a.value}])},{default:kt(()=>[...E[50]||(E[50]=[s("i",{class:"las la-times text-lg"},null,-1),L(" Cancelar ",-1)])]),_:1},8,["class"]),s("button",{type:"submit",class:"btn btn-primary",disabled:a.value},[a.value?(w(),$("span",l2)):(w(),$("i",r2)),L(" "+h(a.value?f.value?"Actualizando...":"Creando...":f.value?"Actualizar Planilla":"Crear Planilla"),1)],8,o2)])])])],32)]))}},i2=Ud({history:yd("/"),routes:[{path:"/",redirect:"/project"},{path:"/project",name:"projects-detail",component:C_},{path:"/resource/form",name:"resource-form",component:mh},{path:"/custody-chain",name:"custody-chain",component:Tg},{path:"/custody-chain/form/:id?",name:"custody-chain-form",component:yy},{path:"/work-sheet/:id/",name:"sheet-project-view",component:N1},{path:"/work-sheet/form/:id?",name:"sheet-project-form",component:a2}]}),xo=Sc(Ld);xo.use(Ac());xo.use(i2);xo.mount("#vue-app");

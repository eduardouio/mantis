(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function Qn(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Re={},ts=[],pt=()=>{},xl=()=>!1,nn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Jn=e=>e.startsWith("onUpdate:"),qe=Object.assign,Xn=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ra=Object.prototype.hasOwnProperty,$e=(e,t)=>ra.call(e,t),ae=Array.isArray,ss=e=>Ts(e)==="[object Map]",cs=e=>Ts(e)==="[object Set]",Co=e=>Ts(e)==="[object Date]",fe=e=>typeof e=="function",Te=e=>typeof e=="string",ot=e=>typeof e=="symbol",Se=e=>e!==null&&typeof e=="object",wl=e=>(Se(e)||fe(e))&&fe(e.then)&&fe(e.catch),$l=Object.prototype.toString,Ts=e=>$l.call(e),aa=e=>Ts(e).slice(8,-1),Cl=e=>Ts(e)==="[object Object]",Zn=e=>Te(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ms=Qn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),on=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},ia=/-\w/g,Vt=on(e=>e.replace(ia,t=>t.slice(1).toUpperCase())),ca=/\B([A-Z])/g,Yt=on(e=>e.replace(ca,"-$1").toLowerCase()),El=on(e=>e.charAt(0).toUpperCase()+e.slice(1)),vn=on(e=>e?`on${El(e)}`:""),Ft=(e,t)=>!Object.is(e,t),Hs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Sl=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},ln=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Eo;const rn=()=>Eo||(Eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function eo(e){if(ae(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],l=Te(o)?pa(o):eo(o);if(l)for(const r in l)t[r]=l[r]}return t}else if(Te(e)||Se(e))return e}const da=/;(?![^(]*\))/g,ua=/:([^]+)/,fa=/\/\*[^]*?\*\//g;function pa(e){const t={};return e.replace(fa,"").split(da).forEach(n=>{if(n){const o=n.split(ua);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function le(e){let t="";if(Te(e))t=e;else if(ae(e))for(let n=0;n<e.length;n++){const o=le(e[n]);o&&(t+=o+" ")}else if(Se(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ha="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ba=Qn(ha);function Rl(e){return!!e||e===""}function ma(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Ns(e[o],t[o]);return n}function Ns(e,t){if(e===t)return!0;let n=Co(e),o=Co(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=ot(e),o=ot(t),n||o)return e===t;if(n=ae(e),o=ae(t),n||o)return n&&o?ma(e,t):!1;if(n=Se(e),o=Se(t),n||o){if(!n||!o)return!1;const l=Object.keys(e).length,r=Object.keys(t).length;if(l!==r)return!1;for(const a in e){const i=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(i&&!c||!i&&c||!Ns(e[a],t[a]))return!1}}return String(e)===String(t)}function to(e,t){return e.findIndex(n=>Ns(n,t))}const kl=e=>!!(e&&e.__v_isRef===!0),_=e=>Te(e)?e:e==null?"":ae(e)||Se(e)&&(e.toString===$l||!fe(e.toString))?kl(e)?_(e.value):JSON.stringify(e,Al,2):String(e),Al=(e,t)=>kl(t)?Al(e,t.value):ss(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,l],r)=>(n[yn(o,r)+" =>"]=l,n),{})}:cs(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>yn(n))}:ot(t)?yn(t):Se(t)&&!ae(t)&&!Cl(t)?String(t):t,yn=(e,t="")=>{var n;return ot(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Fe;class Dl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fe,!t&&Fe&&(this.index=(Fe.scopes||(Fe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Fe;try{return Fe=this,t()}finally{Fe=n}}}on(){++this._on===1&&(this.prevScope=Fe,Fe=this)}off(){this._on>0&&--this._on===0&&(Fe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.parent=void 0}}}function Ol(e){return new Dl(e)}function Il(){return Fe}function _a(e,t=!1){Fe&&Fe.cleanups.push(e)}let Ae;const xn=new WeakSet;class Pl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fe&&Fe.active&&Fe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xn.has(this)&&(xn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Nl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,So(this),jl(this);const t=Ae,n=nt;Ae=this,nt=!0;try{return this.fn()}finally{Ml(this),Ae=t,nt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)oo(t);this.deps=this.depsTail=void 0,So(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Pn(this)&&this.run()}get dirty(){return Pn(this)}}let Tl=0,_s,gs;function Nl(e,t=!1){if(e.flags|=8,t){e.next=gs,gs=e;return}e.next=_s,_s=e}function so(){Tl++}function no(){if(--Tl>0)return;if(gs){let t=gs;for(gs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;_s;){let t=_s;for(_s=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function jl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ml(e){let t,n=e.depsTail,o=n;for(;o;){const l=o.prevDep;o.version===-1?(o===n&&(n=l),oo(o),ga(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=l}e.deps=t,e.depsTail=n}function Pn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Cs)||(e.globalVersion=Cs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Pn(e))))return;e.flags|=2;const t=e.dep,n=Ae,o=nt;Ae=e,nt=!0;try{jl(e);const l=e.fn(e._value);(t.version===0||Ft(l,e._value))&&(e.flags|=128,e._value=l,t.version++)}catch(l){throw t.version++,l}finally{Ae=n,nt=o,Ml(e),e.flags&=-3}}function oo(e,t=!1){const{dep:n,prevSub:o,nextSub:l}=e;if(o&&(o.nextSub=l,e.prevSub=void 0),l&&(l.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)oo(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ga(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let nt=!0;const Vl=[];function Et(){Vl.push(nt),nt=!1}function St(){const e=Vl.pop();nt=e===void 0?!0:e}function So(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ae;Ae=void 0;try{t()}finally{Ae=n}}}let Cs=0;class va{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class lo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ae||!nt||Ae===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ae)n=this.activeLink=new va(Ae,this),Ae.deps?(n.prevDep=Ae.depsTail,Ae.depsTail.nextDep=n,Ae.depsTail=n):Ae.deps=Ae.depsTail=n,Ul(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Ae.depsTail,n.nextDep=void 0,Ae.depsTail.nextDep=n,Ae.depsTail=n,Ae.deps===n&&(Ae.deps=o)}return n}trigger(t){this.version++,Cs++,this.notify(t)}notify(t){so();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{no()}}}function Ul(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Ul(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ys=new WeakMap,Wt=Symbol(""),Tn=Symbol(""),Es=Symbol("");function Ue(e,t,n){if(nt&&Ae){let o=Ys.get(e);o||Ys.set(e,o=new Map);let l=o.get(n);l||(o.set(n,l=new lo),l.map=o,l.key=n),l.track()}}function yt(e,t,n,o,l,r){const a=Ys.get(e);if(!a){Cs++;return}const i=c=>{c&&c.trigger()};if(so(),t==="clear")a.forEach(i);else{const c=ae(e),h=c&&Zn(n);if(c&&n==="length"){const f=Number(o);a.forEach((u,v)=>{(v==="length"||v===Es||!ot(v)&&v>=f)&&i(u)})}else switch((n!==void 0||a.has(void 0))&&i(a.get(n)),h&&i(a.get(Es)),t){case"add":c?h&&i(a.get("length")):(i(a.get(Wt)),ss(e)&&i(a.get(Tn)));break;case"delete":c||(i(a.get(Wt)),ss(e)&&i(a.get(Tn)));break;case"set":ss(e)&&i(a.get(Wt));break}}no()}function ya(e,t){const n=Ys.get(e);return n&&n.get(t)}function Jt(e){const t=xe(e);return t===e?t:(Ue(t,"iterate",Es),tt(e)?t:t.map(Me))}function an(e){return Ue(e=xe(e),"iterate",Es),e}const xa={__proto__:null,[Symbol.iterator](){return wn(this,Symbol.iterator,Me)},concat(...e){return Jt(this).concat(...e.map(t=>ae(t)?Jt(t):t))},entries(){return wn(this,"entries",e=>(e[1]=Me(e[1]),e))},every(e,t){return _t(this,"every",e,t,void 0,arguments)},filter(e,t){return _t(this,"filter",e,t,n=>n.map(Me),arguments)},find(e,t){return _t(this,"find",e,t,Me,arguments)},findIndex(e,t){return _t(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return _t(this,"findLast",e,t,Me,arguments)},findLastIndex(e,t){return _t(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return _t(this,"forEach",e,t,void 0,arguments)},includes(...e){return $n(this,"includes",e)},indexOf(...e){return $n(this,"indexOf",e)},join(e){return Jt(this).join(e)},lastIndexOf(...e){return $n(this,"lastIndexOf",e)},map(e,t){return _t(this,"map",e,t,void 0,arguments)},pop(){return fs(this,"pop")},push(...e){return fs(this,"push",e)},reduce(e,...t){return Ro(this,"reduce",e,t)},reduceRight(e,...t){return Ro(this,"reduceRight",e,t)},shift(){return fs(this,"shift")},some(e,t){return _t(this,"some",e,t,void 0,arguments)},splice(...e){return fs(this,"splice",e)},toReversed(){return Jt(this).toReversed()},toSorted(e){return Jt(this).toSorted(e)},toSpliced(...e){return Jt(this).toSpliced(...e)},unshift(...e){return fs(this,"unshift",e)},values(){return wn(this,"values",Me)}};function wn(e,t,n){const o=an(e),l=o[t]();return o!==e&&!tt(e)&&(l._next=l.next,l.next=()=>{const r=l._next();return r.done||(r.value=n(r.value)),r}),l}const wa=Array.prototype;function _t(e,t,n,o,l,r){const a=an(e),i=a!==e&&!tt(e),c=a[t];if(c!==wa[t]){const u=c.apply(e,r);return i?Me(u):u}let h=n;a!==e&&(i?h=function(u,v){return n.call(this,Me(u),v,e)}:n.length>2&&(h=function(u,v){return n.call(this,u,v,e)}));const f=c.call(a,h,o);return i&&l?l(f):f}function Ro(e,t,n,o){const l=an(e);let r=n;return l!==e&&(tt(e)?n.length>3&&(r=function(a,i,c){return n.call(this,a,i,c,e)}):r=function(a,i,c){return n.call(this,a,Me(i),c,e)}),l[t](r,...o)}function $n(e,t,n){const o=xe(e);Ue(o,"iterate",Es);const l=o[t](...n);return(l===-1||l===!1)&&io(n[0])?(n[0]=xe(n[0]),o[t](...n)):l}function fs(e,t,n=[]){Et(),so();const o=xe(e)[t].apply(e,n);return no(),St(),o}const $a=Qn("__proto__,__v_isRef,__isVue"),Ll=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ot));function Ca(e){ot(e)||(e=String(e));const t=xe(this);return Ue(t,"has",e),t.hasOwnProperty(e)}class ql{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const l=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!l;if(n==="__v_isReadonly")return l;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(l?r?Ta:Wl:r?Gl:Bl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const a=ae(t);if(!l){let c;if(a&&(c=xa[n]))return c;if(n==="hasOwnProperty")return Ca}const i=Reflect.get(t,n,De(t)?t:o);if((ot(n)?Ll.has(n):$a(n))||(l||Ue(t,"get",n),r))return i;if(De(i)){const c=a&&Zn(n)?i:i.value;return l&&Se(c)?jn(c):c}return Se(i)?l?jn(i):js(i):i}}class Hl extends ql{constructor(t=!1){super(!1,t)}set(t,n,o,l){let r=t[n];if(!this._isShallow){const c=Ut(r);if(!tt(o)&&!Ut(o)&&(r=xe(r),o=xe(o)),!ae(t)&&De(r)&&!De(o))return c||(r.value=o),!0}const a=ae(t)&&Zn(n)?Number(n)<t.length:$e(t,n),i=Reflect.set(t,n,o,De(t)?t:l);return t===xe(l)&&(a?Ft(o,r)&&yt(t,"set",n,o):yt(t,"add",n,o)),i}deleteProperty(t,n){const o=$e(t,n);t[n];const l=Reflect.deleteProperty(t,n);return l&&o&&yt(t,"delete",n,void 0),l}has(t,n){const o=Reflect.has(t,n);return(!ot(n)||!Ll.has(n))&&Ue(t,"has",n),o}ownKeys(t){return Ue(t,"iterate",ae(t)?"length":Wt),Reflect.ownKeys(t)}}class Ea extends ql{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Sa=new Hl,Ra=new Ea,ka=new Hl(!0);const Nn=e=>e,Vs=e=>Reflect.getPrototypeOf(e);function Aa(e,t,n){return function(...o){const l=this.__v_raw,r=xe(l),a=ss(r),i=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,h=l[e](...o),f=n?Nn:t?zs:Me;return!t&&Ue(r,"iterate",c?Tn:Wt),{next(){const{value:u,done:v}=h.next();return v?{value:u,done:v}:{value:i?[f(u[0]),f(u[1])]:f(u),done:v}},[Symbol.iterator](){return this}}}}function Us(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Da(e,t){const n={get(l){const r=this.__v_raw,a=xe(r),i=xe(l);e||(Ft(l,i)&&Ue(a,"get",l),Ue(a,"get",i));const{has:c}=Vs(a),h=t?Nn:e?zs:Me;if(c.call(a,l))return h(r.get(l));if(c.call(a,i))return h(r.get(i));r!==a&&r.get(l)},get size(){const l=this.__v_raw;return!e&&Ue(xe(l),"iterate",Wt),l.size},has(l){const r=this.__v_raw,a=xe(r),i=xe(l);return e||(Ft(l,i)&&Ue(a,"has",l),Ue(a,"has",i)),l===i?r.has(l):r.has(l)||r.has(i)},forEach(l,r){const a=this,i=a.__v_raw,c=xe(i),h=t?Nn:e?zs:Me;return!e&&Ue(c,"iterate",Wt),i.forEach((f,u)=>l.call(r,h(f),h(u),a))}};return qe(n,e?{add:Us("add"),set:Us("set"),delete:Us("delete"),clear:Us("clear")}:{add(l){!t&&!tt(l)&&!Ut(l)&&(l=xe(l));const r=xe(this);return Vs(r).has.call(r,l)||(r.add(l),yt(r,"add",l,l)),this},set(l,r){!t&&!tt(r)&&!Ut(r)&&(r=xe(r));const a=xe(this),{has:i,get:c}=Vs(a);let h=i.call(a,l);h||(l=xe(l),h=i.call(a,l));const f=c.call(a,l);return a.set(l,r),h?Ft(r,f)&&yt(a,"set",l,r):yt(a,"add",l,r),this},delete(l){const r=xe(this),{has:a,get:i}=Vs(r);let c=a.call(r,l);c||(l=xe(l),c=a.call(r,l)),i&&i.call(r,l);const h=r.delete(l);return c&&yt(r,"delete",l,void 0),h},clear(){const l=xe(this),r=l.size!==0,a=l.clear();return r&&yt(l,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(l=>{n[l]=Aa(l,e,t)}),n}function ro(e,t){const n=Da(e,t);return(o,l,r)=>l==="__v_isReactive"?!e:l==="__v_isReadonly"?e:l==="__v_raw"?o:Reflect.get($e(n,l)&&l in o?n:o,l,r)}const Oa={get:ro(!1,!1)},Ia={get:ro(!1,!0)},Pa={get:ro(!0,!1)};const Bl=new WeakMap,Gl=new WeakMap,Wl=new WeakMap,Ta=new WeakMap;function Na(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ja(e){return e.__v_skip||!Object.isExtensible(e)?0:Na(aa(e))}function js(e){return Ut(e)?e:ao(e,!1,Sa,Oa,Bl)}function Kl(e){return ao(e,!1,ka,Ia,Gl)}function jn(e){return ao(e,!0,Ra,Pa,Wl)}function ao(e,t,n,o,l){if(!Se(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=ja(e);if(r===0)return e;const a=l.get(e);if(a)return a;const i=new Proxy(e,r===2?o:n);return l.set(e,i),i}function $t(e){return Ut(e)?$t(e.__v_raw):!!(e&&e.__v_isReactive)}function Ut(e){return!!(e&&e.__v_isReadonly)}function tt(e){return!!(e&&e.__v_isShallow)}function io(e){return e?!!e.__v_raw:!1}function xe(e){const t=e&&e.__v_raw;return t?xe(t):e}function co(e){return!$e(e,"__v_skip")&&Object.isExtensible(e)&&Sl(e,"__v_skip",!0),e}const Me=e=>Se(e)?js(e):e,zs=e=>Se(e)?jn(e):e;function De(e){return e?e.__v_isRef===!0:!1}function pe(e){return Yl(e,!1)}function Ma(e){return Yl(e,!0)}function Yl(e,t){return De(e)?e:new Fa(e,t)}class Fa{constructor(t,n){this.dep=new lo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:xe(t),this._value=n?t:Me(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||tt(t)||Ut(t);t=o?t:xe(t),Ft(t,n)&&(this._rawValue=t,this._value=o?t:Me(t),this.dep.trigger())}}function ye(e){return De(e)?e.value:e}const Va={get:(e,t,n)=>t==="__v_raw"?e:ye(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const l=e[t];return De(l)&&!De(n)?(l.value=n,!0):Reflect.set(e,t,n,o)}};function zl(e){return $t(e)?e:new Proxy(e,Va)}function Ua(e){const t=ae(e)?new Array(e.length):{};for(const n in e)t[n]=Ql(e,n);return t}class La{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return ya(xe(this._object),this._key)}}class qa{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ha(e,t,n){return De(e)?e:fe(e)?new qa(e):Se(e)&&arguments.length>1?Ql(e,t,n):pe(e)}function Ql(e,t,n){const o=e[t];return De(o)?o:new La(e,t,n)}class Ba{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new lo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Ae!==this)return Nl(this,!0),!0}get value(){const t=this.dep.track();return Fl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ga(e,t,n=!1){let o,l;return fe(e)?o=e:(o=e.get,l=e.set),new Ba(o,l,n)}const Ls={},Qs=new WeakMap;let Ht;function Wa(e,t=!1,n=Ht){if(n){let o=Qs.get(n);o||Qs.set(n,o=[]),o.push(e)}}function Ka(e,t,n=Re){const{immediate:o,deep:l,once:r,scheduler:a,augmentJob:i,call:c}=n,h=J=>l?J:tt(J)||l===!1||l===0?xt(J,1):xt(J);let f,u,v,d,k=!1,m=!1;if(De(e)?(u=()=>e.value,k=tt(e)):$t(e)?(u=()=>h(e),k=!0):ae(e)?(m=!0,k=e.some(J=>$t(J)||tt(J)),u=()=>e.map(J=>{if(De(J))return J.value;if($t(J))return h(J);if(fe(J))return c?c(J,2):J()})):fe(e)?t?u=c?()=>c(e,2):e:u=()=>{if(v){Et();try{v()}finally{St()}}const J=Ht;Ht=f;try{return c?c(e,3,[d]):e(d)}finally{Ht=J}}:u=pt,t&&l){const J=u,z=l===!0?1/0:l;u=()=>xt(J(),z)}const p=Il(),U=()=>{f.stop(),p&&p.active&&Xn(p.effects,f)};if(r&&t){const J=t;t=(...z)=>{J(...z),U()}}let B=m?new Array(e.length).fill(Ls):Ls;const Z=J=>{if(!(!(f.flags&1)||!f.dirty&&!J))if(t){const z=f.run();if(l||k||(m?z.some((S,O)=>Ft(S,B[O])):Ft(z,B))){v&&v();const S=Ht;Ht=f;try{const O=[z,B===Ls?void 0:m&&B[0]===Ls?[]:B,d];B=z,c?c(t,3,O):t(...O)}finally{Ht=S}}}else f.run()};return i&&i(Z),f=new Pl(u),f.scheduler=a?()=>a(Z,!1):Z,d=J=>Wa(J,!1,f),v=f.onStop=()=>{const J=Qs.get(f);if(J){if(c)c(J,4);else for(const z of J)z();Qs.delete(f)}},t?o?Z(!0):B=f.run():a?a(Z.bind(null,!0),!0):f.run(),U.pause=f.pause.bind(f),U.resume=f.resume.bind(f),U.stop=U,U}function xt(e,t=1/0,n){if(t<=0||!Se(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,De(e))xt(e.value,t,n);else if(ae(e))for(let o=0;o<e.length;o++)xt(e[o],t,n);else if(cs(e)||ss(e))e.forEach(o=>{xt(o,t,n)});else if(Cl(e)){for(const o in e)xt(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&xt(e[o],t,n)}return e}function Ms(e,t,n,o){try{return o?e(...o):e()}catch(l){cn(l,t,n)}}function ht(e,t,n,o){if(fe(e)){const l=Ms(e,t,n,o);return l&&wl(l)&&l.catch(r=>{cn(r,t,n)}),l}if(ae(e)){const l=[];for(let r=0;r<e.length;r++)l.push(ht(e[r],t,n,o));return l}}function cn(e,t,n,o=!0){const l=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Re;if(t){let i=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const f=i.ec;if(f){for(let u=0;u<f.length;u++)if(f[u](e,c,h)===!1)return}i=i.parent}if(r){Et(),Ms(r,null,10,[e,c,h]),St();return}}Ya(e,n,l,o,a)}function Ya(e,t,n,o=!0,l=!1){if(l)throw e;console.error(e)}const Ge=[];let dt=-1;const ns=[];let Pt=null,Zt=0;const Jl=Promise.resolve();let Js=null;function dn(e){const t=Js||Jl;return e?t.then(this?e.bind(this):e):t}function za(e){let t=dt+1,n=Ge.length;for(;t<n;){const o=t+n>>>1,l=Ge[o],r=Ss(l);r<e||r===e&&l.flags&2?t=o+1:n=o}return t}function uo(e){if(!(e.flags&1)){const t=Ss(e),n=Ge[Ge.length-1];!n||!(e.flags&2)&&t>=Ss(n)?Ge.push(e):Ge.splice(za(t),0,e),e.flags|=1,Xl()}}function Xl(){Js||(Js=Jl.then(er))}function Qa(e){ae(e)?ns.push(...e):Pt&&e.id===-1?Pt.splice(Zt+1,0,e):e.flags&1||(ns.push(e),e.flags|=1),Xl()}function ko(e,t,n=dt+1){for(;n<Ge.length;n++){const o=Ge[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;Ge.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Zl(e){if(ns.length){const t=[...new Set(ns)].sort((n,o)=>Ss(n)-Ss(o));if(ns.length=0,Pt){Pt.push(...t);return}for(Pt=t,Zt=0;Zt<Pt.length;Zt++){const n=Pt[Zt];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Pt=null,Zt=0}}const Ss=e=>e.id==null?e.flags&2?-1:1/0:e.id;function er(e){try{for(dt=0;dt<Ge.length;dt++){const t=Ge[dt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ms(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;dt<Ge.length;dt++){const t=Ge[dt];t&&(t.flags&=-2)}dt=-1,Ge.length=0,Zl(),Js=null,(Ge.length||ns.length)&&er()}}let Le=null,tr=null;function Xs(e){const t=Le;return Le=e,tr=e&&e.type.__scopeId||null,t}function Rt(e,t=Le,n){if(!t||e._n)return e;const o=(...l)=>{o._d&&tn(-1);const r=Xs(t);let a;try{a=e(...l)}finally{Xs(r),o._d&&tn(1)}return a};return o._n=!0,o._c=!0,o._d=!0,o}function se(e,t){if(Le===null)return e;const n=hn(Le),o=e.dirs||(e.dirs=[]);for(let l=0;l<t.length;l++){let[r,a,i,c=Re]=t[l];r&&(fe(r)&&(r={mounted:r,updated:r}),r.deep&&xt(a),o.push({dir:r,instance:n,value:a,oldValue:void 0,arg:i,modifiers:c}))}return e}function Lt(e,t,n,o){const l=e.dirs,r=t&&t.dirs;for(let a=0;a<l.length;a++){const i=l[a];r&&(i.oldValue=r[a].value);let c=i.dir[o];c&&(Et(),ht(c,n,8,[e.el,i,e,t]),St())}}const Ja=Symbol("_vte"),Xa=e=>e.__isTeleport,Za=Symbol("_leaveCb");function fo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,fo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function sr(e,t){return fe(e)?qe({name:e.name},t,{setup:e}):e}function nr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Zs=new WeakMap;function vs(e,t,n,o,l=!1){if(ae(e)){e.forEach((k,m)=>vs(k,t&&(ae(t)?t[m]:t),n,o,l));return}if(os(o)&&!l){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&vs(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?hn(o.component):o.el,a=l?null:r,{i,r:c}=e,h=t&&t.r,f=i.refs===Re?i.refs={}:i.refs,u=i.setupState,v=xe(u),d=u===Re?xl:k=>$e(v,k);if(h!=null&&h!==c){if(Ao(t),Te(h))f[h]=null,d(h)&&(u[h]=null);else if(De(h)){h.value=null;const k=t;k.k&&(f[k.k]=null)}}if(fe(c))Ms(c,i,12,[a,f]);else{const k=Te(c),m=De(c);if(k||m){const p=()=>{if(e.f){const U=k?d(c)?u[c]:f[c]:c.value;if(l)ae(U)&&Xn(U,r);else if(ae(U))U.includes(r)||U.push(r);else if(k)f[c]=[r],d(c)&&(u[c]=f[c]);else{const B=[r];c.value=B,e.k&&(f[e.k]=B)}}else k?(f[c]=a,d(c)&&(u[c]=a)):m&&(c.value=a,e.k&&(f[e.k]=a))};if(a){const U=()=>{p(),Zs.delete(e)};U.id=-1,Zs.set(e,U),Xe(U,n)}else Ao(e),p()}}}function Ao(e){const t=Zs.get(e);t&&(t.flags|=8,Zs.delete(e))}rn().requestIdleCallback;rn().cancelIdleCallback;const os=e=>!!e.type.__asyncLoader,or=e=>e.type.__isKeepAlive;function ei(e,t){lr(e,"a",t)}function ti(e,t){lr(e,"da",t)}function lr(e,t,n=We){const o=e.__wdc||(e.__wdc=()=>{let l=n;for(;l;){if(l.isDeactivated)return;l=l.parent}return e()});if(un(t,o,n),n){let l=n.parent;for(;l&&l.parent;)or(l.parent.vnode)&&si(o,t,n,l),l=l.parent}}function si(e,t,n,o){const l=un(t,e,o,!0);rr(()=>{Xn(o[t],l)},n)}function un(e,t,n=We,o=!1){if(n){const l=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Et();const i=Fs(n),c=ht(t,n,e,a);return i(),St(),c});return o?l.unshift(r):l.push(r),r}}const Dt=e=>(t,n=We)=>{(!As||e==="sp")&&un(e,(...o)=>t(...o),n)},ni=Dt("bm"),bt=Dt("m"),oi=Dt("bu"),li=Dt("u"),ri=Dt("bum"),rr=Dt("um"),ai=Dt("sp"),ii=Dt("rtg"),ci=Dt("rtc");function di(e,t=We){un("ec",e,t)}const ui=Symbol.for("v-ndc");function _e(e,t,n,o){let l;const r=n,a=ae(e);if(a||Te(e)){const i=a&&$t(e);let c=!1,h=!1;i&&(c=!tt(e),h=Ut(e),e=an(e)),l=new Array(e.length);for(let f=0,u=e.length;f<u;f++)l[f]=t(c?h?zs(Me(e[f])):Me(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){l=new Array(e);for(let i=0;i<e;i++)l[i]=t(i+1,i,void 0,r)}else if(Se(e))if(e[Symbol.iterator])l=Array.from(e,(i,c)=>t(i,c,void 0,r));else{const i=Object.keys(e);l=new Array(i.length);for(let c=0,h=i.length;c<h;c++){const f=i[c];l[c]=t(e[f],f,c,r)}}else l=[];return l}function fi(e,t,n={},o,l){if(Le.ce||Le.parent&&os(Le.parent)&&Le.parent.ce){const h=Object.keys(n).length>0;return x(),At(re,null,[Ee("slot",n,o)],h?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),x();const a=r&&ar(r(n)),i=n.key||a&&a.key,c=At(re,{key:(i&&!ot(i)?i:`_${t}`)+(!a&&o?"_fb":"")},a||[],a&&e._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),r&&r._c&&(r._d=!0),c}function ar(e){return e.some(t=>ks(t)?!(t.type===kt||t.type===re&&!ar(t.children)):!0)?e:null}const Mn=e=>e?Ar(e)?hn(e):Mn(e.parent):null,ys=qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Mn(e.parent),$root:e=>Mn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>cr(e),$forceUpdate:e=>e.f||(e.f=()=>{uo(e.update)}),$nextTick:e=>e.n||(e.n=dn.bind(e.proxy)),$watch:e=>Ti.bind(e)}),Cn=(e,t)=>e!==Re&&!e.__isScriptSetup&&$e(e,t),pi={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:l,props:r,accessCache:a,type:i,appContext:c}=e;let h;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return o[t];case 2:return l[t];case 4:return n[t];case 3:return r[t]}else{if(Cn(o,t))return a[t]=1,o[t];if(l!==Re&&$e(l,t))return a[t]=2,l[t];if((h=e.propsOptions[0])&&$e(h,t))return a[t]=3,r[t];if(n!==Re&&$e(n,t))return a[t]=4,n[t];Fn&&(a[t]=0)}}const f=ys[t];let u,v;if(f)return t==="$attrs"&&Ue(e.attrs,"get",""),f(e);if((u=i.__cssModules)&&(u=u[t]))return u;if(n!==Re&&$e(n,t))return a[t]=4,n[t];if(v=c.config.globalProperties,$e(v,t))return v[t]},set({_:e},t,n){const{data:o,setupState:l,ctx:r}=e;return Cn(l,t)?(l[t]=n,!0):o!==Re&&$e(o,t)?(o[t]=n,!0):$e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:l,propsOptions:r,type:a}},i){let c,h;return!!(n[i]||e!==Re&&i[0]!=="$"&&$e(e,i)||Cn(t,i)||(c=r[0])&&$e(c,i)||$e(o,i)||$e(ys,i)||$e(l.config.globalProperties,i)||(h=a.__cssModules)&&h[i])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:$e(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Do(e){return ae(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Fn=!0;function hi(e){const t=cr(e),n=e.proxy,o=e.ctx;Fn=!1,t.beforeCreate&&Oo(t.beforeCreate,e,"bc");const{data:l,computed:r,methods:a,watch:i,provide:c,inject:h,created:f,beforeMount:u,mounted:v,beforeUpdate:d,updated:k,activated:m,deactivated:p,beforeDestroy:U,beforeUnmount:B,destroyed:Z,unmounted:J,render:z,renderTracked:S,renderTriggered:O,errorCaptured:Q,serverPrefetch:E,expose:T,inheritAttrs:M,components:ce,directives:N,filters:me}=t;if(h&&bi(h,o,null),a)for(const L in a){const ue=a[L];fe(ue)&&(o[L]=ue.bind(n))}if(l){const L=l.call(n,n);Se(L)&&(e.data=js(L))}if(Fn=!0,r)for(const L in r){const ue=r[L],Ke=fe(ue)?ue.bind(n,n):fe(ue.get)?ue.get.bind(n,n):pt,Ye=!fe(ue)&&fe(ue.set)?ue.set.bind(n):pt,et=ee({get:Ke,set:Ye});Object.defineProperty(o,L,{enumerable:!0,configurable:!0,get:()=>et.value,set:je=>et.value=je})}if(i)for(const L in i)ir(i[L],o,n,L);if(c){const L=fe(c)?c.call(n):c;Reflect.ownKeys(L).forEach(ue=>{Bs(ue,L[ue])})}f&&Oo(f,e,"c");function I(L,ue){ae(ue)?ue.forEach(Ke=>L(Ke.bind(n))):ue&&L(ue.bind(n))}if(I(ni,u),I(bt,v),I(oi,d),I(li,k),I(ei,m),I(ti,p),I(di,Q),I(ci,S),I(ii,O),I(ri,B),I(rr,J),I(ai,E),ae(T))if(T.length){const L=e.exposed||(e.exposed={});T.forEach(ue=>{Object.defineProperty(L,ue,{get:()=>n[ue],set:Ke=>n[ue]=Ke,enumerable:!0})})}else e.exposed||(e.exposed={});z&&e.render===pt&&(e.render=z),M!=null&&(e.inheritAttrs=M),ce&&(e.components=ce),N&&(e.directives=N),E&&nr(e)}function bi(e,t,n=pt){ae(e)&&(e=Vn(e));for(const o in e){const l=e[o];let r;Se(l)?"default"in l?r=st(l.from||o,l.default,!0):r=st(l.from||o):r=st(l),De(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[o]=r}}function Oo(e,t,n){ht(ae(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function ir(e,t,n,o){let l=o.includes(".")?wr(n,o):()=>n[o];if(Te(e)){const r=t[e];fe(r)&&Pe(l,r)}else if(fe(e))Pe(l,e.bind(n));else if(Se(e))if(ae(e))e.forEach(r=>ir(r,t,n,o));else{const r=fe(e.handler)?e.handler.bind(n):t[e.handler];fe(r)&&Pe(l,r,e)}}function cr(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:l,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,i=r.get(t);let c;return i?c=i:!l.length&&!n&&!o?c=t:(c={},l.length&&l.forEach(h=>en(c,h,a,!0)),en(c,t,a)),Se(t)&&r.set(t,c),c}function en(e,t,n,o=!1){const{mixins:l,extends:r}=t;r&&en(e,r,n,!0),l&&l.forEach(a=>en(e,a,n,!0));for(const a in t)if(!(o&&a==="expose")){const i=mi[a]||n&&n[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const mi={data:Io,props:Po,emits:Po,methods:bs,computed:bs,beforeCreate:He,created:He,beforeMount:He,mounted:He,beforeUpdate:He,updated:He,beforeDestroy:He,beforeUnmount:He,destroyed:He,unmounted:He,activated:He,deactivated:He,errorCaptured:He,serverPrefetch:He,components:bs,directives:bs,watch:gi,provide:Io,inject:_i};function Io(e,t){return t?e?function(){return qe(fe(e)?e.call(this,this):e,fe(t)?t.call(this,this):t)}:t:e}function _i(e,t){return bs(Vn(e),Vn(t))}function Vn(e){if(ae(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function He(e,t){return e?[...new Set([].concat(e,t))]:t}function bs(e,t){return e?qe(Object.create(null),e,t):t}function Po(e,t){return e?ae(e)&&ae(t)?[...new Set([...e,...t])]:qe(Object.create(null),Do(e),Do(t??{})):t}function gi(e,t){if(!e)return t;if(!t)return e;const n=qe(Object.create(null),e);for(const o in t)n[o]=He(e[o],t[o]);return n}function dr(){return{app:null,config:{isNativeTag:xl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vi=0;function yi(e,t){return function(o,l=null){fe(o)||(o=qe({},o)),l!=null&&!Se(l)&&(l=null);const r=dr(),a=new WeakSet,i=[];let c=!1;const h=r.app={_uid:vi++,_component:o,_props:l,_container:null,_context:r,_instance:null,version:tc,get config(){return r.config},set config(f){},use(f,...u){return a.has(f)||(f&&fe(f.install)?(a.add(f),f.install(h,...u)):fe(f)&&(a.add(f),f(h,...u))),h},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),h},component(f,u){return u?(r.components[f]=u,h):r.components[f]},directive(f,u){return u?(r.directives[f]=u,h):r.directives[f]},mount(f,u,v){if(!c){const d=h._ceVNode||Ee(o,l);return d.appContext=r,v===!0?v="svg":v===!1&&(v=void 0),e(d,f,v),c=!0,h._container=f,f.__vue_app__=h,hn(d.component)}},onUnmount(f){i.push(f)},unmount(){c&&(ht(i,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(f,u){return r.provides[f]=u,h},runWithContext(f){const u=Kt;Kt=h;try{return f()}finally{Kt=u}}};return h}}let Kt=null;function Bs(e,t){if(We){let n=We.provides;const o=We.parent&&We.parent.provides;o===n&&(n=We.provides=Object.create(o)),n[e]=t}}function st(e,t,n=!1){const o=kr();if(o||Kt){let l=Kt?Kt._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(l&&e in l)return l[e];if(arguments.length>1)return n&&fe(t)?t.call(o&&o.proxy):t}}function xi(){return!!(kr()||Kt)}const ur={},fr=()=>Object.create(ur),pr=e=>Object.getPrototypeOf(e)===ur;function wi(e,t,n,o=!1){const l={},r=fr();e.propsDefaults=Object.create(null),hr(e,t,l,r);for(const a in e.propsOptions[0])a in l||(l[a]=void 0);n?e.props=o?l:Kl(l):e.type.props?e.props=l:e.props=r,e.attrs=r}function $i(e,t,n,o){const{props:l,attrs:r,vnode:{patchFlag:a}}=e,i=xe(l),[c]=e.propsOptions;let h=!1;if((o||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let u=0;u<f.length;u++){let v=f[u];if(fn(e.emitsOptions,v))continue;const d=t[v];if(c)if($e(r,v))d!==r[v]&&(r[v]=d,h=!0);else{const k=Vt(v);l[k]=Un(c,i,k,d,e,!1)}else d!==r[v]&&(r[v]=d,h=!0)}}}else{hr(e,t,l,r)&&(h=!0);let f;for(const u in i)(!t||!$e(t,u)&&((f=Yt(u))===u||!$e(t,f)))&&(c?n&&(n[u]!==void 0||n[f]!==void 0)&&(l[u]=Un(c,i,u,void 0,e,!0)):delete l[u]);if(r!==i)for(const u in r)(!t||!$e(t,u))&&(delete r[u],h=!0)}h&&yt(e.attrs,"set","")}function hr(e,t,n,o){const[l,r]=e.propsOptions;let a=!1,i;if(t)for(let c in t){if(ms(c))continue;const h=t[c];let f;l&&$e(l,f=Vt(c))?!r||!r.includes(f)?n[f]=h:(i||(i={}))[f]=h:fn(e.emitsOptions,c)||(!(c in o)||h!==o[c])&&(o[c]=h,a=!0)}if(r){const c=xe(n),h=i||Re;for(let f=0;f<r.length;f++){const u=r[f];n[u]=Un(l,c,u,h[u],e,!$e(h,u))}}return a}function Un(e,t,n,o,l,r){const a=e[n];if(a!=null){const i=$e(a,"default");if(i&&o===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&fe(c)){const{propsDefaults:h}=l;if(n in h)o=h[n];else{const f=Fs(l);o=h[n]=c.call(null,t),f()}}else o=c;l.ce&&l.ce._setProp(n,o)}a[0]&&(r&&!i?o=!1:a[1]&&(o===""||o===Yt(n))&&(o=!0))}return o}const Ci=new WeakMap;function br(e,t,n=!1){const o=n?Ci:t.propsCache,l=o.get(e);if(l)return l;const r=e.props,a={},i=[];let c=!1;if(!fe(e)){const f=u=>{c=!0;const[v,d]=br(u,t,!0);qe(a,v),d&&i.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!c)return Se(e)&&o.set(e,ts),ts;if(ae(r))for(let f=0;f<r.length;f++){const u=Vt(r[f]);To(u)&&(a[u]=Re)}else if(r)for(const f in r){const u=Vt(f);if(To(u)){const v=r[f],d=a[u]=ae(v)||fe(v)?{type:v}:qe({},v),k=d.type;let m=!1,p=!0;if(ae(k))for(let U=0;U<k.length;++U){const B=k[U],Z=fe(B)&&B.name;if(Z==="Boolean"){m=!0;break}else Z==="String"&&(p=!1)}else m=fe(k)&&k.name==="Boolean";d[0]=m,d[1]=p,(m||$e(d,"default"))&&i.push(u)}}const h=[a,i];return Se(e)&&o.set(e,h),h}function To(e){return e[0]!=="$"&&!ms(e)}const po=e=>e==="_"||e==="_ctx"||e==="$stable",ho=e=>ae(e)?e.map(ut):[ut(e)],Ei=(e,t,n)=>{if(t._n)return t;const o=Rt((...l)=>ho(t(...l)),n);return o._c=!1,o},mr=(e,t,n)=>{const o=e._ctx;for(const l in e){if(po(l))continue;const r=e[l];if(fe(r))t[l]=Ei(l,r,o);else if(r!=null){const a=ho(r);t[l]=()=>a}}},_r=(e,t)=>{const n=ho(t);e.slots.default=()=>n},gr=(e,t,n)=>{for(const o in t)(n||!po(o))&&(e[o]=t[o])},Si=(e,t,n)=>{const o=e.slots=fr();if(e.vnode.shapeFlag&32){const l=t._;l?(gr(o,t,n),n&&Sl(o,"_",l,!0)):mr(t,o)}else t&&_r(e,t)},Ri=(e,t,n)=>{const{vnode:o,slots:l}=e;let r=!0,a=Re;if(o.shapeFlag&32){const i=t._;i?n&&i===1?r=!1:gr(l,t,n):(r=!t.$stable,mr(t,l)),a=t}else t&&(_r(e,t),a={default:1});if(r)for(const i in l)!po(i)&&a[i]==null&&delete l[i]},Xe=qi;function ki(e){return Ai(e)}function Ai(e,t){const n=rn();n.__VUE__=!0;const{insert:o,remove:l,patchProp:r,createElement:a,createText:i,createComment:c,setText:h,setElementText:f,parentNode:u,nextSibling:v,setScopeId:d=pt,insertStaticContent:k}=e,m=(g,y,$,D=null,P=null,A=null,Y=void 0,G=null,H=!!y.dynamicChildren)=>{if(g===y)return;g&&!ps(g,y)&&(D=R(g),je(g,P,A,!0),g=null),y.patchFlag===-2&&(H=!1,y.dynamicChildren=null);const{type:j,ref:ie,shapeFlag:X}=y;switch(j){case pn:p(g,y,$,D);break;case kt:U(g,y,$,D);break;case Gs:g==null&&B(y,$,D,Y);break;case re:ce(g,y,$,D,P,A,Y,G,H);break;default:X&1?z(g,y,$,D,P,A,Y,G,H):X&6?N(g,y,$,D,P,A,Y,G,H):(X&64||X&128)&&j.process(g,y,$,D,P,A,Y,G,H,ne)}ie!=null&&P?vs(ie,g&&g.ref,A,y||g,!y):ie==null&&g&&g.ref!=null&&vs(g.ref,null,A,g,!0)},p=(g,y,$,D)=>{if(g==null)o(y.el=i(y.children),$,D);else{const P=y.el=g.el;y.children!==g.children&&h(P,y.children)}},U=(g,y,$,D)=>{g==null?o(y.el=c(y.children||""),$,D):y.el=g.el},B=(g,y,$,D)=>{[g.el,g.anchor]=k(g.children,y,$,D,g.el,g.anchor)},Z=({el:g,anchor:y},$,D)=>{let P;for(;g&&g!==y;)P=v(g),o(g,$,D),g=P;o(y,$,D)},J=({el:g,anchor:y})=>{let $;for(;g&&g!==y;)$=v(g),l(g),g=$;l(y)},z=(g,y,$,D,P,A,Y,G,H)=>{if(y.type==="svg"?Y="svg":y.type==="math"&&(Y="mathml"),g==null)S(y,$,D,P,A,Y,G,H);else{const j=g.el&&g.el._isVueCE?g.el:null;try{j&&j._beginPatch(),E(g,y,P,A,Y,G,H)}finally{j&&j._endPatch()}}},S=(g,y,$,D,P,A,Y,G)=>{let H,j;const{props:ie,shapeFlag:X,transition:oe,dirs:de}=g;if(H=g.el=a(g.type,A,ie&&ie.is,ie),X&8?f(H,g.children):X&16&&Q(g.children,H,null,D,P,En(g,A),Y,G),de&&Lt(g,null,D,"created"),O(H,g,g.scopeId,Y,D),ie){for(const ke in ie)ke!=="value"&&!ms(ke)&&r(H,ke,null,ie[ke],A,D);"value"in ie&&r(H,"value",null,ie.value,A),(j=ie.onVnodeBeforeMount)&&ct(j,D,g)}de&&Lt(g,null,D,"beforeMount");const ve=Di(P,oe);ve&&oe.beforeEnter(H),o(H,y,$),((j=ie&&ie.onVnodeMounted)||ve||de)&&Xe(()=>{j&&ct(j,D,g),ve&&oe.enter(H),de&&Lt(g,null,D,"mounted")},P)},O=(g,y,$,D,P)=>{if($&&d(g,$),D)for(let A=0;A<D.length;A++)d(g,D[A]);if(P){let A=P.subTree;if(y===A||Cr(A.type)&&(A.ssContent===y||A.ssFallback===y)){const Y=P.vnode;O(g,Y,Y.scopeId,Y.slotScopeIds,P.parent)}}},Q=(g,y,$,D,P,A,Y,G,H=0)=>{for(let j=H;j<g.length;j++){const ie=g[j]=G?Tt(g[j]):ut(g[j]);m(null,ie,y,$,D,P,A,Y,G)}},E=(g,y,$,D,P,A,Y)=>{const G=y.el=g.el;let{patchFlag:H,dynamicChildren:j,dirs:ie}=y;H|=g.patchFlag&16;const X=g.props||Re,oe=y.props||Re;let de;if($&&qt($,!1),(de=oe.onVnodeBeforeUpdate)&&ct(de,$,y,g),ie&&Lt(y,g,$,"beforeUpdate"),$&&qt($,!0),(X.innerHTML&&oe.innerHTML==null||X.textContent&&oe.textContent==null)&&f(G,""),j?T(g.dynamicChildren,j,G,$,D,En(y,P),A):Y||ue(g,y,G,null,$,D,En(y,P),A,!1),H>0){if(H&16)M(G,X,oe,$,P);else if(H&2&&X.class!==oe.class&&r(G,"class",null,oe.class,P),H&4&&r(G,"style",X.style,oe.style,P),H&8){const ve=y.dynamicProps;for(let ke=0;ke<ve.length;ke++){const Ce=ve[ke],ze=X[Ce],Qe=oe[Ce];(Qe!==ze||Ce==="value")&&r(G,Ce,ze,Qe,P,$)}}H&1&&g.children!==y.children&&f(G,y.children)}else!Y&&j==null&&M(G,X,oe,$,P);((de=oe.onVnodeUpdated)||ie)&&Xe(()=>{de&&ct(de,$,y,g),ie&&Lt(y,g,$,"updated")},D)},T=(g,y,$,D,P,A,Y)=>{for(let G=0;G<y.length;G++){const H=g[G],j=y[G],ie=H.el&&(H.type===re||!ps(H,j)||H.shapeFlag&198)?u(H.el):$;m(H,j,ie,null,D,P,A,Y,!0)}},M=(g,y,$,D,P)=>{if(y!==$){if(y!==Re)for(const A in y)!ms(A)&&!(A in $)&&r(g,A,y[A],null,P,D);for(const A in $){if(ms(A))continue;const Y=$[A],G=y[A];Y!==G&&A!=="value"&&r(g,A,G,Y,P,D)}"value"in $&&r(g,"value",y.value,$.value,P)}},ce=(g,y,$,D,P,A,Y,G,H)=>{const j=y.el=g?g.el:i(""),ie=y.anchor=g?g.anchor:i("");let{patchFlag:X,dynamicChildren:oe,slotScopeIds:de}=y;de&&(G=G?G.concat(de):de),g==null?(o(j,$,D),o(ie,$,D),Q(y.children||[],$,ie,P,A,Y,G,H)):X>0&&X&64&&oe&&g.dynamicChildren?(T(g.dynamicChildren,oe,$,P,A,Y,G),(y.key!=null||P&&y===P.subTree)&&vr(g,y,!0)):ue(g,y,$,ie,P,A,Y,G,H)},N=(g,y,$,D,P,A,Y,G,H)=>{y.slotScopeIds=G,g==null?y.shapeFlag&512?P.ctx.activate(y,$,D,Y,H):me(y,$,D,P,A,Y,H):F(g,y,H)},me=(g,y,$,D,P,A,Y)=>{const G=g.component=zi(g,D,P);if(or(g)&&(G.ctx.renderer=ne),Qi(G,!1,Y),G.asyncDep){if(P&&P.registerDep(G,I,Y),!g.el){const H=G.subTree=Ee(kt);U(null,H,y,$),g.placeholder=H.el}}else I(G,g,y,$,P,A,Y)},F=(g,y,$)=>{const D=y.component=g.component;if(Ui(g,y,$))if(D.asyncDep&&!D.asyncResolved){L(D,y,$);return}else D.next=y,D.update();else y.el=g.el,D.vnode=y},I=(g,y,$,D,P,A,Y)=>{const G=()=>{if(g.isMounted){let{next:X,bu:oe,u:de,parent:ve,vnode:ke}=g;{const at=yr(g);if(at){X&&(X.el=ke.el,L(g,X,Y)),at.asyncDep.then(()=>{g.isUnmounted||G()});return}}let Ce=X,ze;qt(g,!1),X?(X.el=ke.el,L(g,X,Y)):X=ke,oe&&Hs(oe),(ze=X.props&&X.props.onVnodeBeforeUpdate)&&ct(ze,ve,X,ke),qt(g,!0);const Qe=jo(g),rt=g.subTree;g.subTree=Qe,m(rt,Qe,u(rt.el),R(rt),g,P,A),X.el=Qe.el,Ce===null&&Li(g,Qe.el),de&&Xe(de,P),(ze=X.props&&X.props.onVnodeUpdated)&&Xe(()=>ct(ze,ve,X,ke),P)}else{let X;const{el:oe,props:de}=y,{bm:ve,m:ke,parent:Ce,root:ze,type:Qe}=g,rt=os(y);qt(g,!1),ve&&Hs(ve),!rt&&(X=de&&de.onVnodeBeforeMount)&&ct(X,Ce,y),qt(g,!0);{ze.ce&&ze.ce._def.shadowRoot!==!1&&ze.ce._injectChildStyle(Qe);const at=g.subTree=jo(g);m(null,at,$,D,g,P,A),y.el=at.el}if(ke&&Xe(ke,P),!rt&&(X=de&&de.onVnodeMounted)){const at=y;Xe(()=>ct(X,Ce,at),P)}(y.shapeFlag&256||Ce&&os(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&g.a&&Xe(g.a,P),g.isMounted=!0,y=$=D=null}};g.scope.on();const H=g.effect=new Pl(G);g.scope.off();const j=g.update=H.run.bind(H),ie=g.job=H.runIfDirty.bind(H);ie.i=g,ie.id=g.uid,H.scheduler=()=>uo(ie),qt(g,!0),j()},L=(g,y,$)=>{y.component=g;const D=g.vnode.props;g.vnode=y,g.next=null,$i(g,y.props,D,$),Ri(g,y.children,$),Et(),ko(g),St()},ue=(g,y,$,D,P,A,Y,G,H=!1)=>{const j=g&&g.children,ie=g?g.shapeFlag:0,X=y.children,{patchFlag:oe,shapeFlag:de}=y;if(oe>0){if(oe&128){Ye(j,X,$,D,P,A,Y,G,H);return}else if(oe&256){Ke(j,X,$,D,P,A,Y,G,H);return}}de&8?(ie&16&&C(j,P,A),X!==j&&f($,X)):ie&16?de&16?Ye(j,X,$,D,P,A,Y,G,H):C(j,P,A,!0):(ie&8&&f($,""),de&16&&Q(X,$,D,P,A,Y,G,H))},Ke=(g,y,$,D,P,A,Y,G,H)=>{g=g||ts,y=y||ts;const j=g.length,ie=y.length,X=Math.min(j,ie);let oe;for(oe=0;oe<X;oe++){const de=y[oe]=H?Tt(y[oe]):ut(y[oe]);m(g[oe],de,$,null,P,A,Y,G,H)}j>ie?C(g,P,A,!0,!1,X):Q(y,$,D,P,A,Y,G,H,X)},Ye=(g,y,$,D,P,A,Y,G,H)=>{let j=0;const ie=y.length;let X=g.length-1,oe=ie-1;for(;j<=X&&j<=oe;){const de=g[j],ve=y[j]=H?Tt(y[j]):ut(y[j]);if(ps(de,ve))m(de,ve,$,null,P,A,Y,G,H);else break;j++}for(;j<=X&&j<=oe;){const de=g[X],ve=y[oe]=H?Tt(y[oe]):ut(y[oe]);if(ps(de,ve))m(de,ve,$,null,P,A,Y,G,H);else break;X--,oe--}if(j>X){if(j<=oe){const de=oe+1,ve=de<ie?y[de].el:D;for(;j<=oe;)m(null,y[j]=H?Tt(y[j]):ut(y[j]),$,ve,P,A,Y,G,H),j++}}else if(j>oe)for(;j<=X;)je(g[j],P,A,!0),j++;else{const de=j,ve=j,ke=new Map;for(j=ve;j<=oe;j++){const Je=y[j]=H?Tt(y[j]):ut(y[j]);Je.key!=null&&ke.set(Je.key,j)}let Ce,ze=0;const Qe=oe-ve+1;let rt=!1,at=0;const us=new Array(Qe);for(j=0;j<Qe;j++)us[j]=0;for(j=de;j<=X;j++){const Je=g[j];if(ze>=Qe){je(Je,P,A,!0);continue}let it;if(Je.key!=null)it=ke.get(Je.key);else for(Ce=ve;Ce<=oe;Ce++)if(us[Ce-ve]===0&&ps(Je,y[Ce])){it=Ce;break}it===void 0?je(Je,P,A,!0):(us[it-ve]=j+1,it>=at?at=it:rt=!0,m(Je,y[it],$,null,P,A,Y,G,H),ze++)}const xo=rt?Oi(us):ts;for(Ce=xo.length-1,j=Qe-1;j>=0;j--){const Je=ve+j,it=y[Je],wo=y[Je+1],$o=Je+1<ie?wo.el||wo.placeholder:D;us[j]===0?m(null,it,$,$o,P,A,Y,G,H):rt&&(Ce<0||j!==xo[Ce]?et(it,$,$o,2):Ce--)}}},et=(g,y,$,D,P=null)=>{const{el:A,type:Y,transition:G,children:H,shapeFlag:j}=g;if(j&6){et(g.component.subTree,y,$,D);return}if(j&128){g.suspense.move(y,$,D);return}if(j&64){Y.move(g,y,$,ne);return}if(Y===re){o(A,y,$);for(let X=0;X<H.length;X++)et(H[X],y,$,D);o(g.anchor,y,$);return}if(Y===Gs){Z(g,y,$);return}if(D!==2&&j&1&&G)if(D===0)G.beforeEnter(A),o(A,y,$),Xe(()=>G.enter(A),P);else{const{leave:X,delayLeave:oe,afterLeave:de}=G,ve=()=>{g.ctx.isUnmounted?l(A):o(A,y,$)},ke=()=>{A._isLeaving&&A[Za](!0),X(A,()=>{ve(),de&&de()})};oe?oe(A,ve,ke):ke()}else o(A,y,$)},je=(g,y,$,D=!1,P=!1)=>{const{type:A,props:Y,ref:G,children:H,dynamicChildren:j,shapeFlag:ie,patchFlag:X,dirs:oe,cacheIndex:de}=g;if(X===-2&&(P=!1),G!=null&&(Et(),vs(G,null,$,g,!0),St()),de!=null&&(y.renderCache[de]=void 0),ie&256){y.ctx.deactivate(g);return}const ve=ie&1&&oe,ke=!os(g);let Ce;if(ke&&(Ce=Y&&Y.onVnodeBeforeUnmount)&&ct(Ce,y,g),ie&6)b(g.component,$,D);else{if(ie&128){g.suspense.unmount($,D);return}ve&&Lt(g,null,y,"beforeUnmount"),ie&64?g.type.remove(g,y,$,ne,D):j&&!j.hasOnce&&(A!==re||X>0&&X&64)?C(j,y,$,!1,!0):(A===re&&X&384||!P&&ie&16)&&C(H,y,$),D&&mt(g)}(ke&&(Ce=Y&&Y.onVnodeUnmounted)||ve)&&Xe(()=>{Ce&&ct(Ce,y,g),ve&&Lt(g,null,y,"unmounted")},$)},mt=g=>{const{type:y,el:$,anchor:D,transition:P}=g;if(y===re){V($,D);return}if(y===Gs){J(g);return}const A=()=>{l($),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(g.shapeFlag&1&&P&&!P.persisted){const{leave:Y,delayLeave:G}=P,H=()=>Y($,A);G?G(g.el,A,H):H()}else A()},V=(g,y)=>{let $;for(;g!==y;)$=v(g),l(g),g=$;l(y)},b=(g,y,$)=>{const{bum:D,scope:P,job:A,subTree:Y,um:G,m:H,a:j}=g;No(H),No(j),D&&Hs(D),P.stop(),A&&(A.flags|=8,je(Y,g,y,$)),G&&Xe(G,y),Xe(()=>{g.isUnmounted=!0},y)},C=(g,y,$,D=!1,P=!1,A=0)=>{for(let Y=A;Y<g.length;Y++)je(g[Y],y,$,D,P)},R=g=>{if(g.shapeFlag&6)return R(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const y=v(g.anchor||g.el),$=y&&y[Ja];return $?v($):y};let W=!1;const K=(g,y,$)=>{g==null?y._vnode&&je(y._vnode,null,null,!0):m(y._vnode||null,g,y,null,null,null,$),y._vnode=g,W||(W=!0,ko(),Zl(),W=!1)},ne={p:m,um:je,m:et,r:mt,mt:me,mc:Q,pc:ue,pbc:T,n:R,o:e};return{render:K,hydrate:void 0,createApp:yi(K)}}function En({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function qt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Di(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function vr(e,t,n=!1){const o=e.children,l=t.children;if(ae(o)&&ae(l))for(let r=0;r<o.length;r++){const a=o[r];let i=l[r];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=l[r]=Tt(l[r]),i.el=a.el),!n&&i.patchFlag!==-2&&vr(a,i)),i.type===pn&&i.patchFlag!==-1&&(i.el=a.el),i.type===kt&&!i.el&&(i.el=a.el)}}function Oi(e){const t=e.slice(),n=[0];let o,l,r,a,i;const c=e.length;for(o=0;o<c;o++){const h=e[o];if(h!==0){if(l=n[n.length-1],e[l]<h){t[o]=l,n.push(o);continue}for(r=0,a=n.length-1;r<a;)i=r+a>>1,e[n[i]]<h?r=i+1:a=i;h<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}function yr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:yr(t)}function No(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ii=Symbol.for("v-scx"),Pi=()=>st(Ii);function Pe(e,t,n){return xr(e,t,n)}function xr(e,t,n=Re){const{immediate:o,deep:l,flush:r,once:a}=n,i=qe({},n),c=t&&o||!t&&r!=="post";let h;if(As){if(r==="sync"){const d=Pi();h=d.__watcherHandles||(d.__watcherHandles=[])}else if(!c){const d=()=>{};return d.stop=pt,d.resume=pt,d.pause=pt,d}}const f=We;i.call=(d,k,m)=>ht(d,f,k,m);let u=!1;r==="post"?i.scheduler=d=>{Xe(d,f&&f.suspense)}:r!=="sync"&&(u=!0,i.scheduler=(d,k)=>{k?d():uo(d)}),i.augmentJob=d=>{t&&(d.flags|=4),u&&(d.flags|=2,f&&(d.id=f.uid,d.i=f))};const v=Ka(e,t,i);return As&&(h?h.push(v):c&&v()),v}function Ti(e,t,n){const o=this.proxy,l=Te(e)?e.includes(".")?wr(o,e):()=>o[e]:e.bind(o,o);let r;fe(t)?r=t:(r=t.handler,n=t);const a=Fs(this),i=xr(l,r.bind(o),n);return a(),i}function wr(e,t){const n=t.split(".");return()=>{let o=e;for(let l=0;l<n.length&&o;l++)o=o[n[l]];return o}}const Ni=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Vt(t)}Modifiers`]||e[`${Yt(t)}Modifiers`];function ji(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Re;let l=n;const r=t.startsWith("update:"),a=r&&Ni(o,t.slice(7));a&&(a.trim&&(l=n.map(f=>Te(f)?f.trim():f)),a.number&&(l=n.map(ln)));let i,c=o[i=vn(t)]||o[i=vn(Vt(t))];!c&&r&&(c=o[i=vn(Yt(t))]),c&&ht(c,e,6,l);const h=o[i+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,ht(h,e,6,l)}}const Mi=new WeakMap;function $r(e,t,n=!1){const o=n?Mi:t.emitsCache,l=o.get(e);if(l!==void 0)return l;const r=e.emits;let a={},i=!1;if(!fe(e)){const c=h=>{const f=$r(h,t,!0);f&&(i=!0,qe(a,f))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!i?(Se(e)&&o.set(e,null),null):(ae(r)?r.forEach(c=>a[c]=null):qe(a,r),Se(e)&&o.set(e,a),a)}function fn(e,t){return!e||!nn(t)?!1:(t=t.slice(2).replace(/Once$/,""),$e(e,t[0].toLowerCase()+t.slice(1))||$e(e,Yt(t))||$e(e,t))}function jo(e){const{type:t,vnode:n,proxy:o,withProxy:l,propsOptions:[r],slots:a,attrs:i,emit:c,render:h,renderCache:f,props:u,data:v,setupState:d,ctx:k,inheritAttrs:m}=e,p=Xs(e);let U,B;try{if(n.shapeFlag&4){const J=l||o,z=J;U=ut(h.call(z,J,f,u,d,v,k)),B=i}else{const J=t;U=ut(J.length>1?J(u,{attrs:i,slots:a,emit:c}):J(u,null)),B=t.props?i:Fi(i)}}catch(J){xs.length=0,cn(J,e,1),U=Ee(kt)}let Z=U;if(B&&m!==!1){const J=Object.keys(B),{shapeFlag:z}=Z;J.length&&z&7&&(r&&J.some(Jn)&&(B=Vi(B,r)),Z=ls(Z,B,!1,!0))}return n.dirs&&(Z=ls(Z,null,!1,!0),Z.dirs=Z.dirs?Z.dirs.concat(n.dirs):n.dirs),n.transition&&fo(Z,n.transition),U=Z,Xs(p),U}const Fi=e=>{let t;for(const n in e)(n==="class"||n==="style"||nn(n))&&((t||(t={}))[n]=e[n]);return t},Vi=(e,t)=>{const n={};for(const o in e)(!Jn(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Ui(e,t,n){const{props:o,children:l,component:r}=e,{props:a,children:i,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return o?Mo(o,a,h):!!a;if(c&8){const f=t.dynamicProps;for(let u=0;u<f.length;u++){const v=f[u];if(a[v]!==o[v]&&!fn(h,v))return!0}}}else return(l||i)&&(!i||!i.$stable)?!0:o===a?!1:o?a?Mo(o,a,h):!0:!!a;return!1}function Mo(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let l=0;l<o.length;l++){const r=o[l];if(t[r]!==e[r]&&!fn(n,r))return!0}return!1}function Li({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Cr=e=>e.__isSuspense;function qi(e,t){t&&t.pendingBranch?ae(e)?t.effects.push(...e):t.effects.push(e):Qa(e)}const re=Symbol.for("v-fgt"),pn=Symbol.for("v-txt"),kt=Symbol.for("v-cmt"),Gs=Symbol.for("v-stc"),xs=[];let Ze=null;function x(e=!1){xs.push(Ze=e?null:[])}function Hi(){xs.pop(),Ze=xs[xs.length-1]||null}let Rs=1;function tn(e,t=!1){Rs+=e,e<0&&Ze&&t&&(Ze.hasOnce=!0)}function Er(e){return e.dynamicChildren=Rs>0?Ze||ts:null,Hi(),Rs>0&&Ze&&Ze.push(e),e}function w(e,t,n,o,l,r){return Er(s(e,t,n,o,l,r,!0))}function At(e,t,n,o,l){return Er(Ee(e,t,n,o,l,!0))}function ks(e){return e?e.__v_isVNode===!0:!1}function ps(e,t){return e.type===t.type&&e.key===t.key}const Sr=({key:e})=>e??null,Ws=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Te(e)||De(e)||fe(e)?{i:Le,r:e,k:t,f:!!n}:e:null);function s(e,t=null,n=null,o=0,l=null,r=e===re?0:1,a=!1,i=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sr(t),ref:t&&Ws(t),scopeId:tr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:Le};return i?(bo(c,n),r&128&&e.normalize(c)):n&&(c.shapeFlag|=Te(n)?8:16),Rs>0&&!a&&Ze&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Ze.push(c),c}const Ee=Bi;function Bi(e,t=null,n=null,o=0,l=null,r=!1){if((!e||e===ui)&&(e=kt),ks(e)){const i=ls(e,t,!0);return n&&bo(i,n),Rs>0&&!r&&Ze&&(i.shapeFlag&6?Ze[Ze.indexOf(e)]=i:Ze.push(i)),i.patchFlag=-2,i}if(ec(e)&&(e=e.__vccOpts),t){t=Gi(t);let{class:i,style:c}=t;i&&!Te(i)&&(t.class=le(i)),Se(c)&&(io(c)&&!ae(c)&&(c=qe({},c)),t.style=eo(c))}const a=Te(e)?1:Cr(e)?128:Xa(e)?64:Se(e)?4:fe(e)?2:0;return s(e,t,n,o,l,a,r,!0)}function Gi(e){return e?io(e)||pr(e)?qe({},e):e:null}function ls(e,t,n=!1,o=!1){const{props:l,ref:r,patchFlag:a,children:i,transition:c}=e,h=t?Wi(l||{},t):l,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&Sr(h),ref:t&&t.ref?n&&r?ae(r)?r.concat(Ws(t)):[r,Ws(t)]:Ws(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==re?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ls(e.ssContent),ssFallback:e.ssFallback&&ls(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&o&&fo(f,c.clone(f)),f}function q(e=" ",t=0){return Ee(pn,null,e,t)}function Rr(e,t){const n=Ee(Gs,null,e);return n.staticCount=t,n}function te(e="",t=!1){return t?(x(),At(kt,null,e)):Ee(kt,null,e)}function ut(e){return e==null||typeof e=="boolean"?Ee(kt):ae(e)?Ee(re,null,e.slice()):ks(e)?Tt(e):Ee(pn,null,String(e))}function Tt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ls(e)}function bo(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ae(t))n=16;else if(typeof t=="object")if(o&65){const l=t.default;l&&(l._c&&(l._d=!1),bo(e,l()),l._c&&(l._d=!0));return}else{n=32;const l=t._;!l&&!pr(t)?t._ctx=Le:l===3&&Le&&(Le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else fe(t)?(t={default:t,_ctx:Le},n=32):(t=String(t),o&64?(n=16,t=[q(t)]):n=8);e.children=t,e.shapeFlag|=n}function Wi(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const l in o)if(l==="class")t.class!==o.class&&(t.class=le([t.class,o.class]));else if(l==="style")t.style=eo([t.style,o.style]);else if(nn(l)){const r=t[l],a=o[l];a&&r!==a&&!(ae(r)&&r.includes(a))&&(t[l]=r?[].concat(r,a):a)}else l!==""&&(t[l]=o[l])}return t}function ct(e,t,n,o=null){ht(e,t,7,[n,o])}const Ki=dr();let Yi=0;function zi(e,t,n){const o=e.type,l=(t?t.appContext:e.appContext)||Ki,r={uid:Yi++,vnode:e,type:o,parent:t,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Dl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(l.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:br(o,l),emitsOptions:$r(o,l),emit:null,emitted:null,propsDefaults:Re,inheritAttrs:o.inheritAttrs,ctx:Re,data:Re,props:Re,attrs:Re,slots:Re,refs:Re,setupState:Re,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=ji.bind(null,r),e.ce&&e.ce(r),r}let We=null;const kr=()=>We||Le;let sn,Ln;{const e=rn(),t=(n,o)=>{let l;return(l=e[n])||(l=e[n]=[]),l.push(o),r=>{l.length>1?l.forEach(a=>a(r)):l[0](r)}};sn=t("__VUE_INSTANCE_SETTERS__",n=>We=n),Ln=t("__VUE_SSR_SETTERS__",n=>As=n)}const Fs=e=>{const t=We;return sn(e),e.scope.on(),()=>{e.scope.off(),sn(t)}},Fo=()=>{We&&We.scope.off(),sn(null)};function Ar(e){return e.vnode.shapeFlag&4}let As=!1;function Qi(e,t=!1,n=!1){t&&Ln(t);const{props:o,children:l}=e.vnode,r=Ar(e);wi(e,o,r,t),Si(e,l,n||t);const a=r?Ji(e,t):void 0;return t&&Ln(!1),a}function Ji(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,pi);const{setup:o}=n;if(o){Et();const l=e.setupContext=o.length>1?Zi(e):null,r=Fs(e),a=Ms(o,e,0,[e.props,l]),i=wl(a);if(St(),r(),(i||e.sp)&&!os(e)&&nr(e),i){if(a.then(Fo,Fo),t)return a.then(c=>{Vo(e,c)}).catch(c=>{cn(c,e,0)});e.asyncDep=a}else Vo(e,a)}else Dr(e)}function Vo(e,t,n){fe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Se(t)&&(e.setupState=zl(t)),Dr(e)}function Dr(e,t,n){const o=e.type;e.render||(e.render=o.render||pt);{const l=Fs(e);Et();try{hi(e)}finally{St(),l()}}}const Xi={get(e,t){return Ue(e,"get",""),e[t]}};function Zi(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Xi),slots:e.slots,emit:e.emit,expose:t}}function hn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(zl(co(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ys)return ys[n](e)},has(t,n){return n in t||n in ys}})):e.proxy}function ec(e){return fe(e)&&"__vccOpts"in e}const ee=(e,t)=>Ga(e,t,As);function Or(e,t,n){try{tn(-1);const o=arguments.length;return o===2?Se(t)&&!ae(t)?ks(t)?Ee(e,null,[t]):Ee(e,t):Ee(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&ks(n)&&(n=[n]),Ee(e,t,n))}finally{tn(1)}}const tc="3.5.24";let qn;const Uo=typeof window<"u"&&window.trustedTypes;if(Uo)try{qn=Uo.createPolicy("vue",{createHTML:e=>e})}catch{}const Ir=qn?e=>qn.createHTML(e):e=>e,sc="http://www.w3.org/2000/svg",nc="http://www.w3.org/1998/Math/MathML",vt=typeof document<"u"?document:null,Lo=vt&&vt.createElement("template"),oc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const l=t==="svg"?vt.createElementNS(sc,e):t==="mathml"?vt.createElementNS(nc,e):n?vt.createElement(e,{is:n}):vt.createElement(e);return e==="select"&&o&&o.multiple!=null&&l.setAttribute("multiple",o.multiple),l},createText:e=>vt.createTextNode(e),createComment:e=>vt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,l,r){const a=n?n.previousSibling:t.lastChild;if(l&&(l===r||l.nextSibling))for(;t.insertBefore(l.cloneNode(!0),n),!(l===r||!(l=l.nextSibling)););else{Lo.innerHTML=Ir(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const i=Lo.content;if(o==="svg"||o==="mathml"){const c=i.firstChild;for(;c.firstChild;)i.appendChild(c.firstChild);i.removeChild(c)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},lc=Symbol("_vtc");function rc(e,t,n){const o=e[lc];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const qo=Symbol("_vod"),ac=Symbol("_vsh"),ic=Symbol(""),cc=/(?:^|;)\s*display\s*:/;function dc(e,t,n){const o=e.style,l=Te(n);let r=!1;if(n&&!l){if(t)if(Te(t))for(const a of t.split(";")){const i=a.slice(0,a.indexOf(":")).trim();n[i]==null&&Ks(o,i,"")}else for(const a in t)n[a]==null&&Ks(o,a,"");for(const a in n)a==="display"&&(r=!0),Ks(o,a,n[a])}else if(l){if(t!==n){const a=o[ic];a&&(n+=";"+a),o.cssText=n,r=cc.test(n)}}else t&&e.removeAttribute("style");qo in e&&(e[qo]=r?o.display:"",e[ac]&&(o.display="none"))}const Ho=/\s*!important$/;function Ks(e,t,n){if(ae(n))n.forEach(o=>Ks(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=uc(e,t);Ho.test(n)?e.setProperty(Yt(o),n.replace(Ho,""),"important"):e[o]=n}}const Bo=["Webkit","Moz","ms"],Sn={};function uc(e,t){const n=Sn[t];if(n)return n;let o=Vt(t);if(o!=="filter"&&o in e)return Sn[t]=o;o=El(o);for(let l=0;l<Bo.length;l++){const r=Bo[l]+o;if(r in e)return Sn[t]=r}return t}const Go="http://www.w3.org/1999/xlink";function Wo(e,t,n,o,l,r=ba(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Go,t.slice(6,t.length)):e.setAttributeNS(Go,t,n):n==null||r&&!Rl(n)?e.removeAttribute(t):e.setAttribute(t,r?"":ot(n)?String(n):n)}function Ko(e,t,n,o,l){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ir(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const i=r==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(i!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=Rl(n):n==null&&i==="string"?(n="",a=!0):i==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(l||t)}function jt(e,t,n,o){e.addEventListener(t,n,o)}function fc(e,t,n,o){e.removeEventListener(t,n,o)}const Yo=Symbol("_vei");function pc(e,t,n,o,l=null){const r=e[Yo]||(e[Yo]={}),a=r[t];if(o&&a)a.value=o;else{const[i,c]=hc(t);if(o){const h=r[t]=_c(o,l);jt(e,i,h,c)}else a&&(fc(e,i,a,c),r[t]=void 0)}}const zo=/(?:Once|Passive|Capture)$/;function hc(e){let t;if(zo.test(e)){t={};let o;for(;o=e.match(zo);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yt(e.slice(2)),t]}let Rn=0;const bc=Promise.resolve(),mc=()=>Rn||(bc.then(()=>Rn=0),Rn=Date.now());function _c(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;ht(gc(o,n.value),t,5,[o])};return n.value=e,n.attached=mc(),n}function gc(e,t){if(ae(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>l=>!l._stopped&&o&&o(l))}else return t}const Qo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,vc=(e,t,n,o,l,r)=>{const a=l==="svg";t==="class"?rc(e,o,a):t==="style"?dc(e,n,o):nn(t)?Jn(t)||pc(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):yc(e,t,o,a))?(Ko(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Wo(e,t,o,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Te(o))?Ko(e,Vt(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Wo(e,t,o,a))};function yc(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Qo(t)&&fe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const l=e.tagName;if(l==="IMG"||l==="VIDEO"||l==="CANVAS"||l==="SOURCE")return!1}return Qo(t)&&Te(n)?!1:t in e}const rs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ae(t)?n=>Hs(t,n):t};function xc(e){e.target.composing=!0}function Jo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ct=Symbol("_assign");function Xo(e,t,n){return t&&(e=e.trim()),n&&(e=ln(e)),e}const he={created(e,{modifiers:{lazy:t,trim:n,number:o}},l){e[Ct]=rs(l);const r=o||l.props&&l.props.type==="number";jt(e,t?"change":"input",a=>{a.target.composing||e[Ct](Xo(e.value,n,r))}),(n||r)&&jt(e,"change",()=>{e.value=Xo(e.value,n,r)}),t||(jt(e,"compositionstart",xc),jt(e,"compositionend",Jo),jt(e,"change",Jo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:l,number:r}},a){if(e[Ct]=rs(a),e.composing)return;const i=(r||e.type==="number")&&!/^0\d/.test(e.value)?ln(e.value):e.value,c=t??"";i!==c&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||l&&e.value.trim()===c)||(e.value=c))}},Bt={deep:!0,created(e,t,n){e[Ct]=rs(n),jt(e,"change",()=>{const o=e._modelValue,l=Ds(e),r=e.checked,a=e[Ct];if(ae(o)){const i=to(o,l),c=i!==-1;if(r&&!c)a(o.concat(l));else if(!r&&c){const h=[...o];h.splice(i,1),a(h)}}else if(cs(o)){const i=new Set(o);r?i.add(l):i.delete(l),a(i)}else a(Pr(e,r))})},mounted:Zo,beforeUpdate(e,t,n){e[Ct]=rs(n),Zo(e,t,n)}};function Zo(e,{value:t,oldValue:n},o){e._modelValue=t;let l;if(ae(t))l=to(t,o.props.value)>-1;else if(cs(t))l=t.has(o.props.value);else{if(t===n)return;l=Ns(t,Pr(e,!0))}e.checked!==l&&(e.checked=l)}const ft={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const l=cs(t);jt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?ln(Ds(a)):Ds(a));e[Ct](e.multiple?l?new Set(r):r:r[0]),e._assigning=!0,dn(()=>{e._assigning=!1})}),e[Ct]=rs(o)},mounted(e,{value:t}){el(e,t)},beforeUpdate(e,t,n){e[Ct]=rs(n)},updated(e,{value:t}){e._assigning||el(e,t)}};function el(e,t){const n=e.multiple,o=ae(t);if(!(n&&!o&&!cs(t))){for(let l=0,r=e.options.length;l<r;l++){const a=e.options[l],i=Ds(a);if(n)if(o){const c=typeof i;c==="string"||c==="number"?a.selected=t.some(h=>String(h)===String(i)):a.selected=to(t,i)>-1}else a.selected=t.has(i);else if(Ns(Ds(a),t)){e.selectedIndex!==l&&(e.selectedIndex=l);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ds(e){return"_value"in e?e._value:e.value}function Pr(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const wc=["ctrl","shift","alt","meta"],$c={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>wc.some(n=>e[`${n}Key`]&&!t.includes(n))},Os=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((l,...r)=>{for(let a=0;a<t.length;a++){const i=$c[t[a]];if(i&&i(l,t))return}return e(l,...r)}))},Cc=qe({patchProp:vc},oc);let tl;function Ec(){return tl||(tl=ki(Cc))}const Sc=((...e)=>{const t=Ec().createApp(...e),{mount:n}=t;return t.mount=o=>{const l=kc(o);if(!l)return;const r=t._component;!fe(r)&&!r.render&&!r.template&&(r.template=l.innerHTML),l.nodeType===1&&(l.textContent="");const a=n(l,!1,Rc(l));return l instanceof Element&&(l.removeAttribute("v-cloak"),l.setAttribute("data-v-app","")),a},t});function Rc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function kc(e){return Te(e)?document.querySelector(e):e}let Tr;const bn=e=>Tr=e,Nr=Symbol();function Hn(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ws;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ws||(ws={}));function Ac(){const e=Ol(!0),t=e.run(()=>pe({}));let n=[],o=[];const l=co({install(r){bn(l),l._a=r,r.provide(Nr,l),r.config.globalProperties.$pinia=l,o.forEach(a=>n.push(a)),o=[]},use(r){return this._a?n.push(r):o.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return l}const jr=()=>{};function sl(e,t,n,o=jr){e.add(t);const l=()=>{e.delete(t)&&o()};return!n&&Il()&&_a(l),l}function Xt(e,...t){e.forEach(n=>{n(...t)})}const Dc=e=>e(),nl=Symbol(),kn=Symbol();function Bn(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],l=e[n];Hn(l)&&Hn(o)&&e.hasOwnProperty(n)&&!De(o)&&!$t(o)?e[n]=Bn(l,o):e[n]=o}return e}const Oc=Symbol();function Ic(e){return!Hn(e)||!Object.prototype.hasOwnProperty.call(e,Oc)}const{assign:It}=Object;function Pc(e){return!!(De(e)&&e.effect)}function Tc(e,t,n,o){const{state:l,actions:r,getters:a}=t,i=n.state.value[e];let c;function h(){i||(n.state.value[e]=l?l():{});const f=Ua(n.state.value[e]);return It(f,r,Object.keys(a||{}).reduce((u,v)=>(u[v]=co(ee(()=>{bn(n);const d=n._s.get(e);return a[v].call(d,d)})),u),{}))}return c=Mr(e,h,t,n,o,!0),c}function Mr(e,t,n={},o,l,r){let a;const i=It({actions:{}},n),c={deep:!0};let h,f,u=new Set,v=new Set,d;const k=o.state.value[e];!r&&!k&&(o.state.value[e]={}),pe({});let m;function p(Q){let E;h=f=!1,typeof Q=="function"?(Q(o.state.value[e]),E={type:ws.patchFunction,storeId:e,events:d}):(Bn(o.state.value[e],Q),E={type:ws.patchObject,payload:Q,storeId:e,events:d});const T=m=Symbol();dn().then(()=>{m===T&&(h=!0)}),f=!0,Xt(u,E,o.state.value[e])}const U=r?function(){const{state:E}=n,T=E?E():{};this.$patch(M=>{It(M,T)})}:jr;function B(){a.stop(),u.clear(),v.clear(),o._s.delete(e)}const Z=(Q,E="")=>{if(nl in Q)return Q[kn]=E,Q;const T=function(){bn(o);const M=Array.from(arguments),ce=new Set,N=new Set;function me(L){ce.add(L)}function F(L){N.add(L)}Xt(v,{args:M,name:T[kn],store:z,after:me,onError:F});let I;try{I=Q.apply(this&&this.$id===e?this:z,M)}catch(L){throw Xt(N,L),L}return I instanceof Promise?I.then(L=>(Xt(ce,L),L)).catch(L=>(Xt(N,L),Promise.reject(L))):(Xt(ce,I),I)};return T[nl]=!0,T[kn]=E,T},J={_p:o,$id:e,$onAction:sl.bind(null,v),$patch:p,$reset:U,$subscribe(Q,E={}){const T=sl(u,Q,E.detached,()=>M()),M=a.run(()=>Pe(()=>o.state.value[e],ce=>{(E.flush==="sync"?f:h)&&Q({storeId:e,type:ws.direct,events:d},ce)},It({},c,E)));return T},$dispose:B},z=js(J);o._s.set(e,z);const O=(o._a&&o._a.runWithContext||Dc)(()=>o._e.run(()=>(a=Ol()).run(()=>t({action:Z}))));for(const Q in O){const E=O[Q];if(De(E)&&!Pc(E)||$t(E))r||(k&&Ic(E)&&(De(E)?E.value=k[Q]:Bn(E,k[Q])),o.state.value[e][Q]=E);else if(typeof E=="function"){const T=Z(E,Q);O[Q]=T,i.actions[Q]=E}}return It(z,O),It(xe(z),O),Object.defineProperty(z,"$state",{get:()=>o.state.value[e],set:Q=>{p(E=>{It(E,Q)})}}),o._p.forEach(Q=>{It(z,a.run(()=>Q({store:z,app:o._a,pinia:o,options:i})))}),k&&r&&n.hydrate&&n.hydrate(z.$state,k),h=!0,f=!0,z}function zt(e,t,n){let o;const l=typeof t=="function";o=l?n:t;function r(a,i){const c=xi();return a=a||(c?st(Nr,null):null),a&&bn(a),a=Tr,a._s.has(e)||(l?Mr(e,t,o,a):Tc(e,o,a)),a._s.get(e)}return r.$id=e,r}function Nc(e){const t=xe(e),n={};for(const o in t){const l=t[o];l.effect?n[o]=ee({get:()=>e[o],set(r){e[o]=r}}):(De(l)||$t(l))&&(n[o]=Ha(e,o))}return n}const es=typeof document<"u";function Fr(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function jc(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Fr(e.default)}const we=Object.assign;function An(e,t){const n={};for(const o in t){const l=t[o];n[o]=lt(l)?l.map(e):e(l)}return n}const $s=()=>{},lt=Array.isArray;function ol(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}const Vr=/#/g,Mc=/&/g,Fc=/\//g,Vc=/=/g,Uc=/\?/g,Ur=/\+/g,Lc=/%5B/g,qc=/%5D/g,Lr=/%5E/g,Hc=/%60/g,qr=/%7B/g,Bc=/%7C/g,Hr=/%7D/g,Gc=/%20/g;function mo(e){return e==null?"":encodeURI(""+e).replace(Bc,"|").replace(Lc,"[").replace(qc,"]")}function Wc(e){return mo(e).replace(qr,"{").replace(Hr,"}").replace(Lr,"^")}function Gn(e){return mo(e).replace(Ur,"%2B").replace(Gc,"+").replace(Vr,"%23").replace(Mc,"%26").replace(Hc,"`").replace(qr,"{").replace(Hr,"}").replace(Lr,"^")}function Kc(e){return Gn(e).replace(Vc,"%3D")}function Yc(e){return mo(e).replace(Vr,"%23").replace(Uc,"%3F")}function zc(e){return Yc(e).replace(Fc,"%2F")}function Is(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Qc=/\/$/,Jc=e=>e.replace(Qc,"");function Dn(e,t,n="/"){let o,l={},r="",a="";const i=t.indexOf("#");let c=t.indexOf("?");return c=i>=0&&c>i?-1:c,c>=0&&(o=t.slice(0,c),r=t.slice(c,i>0?i:t.length),l=e(r.slice(1))),i>=0&&(o=o||t.slice(0,i),a=t.slice(i,t.length)),o=td(o??t,n),{fullPath:o+r+a,path:o,query:l,hash:Is(a)}}function Xc(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ll(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Zc(e,t,n){const o=t.matched.length-1,l=n.matched.length-1;return o>-1&&o===l&&as(t.matched[o],n.matched[l])&&Br(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function as(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Br(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ed(e[n],t[n]))return!1;return!0}function ed(e,t){return lt(e)?rl(e,t):lt(t)?rl(t,e):e===t}function rl(e,t){return lt(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function td(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),l=o[o.length-1];(l===".."||l===".")&&o.push("");let r=n.length-1,a,i;for(a=0;a<o.length;a++)if(i=o[a],i!==".")if(i==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+o.slice(a).join("/")}const Ot={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Wn=(function(e){return e.pop="pop",e.push="push",e})({}),On=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function sd(e){if(!e)if(es){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Jc(e)}const nd=/^[^#]+#/;function od(e,t){return e.replace(nd,"#")+t}function ld(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const mn=()=>({left:window.scrollX,top:window.scrollY});function rd(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),l=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!l)return;t=ld(l,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function al(e,t){return(history.state?history.state.position-t:-1)+e}const Kn=new Map;function ad(e,t){Kn.set(e,t)}function id(e){const t=Kn.get(e);return Kn.delete(e),t}function cd(e){return typeof e=="string"||e&&typeof e=="object"}function Gr(e){return typeof e=="string"||typeof e=="symbol"}let Oe=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Wr=Symbol("");Oe.MATCHER_NOT_FOUND+"",Oe.NAVIGATION_GUARD_REDIRECT+"",Oe.NAVIGATION_ABORTED+"",Oe.NAVIGATION_CANCELLED+"",Oe.NAVIGATION_DUPLICATED+"";function is(e,t){return we(new Error,{type:e,[Wr]:!0},t)}function gt(e,t){return e instanceof Error&&Wr in e&&(t==null||!!(e.type&t))}const dd=["params","query","hash"];function ud(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of dd)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function fd(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const l=n[o].replace(Ur," "),r=l.indexOf("="),a=Is(r<0?l:l.slice(0,r)),i=r<0?null:Is(l.slice(r+1));if(a in t){let c=t[a];lt(c)||(c=t[a]=[c]),c.push(i)}else t[a]=i}return t}function il(e){let t="";for(let n in e){const o=e[n];if(n=Kc(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(lt(o)?o.map(l=>l&&Gn(l)):[o&&Gn(o)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+n,l!=null&&(t+="="+l))})}return t}function pd(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=lt(o)?o.map(l=>l==null?null:""+l):o==null?o:""+o)}return t}const hd=Symbol(""),cl=Symbol(""),_n=Symbol(""),_o=Symbol(""),Yn=Symbol("");function hs(){let e=[];function t(o){return e.push(o),()=>{const l=e.indexOf(o);l>-1&&e.splice(l,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Nt(e,t,n,o,l,r=a=>a()){const a=o&&(o.enterCallbacks[l]=o.enterCallbacks[l]||[]);return()=>new Promise((i,c)=>{const h=v=>{v===!1?c(is(Oe.NAVIGATION_ABORTED,{from:n,to:t})):v instanceof Error?c(v):cd(v)?c(is(Oe.NAVIGATION_GUARD_REDIRECT,{from:t,to:v})):(a&&o.enterCallbacks[l]===a&&typeof v=="function"&&a.push(v),i())},f=r(()=>e.call(o&&o.instances[l],t,n,h));let u=Promise.resolve(f);e.length<3&&(u=u.then(h)),u.catch(v=>c(v))})}function In(e,t,n,o,l=r=>r()){const r=[];for(const a of e)for(const i in a.components){let c=a.components[i];if(!(t!=="beforeRouteEnter"&&!a.instances[i]))if(Fr(c)){const h=(c.__vccOpts||c)[t];h&&r.push(Nt(h,n,o,a,i,l))}else{let h=c();r.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${a.path}"`);const u=jc(f)?f.default:f;a.mods[i]=f,a.components[i]=u;const v=(u.__vccOpts||u)[t];return v&&Nt(v,n,o,a,i,l)()}))}}return r}function bd(e,t){const n=[],o=[],l=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const i=t.matched[a];i&&(e.matched.find(h=>as(h,i))?o.push(i):n.push(i));const c=e.matched[a];c&&(t.matched.find(h=>as(h,c))||l.push(c))}return[n,o,l]}let md=()=>location.protocol+"//"+location.host;function Kr(e,t){const{pathname:n,search:o,hash:l}=t,r=e.indexOf("#");if(r>-1){let a=l.includes(e.slice(r))?e.slice(r).length:1,i=l.slice(a);return i[0]!=="/"&&(i="/"+i),ll(i,"")}return ll(n,e)+o+l}function _d(e,t,n,o){let l=[],r=[],a=null;const i=({state:v})=>{const d=Kr(e,location),k=n.value,m=t.value;let p=0;if(v){if(n.value=d,t.value=v,a&&a===k){a=null;return}p=m?v.position-m.position:0}else o(d);l.forEach(U=>{U(n.value,k,{delta:p,type:Wn.pop,direction:p?p>0?On.forward:On.back:On.unknown})})};function c(){a=n.value}function h(v){l.push(v);const d=()=>{const k=l.indexOf(v);k>-1&&l.splice(k,1)};return r.push(d),d}function f(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(we({},v.state,{scroll:mn()}),"")}}function u(){for(const v of r)v();r=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:h,destroy:u}}function dl(e,t,n,o=!1,l=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:l?mn():null}}function gd(e){const{history:t,location:n}=window,o={value:Kr(e,n)},l={value:t.state};l.value||r(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,h,f){const u=e.indexOf("#"),v=u>-1?(n.host&&document.querySelector("base")?e:e.slice(u))+c:md()+e+c;try{t[f?"replaceState":"pushState"](h,"",v),l.value=h}catch(d){console.error(d),n[f?"replace":"assign"](v)}}function a(c,h){r(c,we({},t.state,dl(l.value.back,c,l.value.forward,!0),h,{position:l.value.position}),!0),o.value=c}function i(c,h){const f=we({},l.value,t.state,{forward:c,scroll:mn()});r(f.current,f,!0),r(c,we({},dl(o.value,c,null),{position:f.position+1},h),!1),o.value=c}return{location:o,state:l,push:i,replace:a}}function vd(e){e=sd(e);const t=gd(e),n=_d(e,t.state,t.location,t.replace);function o(r,a=!0){a||n.pauseListeners(),history.go(r)}const l=we({location:"",base:e,go:o,createHref:od.bind(null,e)},t,n);return Object.defineProperty(l,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(l,"state",{enumerable:!0,get:()=>t.state.value}),l}function yd(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),vd(e)}let Gt=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Ne=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Ne||{});const xd={type:Gt.Static,value:""},wd=/[a-zA-Z0-9_]/;function $d(e){if(!e)return[[]];if(e==="/")return[[xd]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${h}": ${d}`)}let n=Ne.Static,o=n;const l=[];let r;function a(){r&&l.push(r),r=[]}let i=0,c,h="",f="";function u(){h&&(n===Ne.Static?r.push({type:Gt.Static,value:h}):n===Ne.Param||n===Ne.ParamRegExp||n===Ne.ParamRegExpEnd?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Gt.Param,value:h,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function v(){h+=c}for(;i<e.length;){if(c=e[i++],c==="\\"&&n!==Ne.ParamRegExp){o=n,n=Ne.EscapeNext;continue}switch(n){case Ne.Static:c==="/"?(h&&u(),a()):c===":"?(u(),n=Ne.Param):v();break;case Ne.EscapeNext:v(),n=o;break;case Ne.Param:c==="("?n=Ne.ParamRegExp:wd.test(c)?v():(u(),n=Ne.Static,c!=="*"&&c!=="?"&&c!=="+"&&i--);break;case Ne.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=Ne.ParamRegExpEnd:f+=c;break;case Ne.ParamRegExpEnd:u(),n=Ne.Static,c!=="*"&&c!=="?"&&c!=="+"&&i--,f="";break;default:t("Unknown state");break}}return n===Ne.ParamRegExp&&t(`Unfinished custom RegExp for param "${h}"`),u(),a(),l}const ul="[^/]+?",Cd={sensitive:!1,strict:!1,start:!0,end:!0};var Be=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Be||{});const Ed=/[.+*?^${}()[\]/\\]/g;function Sd(e,t){const n=we({},Cd,t),o=[];let l=n.start?"^":"";const r=[];for(const h of e){const f=h.length?[]:[Be.Root];n.strict&&!h.length&&(l+="/");for(let u=0;u<h.length;u++){const v=h[u];let d=Be.Segment+(n.sensitive?Be.BonusCaseSensitive:0);if(v.type===Gt.Static)u||(l+="/"),l+=v.value.replace(Ed,"\\$&"),d+=Be.Static;else if(v.type===Gt.Param){const{value:k,repeatable:m,optional:p,regexp:U}=v;r.push({name:k,repeatable:m,optional:p});const B=U||ul;if(B!==ul){d+=Be.BonusCustomRegExp;try{`${B}`}catch(J){throw new Error(`Invalid custom RegExp for param "${k}" (${B}): `+J.message)}}let Z=m?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;u||(Z=p&&h.length<2?`(?:/${Z})`:"/"+Z),p&&(Z+="?"),l+=Z,d+=Be.Dynamic,p&&(d+=Be.BonusOptional),m&&(d+=Be.BonusRepeatable),B===".*"&&(d+=Be.BonusWildcard)}f.push(d)}o.push(f)}if(n.strict&&n.end){const h=o.length-1;o[h][o[h].length-1]+=Be.BonusStrict}n.strict||(l+="/?"),n.end?l+="$":n.strict&&!l.endsWith("/")&&(l+="(?:/|$)");const a=new RegExp(l,n.sensitive?"":"i");function i(h){const f=h.match(a),u={};if(!f)return null;for(let v=1;v<f.length;v++){const d=f[v]||"",k=r[v-1];u[k.name]=d&&k.repeatable?d.split("/"):d}return u}function c(h){let f="",u=!1;for(const v of e){(!u||!f.endsWith("/"))&&(f+="/"),u=!1;for(const d of v)if(d.type===Gt.Static)f+=d.value;else if(d.type===Gt.Param){const{value:k,repeatable:m,optional:p}=d,U=k in h?h[k]:"";if(lt(U)&&!m)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const B=lt(U)?U.join("/"):U;if(!B)if(p)v.length<2&&(f.endsWith("/")?f=f.slice(0,-1):u=!0);else throw new Error(`Missing required param "${k}"`);f+=B}}return f||"/"}return{re:a,score:o,keys:r,parse:i,stringify:c}}function Rd(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===Be.Static+Be.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Be.Static+Be.Segment?1:-1:0}function Yr(e,t){let n=0;const o=e.score,l=t.score;for(;n<o.length&&n<l.length;){const r=Rd(o[n],l[n]);if(r)return r;n++}if(Math.abs(l.length-o.length)===1){if(fl(o))return 1;if(fl(l))return-1}return l.length-o.length}function fl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const kd={strict:!1,end:!0,sensitive:!1};function Ad(e,t,n){const o=Sd($d(e.path),n),l=we(o,{record:e,parent:t,children:[],alias:[]});return t&&!l.record.aliasOf==!t.record.aliasOf&&t.children.push(l),l}function Dd(e,t){const n=[],o=new Map;t=ol(kd,t);function l(u){return o.get(u)}function r(u,v,d){const k=!d,m=hl(u);m.aliasOf=d&&d.record;const p=ol(t,u),U=[m];if("alias"in u){const J=typeof u.alias=="string"?[u.alias]:u.alias;for(const z of J)U.push(hl(we({},m,{components:d?d.record.components:m.components,path:z,aliasOf:d?d.record:m})))}let B,Z;for(const J of U){const{path:z}=J;if(v&&z[0]!=="/"){const S=v.record.path,O=S[S.length-1]==="/"?"":"/";J.path=v.record.path+(z&&O+z)}if(B=Ad(J,v,p),d?d.alias.push(B):(Z=Z||B,Z!==B&&Z.alias.push(B),k&&u.name&&!bl(B)&&a(u.name)),zr(B)&&c(B),m.children){const S=m.children;for(let O=0;O<S.length;O++)r(S[O],B,d&&d.children[O])}d=d||B}return Z?()=>{a(Z)}:$s}function a(u){if(Gr(u)){const v=o.get(u);v&&(o.delete(u),n.splice(n.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=n.indexOf(u);v>-1&&(n.splice(v,1),u.record.name&&o.delete(u.record.name),u.children.forEach(a),u.alias.forEach(a))}}function i(){return n}function c(u){const v=Pd(u,n);n.splice(v,0,u),u.record.name&&!bl(u)&&o.set(u.record.name,u)}function h(u,v){let d,k={},m,p;if("name"in u&&u.name){if(d=o.get(u.name),!d)throw is(Oe.MATCHER_NOT_FOUND,{location:u});p=d.record.name,k=we(pl(v.params,d.keys.filter(Z=>!Z.optional).concat(d.parent?d.parent.keys.filter(Z=>Z.optional):[]).map(Z=>Z.name)),u.params&&pl(u.params,d.keys.map(Z=>Z.name))),m=d.stringify(k)}else if(u.path!=null)m=u.path,d=n.find(Z=>Z.re.test(m)),d&&(k=d.parse(m),p=d.record.name);else{if(d=v.name?o.get(v.name):n.find(Z=>Z.re.test(v.path)),!d)throw is(Oe.MATCHER_NOT_FOUND,{location:u,currentLocation:v});p=d.record.name,k=we({},v.params,u.params),m=d.stringify(k)}const U=[];let B=d;for(;B;)U.unshift(B.record),B=B.parent;return{name:p,path:m,params:k,matched:U,meta:Id(U)}}e.forEach(u=>r(u));function f(){n.length=0,o.clear()}return{addRoute:r,resolve:h,removeRoute:a,clearRoutes:f,getRoutes:i,getRecordMatcher:l}}function pl(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function hl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Od(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Od(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function bl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Id(e){return e.reduce((t,n)=>we(t,n.meta),{})}function Pd(e,t){let n=0,o=t.length;for(;n!==o;){const r=n+o>>1;Yr(e,t[r])<0?o=r:n=r+1}const l=Td(e);return l&&(o=t.lastIndexOf(l,o-1)),o}function Td(e){let t=e;for(;t=t.parent;)if(zr(t)&&Yr(e,t)===0)return t}function zr({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ml(e){const t=st(_n),n=st(_o),o=ee(()=>{const c=ye(e.to);return t.resolve(c)}),l=ee(()=>{const{matched:c}=o.value,{length:h}=c,f=c[h-1],u=n.matched;if(!f||!u.length)return-1;const v=u.findIndex(as.bind(null,f));if(v>-1)return v;const d=_l(c[h-2]);return h>1&&_l(f)===d&&u[u.length-1].path!==d?u.findIndex(as.bind(null,c[h-2])):v}),r=ee(()=>l.value>-1&&Fd(n.params,o.value.params)),a=ee(()=>l.value>-1&&l.value===n.matched.length-1&&Br(n.params,o.value.params));function i(c={}){if(Md(c)){const h=t[ye(e.replace)?"replace":"push"](ye(e.to)).catch($s);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:o,href:ee(()=>o.value.href),isActive:r,isExactActive:a,navigate:i}}function Nd(e){return e.length===1?e[0]:e}const jd=sr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ml,setup(e,{slots:t}){const n=js(ml(e)),{options:o}=st(_n),l=ee(()=>({[gl(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[gl(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Nd(t.default(n));return e.custom?r:Or("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:l.value},r)}}}),gn=jd;function Md(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Fd(e,t){for(const n in t){const o=t[n],l=e[n];if(typeof o=="string"){if(o!==l)return!1}else if(!lt(l)||l.length!==o.length||o.some((r,a)=>r!==l[a]))return!1}return!0}function _l(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const gl=(e,t,n)=>e??t??n,Vd=sr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=st(Yn),l=ee(()=>e.route||o.value),r=st(cl,0),a=ee(()=>{let h=ye(r);const{matched:f}=l.value;let u;for(;(u=f[h])&&!u.components;)h++;return h}),i=ee(()=>l.value.matched[a.value]);Bs(cl,ee(()=>a.value+1)),Bs(hd,i),Bs(Yn,l);const c=pe();return Pe(()=>[c.value,i.value,e.name],([h,f,u],[v,d,k])=>{f&&(f.instances[u]=h,d&&d!==f&&h&&h===v&&(f.leaveGuards.size||(f.leaveGuards=d.leaveGuards),f.updateGuards.size||(f.updateGuards=d.updateGuards))),h&&f&&(!d||!as(f,d)||!v)&&(f.enterCallbacks[u]||[]).forEach(m=>m(h))},{flush:"post"}),()=>{const h=l.value,f=e.name,u=i.value,v=u&&u.components[f];if(!v)return vl(n.default,{Component:v,route:h});const d=u.props[f],k=d?d===!0?h.params:typeof d=="function"?d(h):d:null,p=Or(v,we({},k,t,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(u.instances[f]=null)},ref:c}));return vl(n.default,{Component:p,route:h})||p}}});function vl(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Qr=Vd;function Ud(e){const t=Dd(e.routes,e),n=e.parseQuery||fd,o=e.stringifyQuery||il,l=e.history,r=hs(),a=hs(),i=hs(),c=Ma(Ot);let h=Ot;es&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=An.bind(null,R=>""+R),u=An.bind(null,zc),v=An.bind(null,Is);function d(R,W){let K,ne;return Gr(R)?(K=t.getRecordMatcher(R),ne=W):ne=R,t.addRoute(ne,K)}function k(R){const W=t.getRecordMatcher(R);W&&t.removeRoute(W)}function m(){return t.getRoutes().map(R=>R.record)}function p(R){return!!t.getRecordMatcher(R)}function U(R,W){if(W=we({},W||c.value),typeof R=="string"){const $=Dn(n,R,W.path),D=t.resolve({path:$.path},W),P=l.createHref($.fullPath);return we($,D,{params:v(D.params),hash:Is($.hash),redirectedFrom:void 0,href:P})}let K;if(R.path!=null)K=we({},R,{path:Dn(n,R.path,W.path).path});else{const $=we({},R.params);for(const D in $)$[D]==null&&delete $[D];K=we({},R,{params:u($)}),W.params=u(W.params)}const ne=t.resolve(K,W),ge=R.hash||"";ne.params=f(v(ne.params));const g=Xc(o,we({},R,{hash:Wc(ge),path:ne.path})),y=l.createHref(g);return we({fullPath:g,hash:ge,query:o===il?pd(R.query):R.query||{}},ne,{redirectedFrom:void 0,href:y})}function B(R){return typeof R=="string"?Dn(n,R,c.value.path):we({},R)}function Z(R,W){if(h!==R)return is(Oe.NAVIGATION_CANCELLED,{from:W,to:R})}function J(R){return O(R)}function z(R){return J(we(B(R),{replace:!0}))}function S(R,W){const K=R.matched[R.matched.length-1];if(K&&K.redirect){const{redirect:ne}=K;let ge=typeof ne=="function"?ne(R,W):ne;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=B(ge):{path:ge},ge.params={}),we({query:R.query,hash:R.hash,params:ge.path!=null?{}:R.params},ge)}}function O(R,W){const K=h=U(R),ne=c.value,ge=R.state,g=R.force,y=R.replace===!0,$=S(K,ne);if($)return O(we(B($),{state:typeof $=="object"?we({},ge,$.state):ge,force:g,replace:y}),W||K);const D=K;D.redirectedFrom=W;let P;return!g&&Zc(o,ne,K)&&(P=is(Oe.NAVIGATION_DUPLICATED,{to:D,from:ne}),et(ne,ne,!0,!1)),(P?Promise.resolve(P):T(D,ne)).catch(A=>gt(A)?gt(A,Oe.NAVIGATION_GUARD_REDIRECT)?A:Ye(A):ue(A,D,ne)).then(A=>{if(A){if(gt(A,Oe.NAVIGATION_GUARD_REDIRECT))return O(we({replace:y},B(A.to),{state:typeof A.to=="object"?we({},ge,A.to.state):ge,force:g}),W||D)}else A=ce(D,ne,!0,y,ge);return M(D,ne,A),A})}function Q(R,W){const K=Z(R,W);return K?Promise.reject(K):Promise.resolve()}function E(R){const W=V.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(R):R()}function T(R,W){let K;const[ne,ge,g]=bd(R,W);K=In(ne.reverse(),"beforeRouteLeave",R,W);for(const $ of ne)$.leaveGuards.forEach(D=>{K.push(Nt(D,R,W))});const y=Q.bind(null,R,W);return K.push(y),C(K).then(()=>{K=[];for(const $ of r.list())K.push(Nt($,R,W));return K.push(y),C(K)}).then(()=>{K=In(ge,"beforeRouteUpdate",R,W);for(const $ of ge)$.updateGuards.forEach(D=>{K.push(Nt(D,R,W))});return K.push(y),C(K)}).then(()=>{K=[];for(const $ of g)if($.beforeEnter)if(lt($.beforeEnter))for(const D of $.beforeEnter)K.push(Nt(D,R,W));else K.push(Nt($.beforeEnter,R,W));return K.push(y),C(K)}).then(()=>(R.matched.forEach($=>$.enterCallbacks={}),K=In(g,"beforeRouteEnter",R,W,E),K.push(y),C(K))).then(()=>{K=[];for(const $ of a.list())K.push(Nt($,R,W));return K.push(y),C(K)}).catch($=>gt($,Oe.NAVIGATION_CANCELLED)?$:Promise.reject($))}function M(R,W,K){i.list().forEach(ne=>E(()=>ne(R,W,K)))}function ce(R,W,K,ne,ge){const g=Z(R,W);if(g)return g;const y=W===Ot,$=es?history.state:{};K&&(ne||y?l.replace(R.fullPath,we({scroll:y&&$&&$.scroll},ge)):l.push(R.fullPath,ge)),c.value=R,et(R,W,K,y),Ye()}let N;function me(){N||(N=l.listen((R,W,K)=>{if(!b.listening)return;const ne=U(R),ge=S(ne,b.currentRoute.value);if(ge){O(we(ge,{replace:!0,force:!0}),ne).catch($s);return}h=ne;const g=c.value;es&&ad(al(g.fullPath,K.delta),mn()),T(ne,g).catch(y=>gt(y,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_CANCELLED)?y:gt(y,Oe.NAVIGATION_GUARD_REDIRECT)?(O(we(B(y.to),{force:!0}),ne).then($=>{gt($,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===Wn.pop&&l.go(-1,!1)}).catch($s),Promise.reject()):(K.delta&&l.go(-K.delta,!1),ue(y,ne,g))).then(y=>{y=y||ce(ne,g,!1),y&&(K.delta&&!gt(y,Oe.NAVIGATION_CANCELLED)?l.go(-K.delta,!1):K.type===Wn.pop&&gt(y,Oe.NAVIGATION_ABORTED|Oe.NAVIGATION_DUPLICATED)&&l.go(-1,!1)),M(ne,g,y)}).catch($s)}))}let F=hs(),I=hs(),L;function ue(R,W,K){Ye(R);const ne=I.list();return ne.length?ne.forEach(ge=>ge(R,W,K)):console.error(R),Promise.reject(R)}function Ke(){return L&&c.value!==Ot?Promise.resolve():new Promise((R,W)=>{F.add([R,W])})}function Ye(R){return L||(L=!R,me(),F.list().forEach(([W,K])=>R?K(R):W()),F.reset()),R}function et(R,W,K,ne){const{scrollBehavior:ge}=e;if(!es||!ge)return Promise.resolve();const g=!K&&id(al(R.fullPath,0))||(ne||!K)&&history.state&&history.state.scroll||null;return dn().then(()=>ge(R,W,g)).then(y=>y&&rd(y)).catch(y=>ue(y,R,W))}const je=R=>l.go(R);let mt;const V=new Set,b={currentRoute:c,listening:!0,addRoute:d,removeRoute:k,clearRoutes:t.clearRoutes,hasRoute:p,getRoutes:m,resolve:U,options:e,push:J,replace:z,go:je,back:()=>je(-1),forward:()=>je(1),beforeEach:r.add,beforeResolve:a.add,afterEach:i.add,onError:I.add,isReady:Ke,install(R){R.component("RouterLink",gn),R.component("RouterView",Qr),R.config.globalProperties.$router=b,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>ye(c)}),es&&!mt&&c.value===Ot&&(mt=!0,J(l.location).catch(ne=>{}));const W={};for(const ne in Ot)Object.defineProperty(W,ne,{get:()=>c.value[ne],enumerable:!0});R.provide(_n,b),R.provide(_o,Kl(W)),R.provide(Yn,c);const K=R.unmount;V.add(R),R.unmount=function(){V.delete(R),V.size<1&&(h=Ot,N&&N(),N=null,c.value=Ot,mt=!1,L=!1),K()}}};function C(R){return R.reduce((W,K)=>W.then(()=>E(K)),Promise.resolve())}return b}function ds(){return st(_n)}function Jr(e){return st(_o)}const Ld={__name:"App",setup(e){return(t,n)=>(x(),At(ye(Qr)))}},qs=window.djangoConfig?.projectId??20,Ie=window.djangoConfig?.baseUrl??"http://localhost:8000",yl=window.djangoConfig?.csrfToken??"falsocsrf",be={apiBaseUrl:Ie,csrfToken:yl,idProject:qs,urlLogo:Ie+"/static/img/logo.png",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":yl},URLProjectData:Ie+"/api/projects/all-info/"+qs+"/",URLSourcesAvailable:Ie+"/api/projects/resources/available/",URLTechnicalsAvailable:Ie+"/api/technicals/avaliables/",URLVehiclesAvailable:Ie+"/api/vehicles/avaliables/",URLResourcesProject:Ie+"/api/projects/"+qs+"/resources/",URLUpdateResourceItem:Ie+"/api/projects/resources/update/",URLDeleteResourceProject:Ie+"/api/projects/resources/delete/${id_project_resource}/",URLSheetProjects:Ie+"/api/workorders/sheets/project/"+qs+"/",URLAddSheetProject:Ie+"/api/workorders/sheets/create/",URLUpdateSheetProject:Ie+"/api/workorders/sheets/update/",URLAddResourceToProject:Ie+"/api/projects/resources/add/",URLCreateCustodyChain:Ie+"/api/workorders/custody_chain/create/",URLCustodyChainDetail:Ie+"/api/workorders/custody_chain/detail/${id}/",URLUpdateCustodyChain:Ie+"/api/workorders/custody_chain/${id}/edit/",PDFCustodyChainReport:Ie+"/reports/custody-chain/${id}/",PDFCertFinalDisposition:Ie+"/reports/final-disposition/${id}/",URLWorkSheetReport:Ie+"/reports/worksheet/${id}/",URLReleaseResource:Ie+"/api/projects/resources/release/"},Qt=zt("projectResourcesStore",{state:()=>({selectedResource:null,resourcesProject:[],newResourceProject:{id:null,project:null,resource:Object,type:null,detailed_description:null,cost:0,frecuency_type:"DAY",interval_days:2,week_days:null,month_days:null,operation_start_date:null,operation_end_date:null,is_retired:!1,retirement_date:null,retirement_reason:null,is_active:!0,is_selected:!1,is_confirm_delete:!1}}),actions:{async fetchResourcesProject(){try{const e=await fetch(be.URLResourcesProject,{method:"GET",headers:be.headers});if(!e.ok)throw new Error("Failed to fetch project resources");const t=await e.json();this.resourcesProject=t.data}catch(e){console.error("Error fetching project resources:",e),this.resourcesProject=[]}},async addResourcesToProject(e){try{const t=[];e.forEach(l=>{const r=l.resource?.type_equipment==="SERVIC",a=r?l.physical_equipment_code||0:l.resource_id,i={project_id:be.idProject,resource_id:l.resource_id,detailed_description:l.detailed_description,operation_start_date:l.operation_start_date,frequency_type:l.frequency_type||"MONTH",physical_equipment_code:a};switch(r?i.maintenance_cost=l.maintenance_cost||0:i.cost=l.cost||0,l.frequency_type){case"DAY":const c=parseInt(l.interval_days);i.interval_days=isNaN(c)||c<1?1:c;break;case"WEEK":i.weekdays=l.weekdays||[];break;case"MONTH":i.monthdays=l.monthdays||[];break}if(t.push(i),l.include_maintenance&&!r){const c={project_id:be.idProject,resource_id:l.resource_id,detailed_description:`Mantenimiento - ${l.detailed_description}`,maintenance_cost:l.maintenance_cost||0,operation_start_date:l.operation_start_date,frequency_type:l.maintenance_frequency_type||"DAY",physical_equipment_code:l.resource_id};switch(l.maintenance_frequency_type){case"DAY":const h=parseInt(l.maintenance_interval_days);c.interval_days=isNaN(h)||h<1?1:h;break;case"WEEK":c.weekdays=l.maintenance_weekdays||[];break;case"MONTH":c.monthdays=l.maintenance_monthdays||[];break}t.push(c)}});const n=await fetch(be.URLAddResourceToProject,{method:"POST",headers:be.headers,body:JSON.stringify(t)}),o=await n.json();if(!n.ok)throw new Error(o.error||`Error al agregar recursos. Se agregaron ${o.added||0} de ${t.length}`);return o}catch(t){throw console.error("Error adding resources to project:",t),t}},async updateResourceProject(e){try{const t=await fetch(be.URLUpdateResourceItem,{method:"PUT",headers:be.headers,body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to update project resource");const o=this.resourcesProject.findIndex(l=>l.id===e.id);return o!==-1&&(this.resourcesProject[o]={...this.resourcesProject[o],...n.data}),n.data}catch(t){throw console.error("Error updating project resource:",t),t}},async deleteResourceProject(e){try{const t=be.URLDeleteResourceProject.replace("${id_project_resource}",e),n=await fetch(t,{method:"DELETE",headers:be.headers});if(!n.ok){let o="Failed to delete project resource";try{o=(await n.json()).error||o}catch{o=await n.text()||o}throw new Error(o)}this.resourcesProject=this.resourcesProject.filter(o=>o.id!==e)}catch(t){throw console.error("Error deleting project resource:",t),t}},async releaseResourceProject(e){try{const t=await fetch(be.URLReleaseResource,{method:"PUT",headers:be.headers,body:JSON.stringify({id:e})}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to release project resource");const o=this.resourcesProject.findIndex(l=>l.id===e);return o!==-1&&(this.resourcesProject[o].is_active=!1),n}catch(t){throw console.error("Error releasing project resource:",t),t}}}}),qd=e=>{const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)||t===null||t===void 0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(0):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},Hd=e=>{const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)||t===null||t===void 0?"0.00":new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},zn=e=>{if(!e)return"--";const[t,n,o]=e.split("-"),l=new Date(t,n-1,o);return new Intl.DateTimeFormat("es-GT",{day:"2-digit",month:"2-digit",year:"numeric"}).format(l)},Bd={class:"space-y-3"},Gd={class:"flex justify-between items-center mb-4"},Wd={class:"overflow-x-auto"},Kd={class:"table table-zebra w-full"},Yd={key:0},zd={class:"p-2 border border-gray-300"},Qd={class:"flex items-center justify-between"},Jd={key:0,class:"badge badge-success badge-sm gap-1",title:"Recurso activo"},Xd={key:1,class:"badge badge-error badge-sm gap-1",title:"Recurso inactivo"},Zd={class:"font-mono"},eu={class:"p-2 border border-gray-300 text-center"},tu={class:"p-2 border border-gray-300"},su={class:"flex items-center gap-2"},nu={key:0,class:"text-red-500 border rounded p-1 bg-red-100 text-xs mr-1"},ou={key:1,class:"text-blue-600 border rounded p-1 bg-blue-100 text-xs mr-1",title:"Este recurso est en uso en cadenas de custodia"},lu={class:"p-2 border border-gray-300"},ru={class:"p-2 border border-gray-300 text-right font-mono"},au={class:"p-2 border border-gray-300 text-center"},iu={class:"text-xs"},cu={class:"p-2 border border-gray-300 text-end font-mono"},du={class:"p-2 border border-gray-300 text-end"},uu={class:"flex gap-2 justify-end"},fu=["title","disabled","onClick"],pu=["title","disabled","onClick"],hu={class:"stats shadow w-full"},bu={class:"stat"},mu={class:"stat-value text-primary"},_u={class:"stat-desc"},gu={class:"stat text-end"},vu={class:"stat-value text-info text-end"},yu={__name:"TabResources",emits:["edit-resource"],setup(e,{emit:t}){const n=t,o=Qt(),l=ee(()=>[...o.resourcesProject].sort((h,f)=>h.type_resource==="EQUIPO"&&f.type_resource==="SERVICIO"?-1:h.type_resource==="SERVICIO"&&f.type_resource==="EQUIPO"?1:h.id-f.id)),r=pe(null),a=h=>parseFloat(h)===0,i=h=>{n("edit-resource",h)},c=async h=>{if(r.value===h.id)try{await o.deleteResourceProject(h.id),r.value=null}catch(f){console.error("Error al eliminar recurso:",f),alert(f.message||"Error al eliminar el recurso"),r.value=null}else r.value=h.id};return(h,f)=>(x(),w("div",Bd,[s("div",Gd,[f[1]||(f[1]=s("h2",{class:"font-semibold text-gray-800 flex items-center gap-2"},[s("i",{class:"las la-tools text-blue-600"}),q(" Recursos Asignados ")],-1)),Ee(ye(gn),{class:"btn btn-primary btn-sm",to:{name:"resource-form"}},{default:Rt(()=>[...f[0]||(f[0]=[s("i",{class:"las la-plus"},null,-1),q(" Asignar Recursos ",-1)])]),_:1})]),s("div",Wd,[s("table",Kd,[f[7]||(f[7]=s("thead",null,[s("tr",{class:"bg-gray-500 text-white"},[s("th",{class:"p-2 border border-gray-100 text-center"},"#"),s("th",{class:"p-2 border border-gray-100 text-center"},"Tipo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Cdigo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Descripcin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Costo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Frecuencia"),s("th",{class:"p-2 border border-gray-100 text-center"},"Fecha Inicio"),s("th",{class:"p-2 border border-gray-100 text-center"},"Acciones")])],-1)),s("tbody",null,[l.value.length===0?(x(),w("tr",Yd,[...f[2]||(f[2]=[s("td",{colspan:"8",class:"text-center text-gray-500 py-8"},[s("i",{class:"las la-inbox text-4xl"}),s("p",null,"No hay recursos asignados a este proyecto")],-1)])])):(x(!0),w(re,{key:1},_e(l.value,u=>(x(),w("tr",{key:u.id,class:le({"text-red-500 font-bold bg-red-100":a(u.cost)})},[s("td",zd,[s("div",Qd,[u.is_active?(x(),w("span",Jd,[...f[3]||(f[3]=[s("i",{class:"las la-check-circle"},null,-1)])])):(x(),w("span",Xd,[...f[4]||(f[4]=[s("i",{class:"las la-times-circle"},null,-1)])])),s("span",Zd,_(u.id),1)])]),s("td",eu,_(u.type_resource),1),s("td",tu,[s("div",su,[u.is_retired?(x(),w("span",nu,"RETIRADO")):te("",!0),u.is_deleteable?te("",!0):(x(),w("span",ou,"EN USO")),q(" "+_(u.resource_item_code),1)])]),s("td",lu,_(u.detailed_description),1),s("td",ru,_(ye(Hd)(u.cost)),1),s("td",au,[s("span",iu,_(u.frequency_type==="DAY"?"Diario":u.frequency_type==="WEEK"?"Semanal":u.frequency_type==="MONTH"?"Mensual":u.frequency_type),1)]),s("td",cu,_(ye(zn)(u.operation_start_date)),1),s("td",du,[s("div",uu,[s("button",{class:le(["btn btn-xs border-blue-500 text-teal-500 bg-white",{"opacity-50 cursor-not-allowed":!u.is_active}]),title:u.is_active?"Editar":"No se puede editar: el recurso est inactivo",disabled:!u.is_active,onClick:v=>i(u)},[...f[5]||(f[5]=[s("i",{class:"las la-edit"},null,-1),q(" EDITAR ",-1)])],10,fu),s("button",{class:le(["btn btn-xs border-red-500 text-red-500 bg-white",{"opacity-50 cursor-not-allowed":!u.is_deleteable||!u.is_active,"bg-red-500 text-black":r.value===u.id}]),title:u.is_active?u.is_deleteable?r.value===u.id?"Haz clic nuevamente para confirmar":"Eliminar recurso":"No se puede eliminar: el recurso est en uso en una o ms cadenas de custodia":"No se puede eliminar: el recurso est inactivo",disabled:!u.is_deleteable||!u.is_active,onClick:v=>c(u)},[f[6]||(f[6]=s("i",{class:"las la-trash"},null,-1)),q(" "+_(r.value===u.id?"CONFIRMAR":"ELIMINAR"),1)],10,pu)])])],2))),128))])])]),s("div",hu,[s("div",bu,[f[8]||(f[8]=s("div",{class:"stat-title"},"Total Recursos",-1)),s("div",mu,_(l.value.length),1),s("div",_u,_(l.value.filter(u=>u.type_resource==="EQUIPO").length)+" Equipos y "+_(l.value.filter(u=>u.type_resource==="SERVICIO").length)+" Servicios",1)]),s("div",gu,[f[9]||(f[9]=s("div",{class:"stat-title"},"Costo Total",-1)),s("div",vu,_(ye(qd)(l.value.reduce((u,v)=>u+parseFloat(v.cost),0))),1),f[10]||(f[10]=s("div",{class:"stat-desc"},"Suma de todos los recursos",-1))])])]))}},Ve=zt("projectStore",{state:()=>({project:{id:null,partner_id:null,partner_name:null,location:null,cardinal_point:null,contact_name:null,contact_phone:null,start_date:null,end_date:null,is_closed:!1},workOrders:[],workOrdersCount:0,totalCustodyChains:0,loading:!1,error:null}),getters:{allCustodyChains:e=>e.workOrders.flatMap(t=>t.custody_chains||[]),getWorkOrderById:e=>t=>e.workOrders.find(n=>n.id===t),getCustodyChainById:e=>t=>{for(const n of e.workOrders){const o=n.custody_chains?.find(l=>l.id===t);if(o)return o}return null},projectStats:e=>({totalWorkOrders:e.workOrdersCount,totalCustodyChains:e.totalCustodyChains,inProgressWorkOrders:e.workOrders.filter(t=>t.status==="IN_PROGRESS").length,invoicedWorkOrders:e.workOrders.filter(t=>t.status==="INVOICED").length})},actions:{async fetchProjectData(){this.loading=!0,this.error=null,console.log(`Fetching all info for project ${be.idProject}...`);try{const e=await fetch(be.URLProjectData,{method:"GET",headers:be.headers});if(!e.ok)throw new Error(`Failed to fetch project info: ${e.status}`);const t=await e.json();if(t.success&&t.data)this.project=t.data.project,this.workOrders=t.data.work_orders||[],this.workOrdersCount=t.data.work_orders_count||0,this.totalCustodyChains=t.data.total_custody_chains||0,console.log(`Project ${this.project.id} loaded successfully with ${this.workOrdersCount} work orders`);else throw new Error(t.error||"Invalid response format")}catch(e){console.error("Error fetching project data:",e),this.error=e.message,this.resetProjectData()}finally{this.loading=!1}},async fetchProjectAllInfo(e){this.loading=!0,this.error=null,console.log(`Fetching all info for project ${e}...`);try{const t=`${be.apiBaseUrl}/api/projects/all-info/${e}/`,n=await fetch(t,{method:"GET",headers:be.headers});if(!n.ok)throw new Error(`Failed to fetch project info: ${n.status}`);const o=await n.json();if(o.success&&o.data)this.project=o.data.project,this.workOrders=o.data.work_orders||[],this.workOrdersCount=o.data.work_orders_count||0,this.totalCustodyChains=o.data.total_custody_chains||0,console.log(`Project ${e} loaded successfully with ${this.workOrdersCount} work orders`);else throw new Error(o.error||"Invalid response format")}catch(t){console.error("Error fetching project all info:",t),this.error=t.message,this.resetProjectData()}finally{this.loading=!1}},resetProjectData(){this.project={id:null,partner_id:null,partner_name:null,location:null,cardinal_point:null,contact_name:null,contact_phone:null,start_date:null,end_date:null,is_closed:!1},this.workOrders=[],this.workOrdersCount=0,this.totalCustodyChains=0},updateWorkOrder(e,t){const n=this.workOrders.findIndex(o=>o.id===e);n!==-1&&(this.workOrders[n]={...this.workOrders[n],...t})},updateCustodyChain(e,t){for(const n of this.workOrders){const o=n.custody_chains?.findIndex(l=>l.id===e);if(o!==-1&&o!==void 0){n.custody_chains[o]={...n.custody_chains[o],...t};break}}},async refreshCurrentProject(){await this.fetchProjectData()}}}),go=zt("sheetProjectsStore",{state:()=>({newSheetProject:{id:null,project:null,issue_date:null,period_start:null,period_end:null,status:"IN_PROGRESS",series_code:"PSL-PS-00000-00",service_type:"ALQUILER Y MANTENIMIENTO",contact_reference:null,contact_phone_reference:null},loading:!1,error:null}),getters:{sheetProjects:()=>Ve().workOrders||[],getSheetProjectById:()=>e=>Ve().getWorkOrderById(e),hasInProgressSheet:()=>Ve().workOrders.some(t=>t.status==="IN_PROGRESS"),lastActiveSheetProjectID:()=>Ve().workOrders.find(n=>n.status==="IN_PROGRESS")?.id||null,getCustodyChainsForSheet:()=>e=>Ve().getWorkOrderById(e)?.custody_chains||[]},actions:{async addSheetProject(e){this.loading=!0,this.error=null,console.log("Adding new sheet project",e);try{const t={project_id:e.project,period_start:e.period_start,service_type:e.service_type};e.contact_reference&&(t.contact_reference=e.contact_reference),e.contact_phone_reference&&(t.contact_phone_reference=e.contact_phone_reference);const n=await fetch(be.URLAddSheetProject,{method:"POST",headers:be.headers,body:JSON.stringify(t)}),o=await n.json();if(!n.ok)throw new Error(o.error||`HTTP error! status: ${n.status}`);return await Ve().refreshCurrentProject(),o.data.id}catch(t){throw console.error("Error adding sheet project:",t),this.error=t.message,t}finally{this.loading=!1}},async updateSheetProject(e){this.loading=!0,this.error=null,console.log("Updating sheet project:",e);try{const t=await fetch(be.URLUpdateSheetProject,{method:"PUT",headers:be.headers,body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw new Error(n.error||`HTTP error! status: ${t.status}`);return await Ve().refreshCurrentProject(),n.data}catch(t){throw console.error("Error updating sheet project:",t),this.error=t.message,t}finally{this.loading=!1}},async closeSheetProject(e){this.loading=!0,this.error=null,console.log("Closing sheet project with ID:",e);try{const n=Ve().getWorkOrderById(e);if(!n)throw new Error("Planilla no encontrada");return await this.updateSheetProject({...n,status:"INVOICED",period_end:new Date().toISOString().split("T")[0]}),!0}catch(t){throw console.error("Error closing sheet project:",t),this.error=t.message,t}finally{this.loading=!1}},initializeNewSheetProject(e){this.newSheetProject={id:null,project:e.id,issue_date:null,period_start:null,period_end:null,status:"IN_PROGRESS",series_code:"PSL-PS-00000-00",service_type:"ALQUILER Y MANTENIMIENTO",contact_reference:e.contact_name,contact_phone_reference:e.contact_phone}},resetNewSheetProject(){this.newSheetProject={id:null,project:null,issue_date:null,period_start:null,period_end:null,status:"IN_PROGRESS",series_code:"PSL-PS-00000-00",service_type:"ALQUILER Y MANTENIMIENTO",contact_reference:null,contact_phone_reference:null}}}}),xu={class:"space-y-3"},wu={class:"flex justify-between items-center mb-4"},$u={key:1,class:"text-amber-700 badge bg-yellow-100"},Cu={class:"overflow-x-auto"},Eu={class:"table table-zebra w-full"},Su={key:0},Ru={class:"p-2 border border-gray-300"},ku={class:"p-2 border border-gray-300 font-mono"},Au={class:"p-2 border border-gray-300"},Du={class:"p-2 border border-gray-300 text-end"},Ou={class:"p-2 border border-gray-300 text-end"},Iu={class:"p-2 border border-gray-300 text-end"},Pu={class:"p-2 border border-gray-300"},Tu={class:"p-2 border border-gray-300"},Nu={class:"p-2 border border-gray-300"},ju={class:"p-2 border border-gray-300 text-right font-mono"},Mu={class:"p-2 border border-gray-300 text-right font-mono"},Fu={class:"p-2 border border-gray-300 text-right font-mono"},Vu={class:"p-2 border border-gray-300 text-end"},Uu={class:"flex gap-2 justify-end"},Lu=["onClick"],qu=["onClick"],Hu=["href"],Bu=["href"],Gu={__name:"TabSheetProject",setup(e){const t=ds(),n=Ve();go();const o=ee(()=>n.workOrders||[]),l=ee(()=>o.value.some(f=>f.status==="IN_PROGRESS")),r=ee(()=>o.value.map(f=>{const u=f.custody_chains||[],v=u.reduce((m,p)=>m+(p.total_gallons||0),0),d=u.reduce((m,p)=>m+(p.total_barrels||0),0),k=u.reduce((m,p)=>m+(p.total_cubic_meters||0),0);return{...f,calculated_total_gallons:v,calculated_total_barrels:d,calculated_total_cubic_meters:k,custody_chains_count:u.length}})),a=f=>f?new Intl.DateTimeFormat("es-EC",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(f)):"N/A",i=f=>({IN_PROGRESS:{text:"EN EJECUCIN",class:"bg-green-500 text-white"},INVOICED:{text:"FACTURADO",class:"bg-cyan-500 text-white"},CANCELLED:{text:"CANCELADO",class:"bg-orange-500 text-white"}})[f]||{text:f,class:"bg-gray-500 text-white"},c=()=>{t.push({name:"sheet-project-form"})},h=f=>{t.push({name:"sheet-project-view",params:{id:f}})};return(f,u)=>(x(),w("div",xu,[s("div",wu,[u[2]||(u[2]=s("h2",{class:"font-semibold text-gray-800 flex items-center gap-2"},[s("i",{class:"las la-file-invoice-dollar text-blue-600"}),q(" Planillas del Proyecto ")],-1)),l.value?(x(),w("div",$u,[...u[1]||(u[1]=[s("i",{class:"las la-exclamation-triangle"},null,-1),q(" PLANILLA EN EJECUCIN ",-1)])])):(x(),w("button",{key:0,onClick:c,class:"btn btn-primary btn-sm"},[...u[0]||(u[0]=[s("i",{class:"las la-plus"},null,-1),q(" Crear Nueva Planilla ",-1)])]))]),s("div",Cu,[s("table",Eu,[u[8]||(u[8]=s("thead",null,[s("tr",{class:"bg-gray-500 text-white"},[s("th",{class:"p-2 border border-gray-100 text-center"},"#"),s("th",{class:"p-2 border border-gray-100 text-center"},"Serie"),s("th",{class:"p-2 border border-gray-100 text-center"},"Estado"),s("th",{class:"p-2 border border-gray-100 text-center"},"Fecha Emisin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Perodo Inicio"),s("th",{class:"p-2 border border-gray-100 text-center"},"Perodo Fin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Contacto Ref."),s("th",{class:"p-2 border border-gray-100 text-center"},"Telfono"),s("th",{class:"p-2 border border-gray-100 text-center"},"Tipo Servicio"),s("th",{class:"p-2 border border-gray-100 text-center"},"Galones"),s("th",{class:"p-2 border border-gray-100 text-center"},"Barriles"),s("th",{class:"p-2 border border-gray-100 text-center"},"M"),s("th",{class:"p-2 border border-gray-100 text-center"},"Acciones")])],-1)),s("tbody",null,[r.value.length===0?(x(),w("tr",Su,[...u[3]||(u[3]=[s("td",{colspan:"13",class:"text-center text-gray-500 py-8"},[s("i",{class:"las la-inbox text-4xl"}),s("p",null,"No hay planillas registradas para este proyecto")],-1)])])):(x(!0),w(re,{key:1},_e(r.value,v=>(x(),w("tr",{key:v.id},[s("td",Ru,_(v.id),1),s("td",ku,_(v.series_code),1),s("td",Au,[s("span",{class:le(["badge px-3 py-1 rounded text-xs font-medium",i(v.status).class])},_(i(v.status).text),3)]),s("td",Du,_(a(v.issue_date)),1),s("td",Ou,_(a(v.period_start)),1),s("td",Iu,_(v.period_end?a(v.period_end):"--"),1),s("td",Pu,_(v.contact_reference||"N/A"),1),s("td",Tu,_(v.contact_phone_reference||"N/A"),1),s("td",Nu,_(v.service_type),1),s("td",ju,_(parseFloat(v.calculated_total_gallons||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),s("td",Mu,_(parseFloat(v.calculated_total_barrels||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),s("td",Fu,_(parseFloat(v.calculated_total_cubic_meters||0).toFixed(2)),1),s("td",Vu,[s("div",Uu,[s("button",{onClick:d=>f.editSheet(v),class:"btn btn-xs border-blue-500 text-teal-500 bg-white",title:"Editar planilla"},[...u[4]||(u[4]=[s("i",{class:"las la-edit"},null,-1),q(" EDITAR ",-1)])],8,Lu),s("button",{onClick:d=>h(v.id),class:"btn btn-xs border-purple-500 text-purple-500 bg-white",title:"Ver cadenas de custodia"},[u[5]||(u[5]=s("i",{class:"las la-link"},null,-1)),q(" C. CUSTODIA ("+_(v.custody_chains_count)+") ",1)],8,qu),s("a",{href:ye(be).URLWorkSheetReport.replace("${id}",v.id),target:"_blank",class:"btn btn-xs border-green-500 text-green-500 bg-white",title:"Descargar reporte PDF de la planilla"},[...u[6]||(u[6]=[s("i",{class:"las la-file-pdf"},null,-1),q(" PLANILLA ",-1)])],8,Hu),s("a",{href:ye(be).PDFCertFinalDisposition.replace("${id}",v.id),target:"_blank",class:"btn btn-xs border-amber-500 text-amber-600 bg-white",title:"Descargar certificado de disposicin final"},[...u[7]||(u[7]=[s("i",{class:"las la-certificate"},null,-1),q(" CDF ",-1)])],8,Bu)])])]))),128))])])])]))}};function Wu(e,t,n){const o=[],{frequency_type:l,interval_days:r,weekdays:a,monthdays:i}=e;if(l==="DAY"){const c=r===0?1:r;let h=new Date(t);for(;h<=n;)o.push(new Date(h)),h.setDate(h.getDate()+c)}else if(l==="WEEK"){if(!a||a.length===0)return console.warn("Recurso WEEK sin weekdays definidos:",e),o;let c=new Date(t);for(;c<=n;){const h=(c.getDay()+6)%7;a.includes(h)&&o.push(new Date(c)),c.setDate(c.getDate()+1)}}else if(l==="MONTH"){if(!i||i.length===0)return console.warn("Recurso MONTH sin monthdays definidos:",e),o;let c=new Date(t);for(;c<=n;){const h=c.getDate();i.includes(h)&&o.push(new Date(c)),c.setDate(c.getDate()+1)}}return o}function Ku(e,t=90,n=null){const o=n?new Date(n):new Date;o.setHours(0,0,0,0);const l=new Date(o);l.setDate(o.getDate()+t);const r=[];return e.forEach(a=>{if(!a.is_active||a.is_retired||a.type_resource!=="SERVICIO")return;if(!a.operation_start_date){console.warn("Recurso sin fecha de inicio de operacin:",a);return}const[i,c,h]=a.operation_start_date.split("-").map(Number),f=new Date(i,c-1,h),u=f>o?f:o;Wu(a,u,l).forEach(d=>{r.push({resource_id:a.id,resource_item_id:a.resource_item_id,resource_code:a.resource_item_code,resource_name:a.resource_item_name,description:a.detailed_description,cost:parseFloat(a.cost),frequency_type:a.frequency_type,interval_days:a.interval_days,weekdays:a.weekdays,monthdays:a.monthdays,operation_start_date:a.operation_start_date,scheduled_date:d.toISOString().split("T")[0],day_of_week:d.toLocaleDateString("es-GT",{weekday:"long"}),week_number:Yu(d),days_until:Math.ceil((d-o)/(1e3*60*60*24))})})}),r.sort((a,i)=>new Date(a.scheduled_date)-new Date(i.scheduled_date))}function Yu(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),n=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-n);const o=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-o)/864e5+1)/7)}function zu(e){return e.reduce((t,n)=>{const o=`Semana ${n.week_number}`;return t[o]||(t[o]=[]),t[o].push(n),t},{})}function Qu(e){return e.reduce((t,n)=>{const l=new Date(n.scheduled_date).toLocaleDateString("es-GT",{year:"numeric",month:"long"});return t[l]||(t[l]=[]),t[l].push(n),t},{})}function Ju(e){return{total_maintenances:e.length,total_cost:e.reduce((t,n)=>t+n.cost,0),resources_count:new Set(e.map(t=>t.resource_id)).size,by_week:zu(e),by_month:Qu(e)}}const Xu={class:"space-y-4"},Zu={class:"bg-slate-700 rounded-lg p-3 shadow border border-slate-600"},ef={class:"flex items-center justify-between"},tf={class:"text-center flex-1"},sf={class:"text-white font-bold text-xl capitalize"},nf={class:"grid grid-cols-3 gap-2 mt-3"},of={class:"bg-white rounded-lg p-3 text-center border border-gray-200"},lf={class:"text-gray-800 font-bold text-2xl"},rf={class:"bg-white rounded-lg p-3 text-center border border-gray-200"},af={class:"text-gray-800 font-bold text-2xl"},cf={class:"bg-white rounded-lg p-3 text-center border border-gray-200"},df={class:"text-gray-800 font-bold text-lg"},uf={key:0,class:"alert alert-warning"},ff={key:1,class:"alert alert-info"},pf={key:2,class:"bg-white rounded-lg shadow-lg overflow-hidden border-2 border-slate-300"},hf={class:"grid grid-cols-7 bg-slate-700"},bf=["onClick"],mf={class:"flex items-center justify-between mb-1"},_f={key:0,class:"badge badge-xs badge-success"},gf={key:0,class:"space-y-0.5"},vf={class:"text-xs truncate text-gray-600"},yf={key:0,class:"text-xs text-gray-500 pl-3"},xf={key:3,class:"bg-white rounded-lg shadow-lg p-4 border-l-4 border-lime-500"},wf={class:"flex items-center justify-between mb-4"},$f={class:"text-lg font-semibold text-gray-700"},Cf={class:"overflow-x-auto"},Ef={class:"table table-sm"},Sf={class:"text-xs"},Rf={class:"badge badge-outline badge-sm"},kf={class:"text-xs font-medium"},Af={class:"text-xs text-gray-600"},Df={class:"text-xs"},Of={class:"text-xs text-right font-semibold"},If={class:"bg-lime-100 font-semibold"},Pf={class:"text-right text-xs"},Tf={key:4,class:"alert alert-info"},Nf={__name:"TabCalendar",setup(e){const t=Qt(),{resourcesProject:n}=Nc(t),o=pe(!0),l=["Lun","Mar","Mi","Jue","Vie","Sb","Dom"],r=pe(0),a=pe(null),i=ee(()=>{const S=new Date,O=S.getFullYear(),Q=S.getMonth()+r.value,E=new Date(O,Q,1),T=new Date(O,Q+1,0);return{year:E.getFullYear(),month:E.getMonth(),firstDay:E,lastDay:T,daysInMonth:T.getDate()}}),c=ee(()=>{if(!n.value||n.value.length===0)return[];const{firstDay:S,lastDay:O}=i.value,Q=Math.ceil((O-S)/(1e3*60*60*24))+1;return Ku(n.value,Q,S)}),h=ee(()=>{const S={};return c.value.forEach(O=>{S[O.scheduled_date]||(S[O.scheduled_date]=[]),S[O.scheduled_date].push(O)}),S}),f=ee(()=>{const{firstDay:S,daysInMonth:O,year:Q,month:E}=i.value,T=[];let M=(S.getDay()+6)%7,ce=[];for(let N=0;N<M;N++)ce.push(null);for(let N=1;N<=O;N++){const me=`${Q}-${String(E+1).padStart(2,"0")}-${String(N).padStart(2,"0")}`,F=h.value[me]||[];ce.push({day:N,dateStr:me,maintenances:F,isToday:u(Q,E,N),hasMaintenances:F.length>0}),ce.length===7&&(T.push(ce),ce=[])}if(ce.length>0){for(;ce.length<7;)ce.push(null);T.push(ce)}return T}),u=(S,O,Q)=>{const E=new Date;return E.getFullYear()===S&&E.getMonth()===O&&E.getDate()===Q},v=ee(()=>Ju(c.value)),d=ee(()=>{const{firstDay:S}=i.value;return{monthYear:S.toLocaleDateString("es-GT",{month:"long",year:"numeric"})}}),k=()=>{r.value-=1,a.value=null},m=()=>{r.value+=1,a.value=null},p=()=>{r.value=0,a.value=null},U=S=>{S&&S.hasMaintenances&&(a.value=a.value?.dateStr===S.dateStr?null:S)},B=S=>new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(S),Z=S=>({DAY:"bg-blue-500",WEEK:"bg-purple-500",MONTH:"bg-orange-500"})[S]||"bg-gray-500",J=S=>({DAY:"badge-primary",WEEK:"badge-secondary",MONTH:"badge-accent"})[S]||"badge-ghost",z=S=>{switch(S.frequency_type){case"DAY":return S.interval_days===0?"Diario":`Cada ${S.interval_days} das`;case"WEEK":return"Semanal";case"MONTH":return"Mensual";default:return S.frequency_type}};return bt(async()=>{(!n.value||n.value.length===0)&&await t.fetchResourcesProject(),o.value=!1}),Pe(n,S=>{S&&S.length>0&&(o.value=!1)},{immediate:!0}),(S,O)=>(x(),w("div",Xu,[s("div",Zu,[s("div",ef,[s("button",{onClick:k,class:"btn btn-circle btn-sm bg-white text-gray-600 hover:bg-gray-50 border-gray-300"},[...O[1]||(O[1]=[s("i",{class:"las la-chevron-left text-xl"},null,-1)])]),s("div",tf,[s("h2",sf,_(d.value.monthYear),1),r.value!==0?(x(),w("button",{key:0,onClick:p,class:"btn btn-xs bg-white text-gray-600 hover:bg-gray-50 border-gray-300 mt-2"},[...O[2]||(O[2]=[s("i",{class:"las la-calendar-day"},null,-1),q(" Mes Actual ",-1)])])):te("",!0)]),s("button",{onClick:m,class:"btn btn-circle btn-sm bg-white text-gray-600 hover:bg-gray-50 border-gray-300"},[...O[3]||(O[3]=[s("i",{class:"las la-chevron-right text-xl"},null,-1)])])]),s("div",nf,[s("div",of,[O[4]||(O[4]=s("p",{class:"text-gray-500 text-xs"},"Mantenimientos",-1)),s("p",lf,_(v.value.total_maintenances),1)]),s("div",rf,[O[5]||(O[5]=s("p",{class:"text-gray-500 text-xs"},"Recursos",-1)),s("p",af,_(v.value.resources_count),1)]),s("div",cf,[O[6]||(O[6]=s("p",{class:"text-gray-500 text-xs"},"Costo Total",-1)),s("p",df,_(B(v.value.total_cost)),1)])]),O[7]||(O[7]=Rr('<div class="flex justify-center gap-3 mt-2 bg-slate-800 text-white rounded-lg py-1.5 px-2"><div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-blue-500"></span><span class="text-white text-xs">Intervalo das</span></div><div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-purple-500"></span><span class="text-white text-xs">Das semana</span></div><div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-orange-500"></span><span class="text-white text-xs">Das mes</span></div></div>',1))]),o.value?(x(),w("div",uf,[...O[8]||(O[8]=[s("i",{class:"las la-spinner la-spin text-2xl"},null,-1),s("span",null,"Cargando recursos del proyecto...",-1)])])):!ye(n)||ye(n).length===0?(x(),w("div",ff,[...O[9]||(O[9]=[s("i",{class:"las la-info-circle text-2xl"},null,-1),s("span",null,"No hay recursos asignados a este proyecto.",-1)])])):(x(),w("div",pf,[s("div",hf,[(x(),w(re,null,_e(l,Q=>s("div",{key:Q,class:"p-2 text-center text-sm font-semibold text-white border-r border-slate-600 last:border-r-0"},_(Q),1)),64))]),(x(!0),w(re,null,_e(f.value,(Q,E)=>(x(),w("div",{key:E,class:"grid grid-cols-7 border-t-2 border-slate-300"},[(x(!0),w(re,null,_e(Q,(T,M)=>(x(),w("div",{key:M,class:le(["min-h-24 p-1 border-r-2 border-slate-300 last:border-r-0 transition-colors",{"bg-gray-50":!T,"bg-lime-50 hover:bg-lime-100 cursor-pointer":T?.hasMaintenances,"bg-white":T&&!T.hasMaintenances,"ring-2 ring-lime-500 ring-inset":T?.isToday,"bg-lime-200":a.value?.dateStr===T?.dateStr}]),onClick:ce=>U(T)},[T?(x(),w(re,{key:0},[s("div",mf,[s("span",{class:le(["text-sm font-medium",{"text-lime-700":T.isToday,"text-gray-700":!T.isToday&&T.hasMaintenances,"text-gray-400":!T.hasMaintenances}])},_(T.day),3),T.hasMaintenances?(x(),w("span",_f,_(T.maintenances.length),1)):te("",!0)]),T.hasMaintenances?(x(),w("div",gf,[(x(!0),w(re,null,_e(T.maintenances.slice(0,3),(ce,N)=>(x(),w("div",{key:ce.resource_id,class:"flex items-center gap-1"},[s("span",{class:le(["w-2 h-2 rounded-full flex-shrink-0",Z(ce.frequency_type)])},null,2),s("span",vf,_(ce.resource_code),1)]))),128)),T.maintenances.length>3?(x(),w("div",yf," +"+_(T.maintenances.length-3)+" ms ",1)):te("",!0)])):te("",!0)],64)):te("",!0)],10,bf))),128))]))),128))])),a.value?(x(),w("div",xf,[s("div",wf,[s("h3",$f,[O[10]||(O[10]=s("i",{class:"las la-calendar-check text-lime-600"},null,-1)),q(" Mantenimientos del "+_(new Date(a.value.dateStr).toLocaleDateString("es-GT",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),1)]),s("button",{onClick:O[0]||(O[0]=Q=>a.value=null),class:"btn btn-circle btn-sm btn-ghost"},[...O[11]||(O[11]=[s("i",{class:"las la-times"},null,-1)])])]),s("div",Cf,[s("table",Ef,[O[13]||(O[13]=s("thead",null,[s("tr",{class:"bg-lime-50"},[s("th",{class:"text-xs"},"Cdigo"),s("th",{class:"text-xs"},"Recurso"),s("th",{class:"text-xs"},"Descripcin"),s("th",{class:"text-xs"},"Frecuencia"),s("th",{class:"text-xs text-right"},"Costo")])],-1)),s("tbody",null,[(x(!0),w(re,null,_e(a.value.maintenances,Q=>(x(),w("tr",{key:Q.resource_id,class:"hover:bg-lime-50"},[s("td",Sf,[s("span",Rf,_(Q.resource_code),1)]),s("td",kf,_(Q.resource_name),1),s("td",Af,_(Q.description||"-"),1),s("td",Df,[s("span",{class:le(["badge badge-sm",J(Q.frequency_type)])},_(z(Q)),3)]),s("td",Of,_(B(Q.cost)),1)]))),128))]),s("tfoot",null,[s("tr",If,[O[12]||(O[12]=s("td",{colspan:"4",class:"text-right text-xs"},"Total del da:",-1)),s("td",Pf,_(B(a.value.maintenances.reduce((Q,E)=>Q+E.cost,0))),1)])])])])])):te("",!0),ye(n)&&ye(n).length>0&&c.value.length===0?(x(),w("div",Tf,[...O[14]||(O[14]=[s("i",{class:"las la-info-circle text-2xl"},null,-1),s("span",null,"No hay mantenimientos programados para este mes.",-1)])])):te("",!0)]))}},jf={key:0,class:"flex justify-between items-center mb-4 pb-3 border-b-2 border-blue-300"},Mf={class:"text-lg font-semibold text-gray-700"},Ff={class:"modal-content"},Ps={__name:"Modal",props:{isOpen:{type:Boolean,default:!1},title:{type:String,default:""},size:{type:String,default:"lg",validator:e=>["sm","md","lg","xl","2xl"].includes(e)}},emits:["close"],setup(e,{emit:t}){const n=t,o=()=>{n("close")},l={sm:"modal-box w-11/12 max-w-md",md:"modal-box w-11/12 max-w-2xl",lg:"modal-box w-11/12 max-w-4xl",xl:"modal-box w-11/12 max-w-6xl","2xl":"modal-box w-11/12 max-w-7xl"};return(r,a)=>(x(),w("div",{class:le(["modal",{"modal-open":e.isOpen}])},[s("div",{class:le(l[e.size])},[e.title?(x(),w("div",jf,[s("h3",Mf,_(e.title),1),s("button",{class:"btn btn-sm btn-circle btn-ghost",onClick:o},"  ")])):te("",!0),s("div",Ff,[fi(r.$slots,"default")])],2),s("div",{class:"modal-backdrop",onClick:o})],2))}},vo=zt("resourcesStore",{state:()=>({selectedResource:null,resources:[],newResource:{id:null,code:null,name:null,type:null,type_equipment:null,type_equipment_display:null,brand:null,model:null,status_equipment:null,status_disponibility:null,current_location:null,capacity_gallons:null,is_selected:!1,is_confirm_delete:!1,is_retired:!1}}),getters:{resourcesAvailable:e=>e.resources,physicalEquipmentsNotAvailable:e=>e.resources.filter(t=>t.type_equipment!=="SERVIC"&&t.available===!1)},actions:{async fetchResourcesAvailable(){try{const e=await fetch(be.URLSourcesAvailable,{method:"GET",headers:be.headers});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();this.resources=t.data||[]}catch(e){console.error("Error fetching available resources:",e),this.resources=[]}},setSelectedResource(e){this.selectedResource=this.resources.find(t=>t.id===e)||null}}}),Vf={class:"form-control w-full relative"},Uf={key:0,class:"label"},Lf={class:"label-text"},qf=["placeholder"],Hf={key:1,class:"absolute z-10 w-full mt-1 bg-base-100 shadow-lg rounded-lg max-h-60 overflow-auto top-full"},Bf={class:"menu"},Gf=["onMousedown"],Wf={class:"hover:bg-base-200"},Xr={__name:"AutocompleteResource",props:{label:{type:String,default:"Recurso"},placeholder:{type:String,default:"Buscar recurso..."},excludeIds:{type:Array,default:()=>[]}},emits:["resource-selected"],setup(e,{emit:t}){const n=e,o=t,l=vo(),r=pe(""),a=pe(!1),i=ee(()=>{const v=l.resourcesAvailable||l.resources;return Array.isArray(v)?v:v&&typeof v=="object"?Object.values(v):[]});bt(async()=>{console.log("mounted AutocompleteResource"),await l.fetchResourcesAvailable()});const c=ee(()=>{let v=i.value;return v=v.filter(d=>d.available===!0),n.excludeIds.length>0&&(v=v.filter(d=>!n.excludeIds.includes(d.id))),r.value?v.filter(d=>(d.display_name||d.title||"").toLowerCase().includes(r.value.toLowerCase())):v}),h=()=>{a.value=!0},f=v=>{r.value="",l.setSelectedResource(v.id),a.value=!1,o("resource-selected",v)},u=()=>{setTimeout(()=>{a.value=!1},200)};return(v,d)=>(x(),w("div",Vf,[e.label?(x(),w("label",Uf,[s("span",Lf,_(e.label),1)])):te("",!0),se(s("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=k=>r.value=k),onInput:h,onFocus:d[1]||(d[1]=k=>a.value=!0),onBlur:u,placeholder:e.placeholder,class:"input input-bordered w-full"},null,40,qf),[[he,r.value]]),a.value&&c.value.length>0?(x(),w("div",Hf,[s("ul",Bf,[(x(!0),w(re,null,_e(c.value,k=>(x(),w("li",{key:k.id,onMousedown:m=>f(k)},[s("a",Wf,_(k.display_name||k.title),1)],40,Gf))),128))])])):te("",!0)]))}},Kf={class:"space-y-4"},Yf={key:0,class:"alert alert-error shadow-lg"},zf={key:1,class:"alert alert-success shadow-lg"},Qf={key:0,class:"grid grid-cols-12 gap-4 items-center"},Jf={class:"col-span-8"},Xf={key:1,class:"grid grid-cols-12 gap-4 items-center"},Zf={class:"col-span-8"},ep=["value"],tp={class:"grid grid-cols-12 gap-4 items-start"},sp={class:"col-span-8"},np={class:"grid grid-cols-12 gap-4 items-center"},op={class:"col-span-8"},lp={class:"grid grid-cols-12 gap-4 items-center"},rp={class:"col-span-8"},ap=["min"],ip={key:0,class:"label"},cp={class:"grid grid-cols-12 gap-4 items-center"},dp={class:"col-span-8"},up={class:"bg-gray-50 rounded-lg p-4 space-y-3"},fp={class:"grid grid-cols-12 gap-4 items-center"},pp={class:"col-span-8"},hp=["value"],bp={key:0,class:"label"},mp={key:0,class:"grid grid-cols-12 gap-4 items-center"},_p={class:"col-span-8"},gp={class:"label"},vp={class:"label-text-alt text-info"},yp={key:1,class:"grid grid-cols-12 gap-4 items-start"},xp={class:"col-span-8"},wp={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-2"},$p=["onClick"],Cp={class:"hidden sm:inline"},Ep={class:"sm:hidden"},Sp={class:"label"},Rp={class:"label-text-alt text-info"},kp={key:2,class:"grid grid-cols-12 gap-4 items-start"},Ap={class:"col-span-8"},Dp={class:"grid grid-cols-7 sm:grid-cols-10 gap-2"},Op=["onClick"],Ip={class:"label"},Pp={class:"label-text-alt text-info"},Tp={class:"flex justify-between items-center pt-4"},Np=["disabled"],jp={class:"flex gap-3"},Mp=["disabled"],Fp=["disabled"],Vp={key:0,class:"loading loading-spinner loading-sm"},Up={key:1},Lp={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},qp={class:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4"},Hp={class:"space-y-4"},Bp=["disabled"],Gp={class:"flex justify-end gap-3"},Wp=["disabled"],Kp=["disabled"],Yp={key:0,class:"loading loading-spinner loading-sm"},zp={key:1},Qp={__name:"ResourceForm",props:{resource:{type:Object,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,o=t,l=Qt(),r=vo(),a=Ve(),i=pe(!1),c=pe(""),h=pe(""),f=pe(!1),u=pe(""),v=pe(!1),d=pe(!1),k=[{value:"DAY",label:"Por intervalo de das"},{value:"WEEK",label:"Das de la semana"},{value:"MONTH",label:"Das del mes"}],m=[{value:0,label:"Lunes"},{value:1,label:"Martes"},{value:2,label:"Mircoles"},{value:3,label:"Jueves"},{value:4,label:"Viernes"},{value:5,label:"Sbado"},{value:6,label:"Domingo"}],p=pe({id:null,resource_id:null,resource_display_name:"",detailed_description:"",type_resource:"SERVICIO",cost:0,frequency_type:"MONTH",interval_days:3,weekdays:[],monthdays:[],operation_start_date:null,operation_end_date:null,is_retired:!1}),U=ee(()=>!!n.resource),B=ee(()=>p.value.type_resource==="EQUIPO"&&parseFloat(p.value.cost)>0),Z=ee(()=>B.value?k.filter(F=>F.value==="MONTH"):k),J=ee(()=>U.value?l.resources.filter(F=>F.id!==n.resource?.id&&F.type_resource==="EQUIPO").map(F=>F.resource_id):l.resources.filter(F=>F.type_resource==="EQUIPO").map(F=>F.resource_id));Pe(()=>n.resource,F=>{F&&(p.value={id:F.id,resource_id:F.resource_id,resource_display_name:F.resource_display_name||F.detailed_description,detailed_description:F.detailed_description,type_resource:F.type_resource,cost:F.cost||0,frequency_type:F.frequency_type||"MONTH",interval_days:F.interval_days||3,weekdays:F.weekdays||[],monthdays:F.monthdays||[],operation_start_date:F.operation_start_date,operation_end_date:F.operation_end_date,is_retired:F.is_retired||!1})},{immediate:!0}),Pe(()=>p.value.cost,F=>{const I=parseFloat(F);p.value.type_resource==="EQUIPO"&&I>0&&p.value.frequency_type!=="MONTH"&&(p.value.frequency_type="MONTH",p.value.interval_days=0,p.value.weekdays=[])});const z=()=>{const F=r.selectedResource;F&&(p.value.resource_id=F.id,p.value.resource_display_name=F.display_name,p.value.detailed_description=F.display_name,p.value.type_resource=F.type_equipment==="SERVIC"?"SERVICIO":"EQUIPO",p.value.type_resource==="EQUIPO"?(p.value.frequency_type="MONTH",p.value.interval_days=0,p.value.weekdays=[],p.value.monthdays=[]):(p.value.frequency_type="MONTH",p.value.interval_days=3,p.value.weekdays=[],p.value.monthdays=[]))},S=F=>{if(!F)return[];const I=new Date(F),L=I.getDate(),ue=new Date(I.getFullYear(),I.getMonth()+1,0).getDate(),Ke=[];for(let Ye=L;Ye<=ue;Ye++)Ke.push(Ye);return Ke};Pe(()=>p.value.operation_start_date,F=>{if(p.value.type_resource==="EQUIPO"&&p.value.frequency_type==="MONTH"){const I=S(F);I.length>0&&(p.value.monthdays=I)}}),Pe(()=>p.value.type_resource,F=>{if(F==="EQUIPO"&&(p.value.frequency_type="MONTH",p.value.interval_days=0,p.value.weekdays=[],p.value.operation_start_date)){const I=S(p.value.operation_start_date);I.length>0&&(p.value.monthdays=I)}});const O=()=>{p.value.frequency_type==="DAY"?(p.value.interval_days=p.value.interval_days||3,p.value.weekdays=[],p.value.monthdays=[]):p.value.frequency_type==="WEEK"?(p.value.interval_days=0,p.value.weekdays=p.value.weekdays||[],p.value.monthdays=[]):p.value.frequency_type==="MONTH"&&(p.value.interval_days=0,p.value.weekdays=[],p.value.monthdays=p.value.monthdays||[])},Q=F=>{const I=p.value.weekdays.indexOf(F);I===-1?p.value.weekdays.push(F):p.value.weekdays.splice(I,1)},E=F=>{const I=p.value.monthdays.indexOf(F);I===-1?p.value.monthdays.push(F):p.value.monthdays.splice(I,1)},T=()=>!U.value&&!p.value.resource_id?(c.value="Debe seleccionar un recurso",!1):p.value.operation_start_date?p.value.frequency_type==="DAY"&&(!p.value.interval_days||p.value.interval_days<1)?(c.value="El intervalo de das debe ser mayor a 0",!1):p.value.frequency_type==="WEEK"&&(!p.value.weekdays||p.value.weekdays.length===0)?(c.value="Debe seleccionar al menos un da de la semana",!1):p.value.frequency_type==="MONTH"&&(!p.value.monthdays||p.value.monthdays.length===0)?(c.value="Debe seleccionar al menos un da del mes",!1):!0:(c.value="Debe ingresar la fecha de inicio de operaciones",!1),M=async()=>{if(c.value="",h.value="",!!T()){i.value=!0;try{const F={...p.value,interval_days:p.value.frequency_type==="DAY"?p.value.interval_days:0,weekdays:p.value.frequency_type==="WEEK"?p.value.weekdays:null,monthdays:p.value.frequency_type==="MONTH"?p.value.monthdays:null};if(U.value){await l.updateResourceProject(F),o("close");return}else await l.addResourcesToProject([F]),h.value="Recurso agregado exitosamente";setTimeout(()=>{o("close")},1500)}catch(F){console.error("Error al guardar recurso:",F),c.value=F.message||"Error al guardar el recurso"}finally{i.value=!1}}},ce=()=>{if(!p.value.operation_start_date){c.value="Debe establecer la fecha de inicio de operaciones para liberar el recurso";return}if(!p.value.operation_end_date){c.value="Debe establecer la fecha de fin de operaciones para liberar el recurso";return}const F=new Date(p.value.operation_start_date);if(new Date(p.value.operation_end_date)<=F){c.value="La fecha de fin de operaciones debe ser mayor que la fecha de inicio";return}d.value?me():(c.value="",d.value=!0)},N=()=>{f.value=!1,u.value="",d.value=!1},me=async()=>{v.value=!0,c.value="";try{const F={id:p.value.id,operation_start_date:p.value.operation_start_date,operation_end_date:p.value.operation_end_date};await l.updateResourceProject(F),await l.releaseResourceProject(p.value.id),l.fetchResourcesProject(),o("close");return}catch(F){console.error("Error al liberar recurso:",F),c.value=F.message||"Error al liberar el recurso",d.value=!1}finally{v.value=!1}};return bt(()=>{U.value||(p.value.operation_start_date=a.project?.start_date||null)}),(F,I)=>(x(),w("div",Kf,[c.value?(x(),w("div",Yf,[s("div",null,[I[9]||(I[9]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("span",null,_(c.value),1)]),s("button",{onClick:I[0]||(I[0]=L=>c.value=""),class:"btn btn-sm btn-ghost"},[...I[10]||(I[10]=[s("i",{class:"las la-times"},null,-1)])])])):te("",!0),h.value?(x(),w("div",zf,[s("div",null,[I[11]||(I[11]=s("i",{class:"las la-check-circle text-2xl"},null,-1)),s("span",null,_(h.value),1)])])):te("",!0),s("form",{onSubmit:Os(M,["prevent"]),class:"space-y-3"},[U.value?(x(),w("div",Xf,[I[13]||(I[13]=s("label",{class:"col-span-4 text-right font-semibold"}," Recurso ",-1)),s("div",Zf,[s("input",{type:"text",class:"input input-bordered bg-gray-100 w-full",value:p.value.resource_display_name,disabled:""},null,8,ep)])])):(x(),w("div",Qf,[I[12]||(I[12]=s("label",{class:"col-span-4 text-right font-semibold"},[q(" Seleccionar Recurso "),s("span",{class:"text-error"},"*")],-1)),s("div",Jf,[Ee(Xr,{placeholder:"Buscar recurso disponible...",excludeIds:J.value,onResourceSelected:z},null,8,["excludeIds"])])])),s("div",tp,[I[14]||(I[14]=s("label",{class:"col-span-4 text-right font-semibold pt-3"}," Descripcin Detallada ",-1)),s("div",sp,[se(s("textarea",{class:"textarea textarea-bordered h-20 w-full","onUpdate:modelValue":I[1]||(I[1]=L=>p.value.detailed_description=L),placeholder:"Ingrese detalles adicionales del recurso..."},null,512),[[he,p.value.detailed_description]])])]),s("div",np,[I[15]||(I[15]=s("label",{class:"col-span-4 text-right font-semibold"},[q(" Fecha Inicio Operaciones "),s("span",{class:"text-error"},"*")],-1)),s("div",op,[se(s("input",{type:"date",class:"input input-bordered w-full","onUpdate:modelValue":I[2]||(I[2]=L=>p.value.operation_start_date=L),required:""},null,512),[[he,p.value.operation_start_date]])])]),s("div",lp,[I[16]||(I[16]=s("label",{class:"col-span-4 text-right font-semibold"}," Fecha Fin Operaciones ",-1)),s("div",rp,[se(s("input",{type:"date",class:"input input-bordered w-full","onUpdate:modelValue":I[3]||(I[3]=L=>p.value.operation_end_date=L),min:p.value.operation_start_date},null,8,ap),[[he,p.value.operation_end_date]]),p.value.operation_end_date&&p.value.operation_start_date?(x(),w("div",ip,[s("span",{class:le(["label-text-alt",new Date(p.value.operation_end_date)<=new Date(p.value.operation_start_date)?"text-error":"text-success"])},[s("i",{class:le(new Date(p.value.operation_end_date)<=new Date(p.value.operation_start_date)?"las la-times-circle":"las la-check-circle")},null,2),q(" "+_(new Date(p.value.operation_end_date)<=new Date(p.value.operation_start_date)?"La fecha de fin debe ser mayor a la de inicio":"Rango de fechas vlido"),1)],2)])):te("",!0)])]),s("div",cp,[I[17]||(I[17]=s("label",{class:"col-span-4 text-right font-semibold"}," Costo ",-1)),s("div",dp,[se(s("input",{type:"number",step:"0.01",min:"0",class:"input input-bordered text-right w-full","onUpdate:modelValue":I[4]||(I[4]=L=>p.value.cost=L),placeholder:"0.00"},null,512),[[he,p.value.cost]])])]),I[26]||(I[26]=s("div",{class:"divider"},"Configuracin de Intervalos",-1)),s("div",up,[s("div",fp,[I[19]||(I[19]=s("label",{class:"col-span-4 text-right font-semibold"},[q(" Tipo de Frecuencia "),s("span",{class:"text-error"},"*")],-1)),s("div",pp,[se(s("select",{class:"select select-bordered w-full","onUpdate:modelValue":I[5]||(I[5]=L=>p.value.frequency_type=L),onChange:O},[(x(!0),w(re,null,_e(Z.value,L=>(x(),w("option",{key:L.value,value:L.value},_(L.label),9,hp))),128))],544),[[ft,p.value.frequency_type]]),B.value?(x(),w("div",bp,[...I[18]||(I[18]=[s("span",{class:"label-text-alt text-info"},[s("i",{class:"las la-info-circle"}),q(' Para recursos de alquiler solo est disponible "Das del mes" ')],-1)])])):te("",!0)])]),p.value.frequency_type==="DAY"?(x(),w("div",mp,[I[21]||(I[21]=s("label",{class:"col-span-4 text-right font-semibold"},[q(" Intervalo en das "),s("span",{class:"text-error"},"*")],-1)),s("div",_p,[se(s("input",{type:"number",min:"1",class:"input input-bordered w-full","onUpdate:modelValue":I[6]||(I[6]=L=>p.value.interval_days=L),placeholder:"Ej: 3",required:""},null,512),[[he,p.value.interval_days]]),s("div",gp,[s("span",vp,[I[20]||(I[20]=s("i",{class:"las la-info-circle"},null,-1)),q(" Frecuencia cada "+_(p.value.interval_days||0)+" da(s) ",1)])])])])):p.value.frequency_type==="WEEK"?(x(),w("div",yp,[I[23]||(I[23]=s("label",{class:"col-span-4 text-right font-semibold pt-2"},[q(" Das de la semana "),s("span",{class:"text-error"},"*")],-1)),s("div",xp,[s("div",wp,[(x(),w(re,null,_e(m,L=>s("button",{key:L.value,type:"button",class:le(["btn btn-sm",p.value.weekdays.includes(L.value)?"btn-primary":"btn-outline"]),onClick:ue=>Q(L.value)},[s("span",Cp,_(L.label),1),s("span",Ep,_(L.label.substring(0,3)),1)],10,$p)),64))]),s("div",Sp,[s("span",Rp,[I[22]||(I[22]=s("i",{class:"las la-info-circle"},null,-1)),q(" "+_(p.value.weekdays.length)+" da(s) seleccionado(s) ",1)])])])])):p.value.frequency_type==="MONTH"?(x(),w("div",kp,[I[25]||(I[25]=s("label",{class:"col-span-4 text-right font-semibold pt-2"},[q(" Das del mes "),s("span",{class:"text-error"},"*")],-1)),s("div",Ap,[s("div",Dp,[(x(),w(re,null,_e(31,L=>s("button",{key:L,type:"button",class:le(["btn btn-sm",p.value.monthdays.includes(L)?"btn-primary":"btn-outline"]),onClick:ue=>E(L)},_(L),11,Op)),64))]),s("div",Ip,[s("span",Pp,[I[24]||(I[24]=s("i",{class:"las la-info-circle"},null,-1)),q(" "+_(p.value.monthdays.length)+" da(s) seleccionado(s) ",1)])])])])):te("",!0)]),s("div",Tp,[s("div",null,[U.value&&!p.value.is_retired?(x(),w("button",{key:0,type:"button",class:le(d.value?"btn btn-error btn-sm":"btn btn-warning btn-sm"),onClick:ce,disabled:i.value||v.value},[s("i",{class:le(d.value?"las la-exclamation-triangle":"las la-hand-paper")},null,2),q(" "+_(d.value?"CONFIRMAR LIBERACIN":"Liberar Recurso"),1)],10,Np)):te("",!0)]),s("div",jp,[s("button",{type:"button",class:"btn btn-ghost",onClick:I[7]||(I[7]=L=>o("close")),disabled:i.value||v.value}," Cancelar ",8,Mp),s("button",{type:"submit",class:"btn btn-primary",disabled:i.value||v.value},[i.value?(x(),w("span",Vp)):(x(),w("span",Up,_(U.value?"Actualizar":"Guardar"),1))],8,Fp)])])],32),f.value?(x(),w("div",Lp,[s("div",qp,[I[30]||(I[30]=s("h3",{class:"text-lg font-semibold mb-4 text-warning"},[s("i",{class:"las la-exclamation-triangle"}),q(" Confirmar Liberacin de Equipo ")],-1)),s("div",Hp,[I[29]||(I[29]=s("p",{class:"text-sm text-gray-600"}," Est seguro que desea liberar este equipo del proyecto? ",-1)),s("div",null,[I[27]||(I[27]=s("label",{class:"block text-sm font-semibold mb-2"},[q(" Motivo de liberacin "),s("span",{class:"text-error"},"*")],-1)),se(s("textarea",{class:"textarea textarea-bordered w-full h-24","onUpdate:modelValue":I[8]||(I[8]=L=>u.value=L),placeholder:"Ingrese el motivo por el cual se libera el equipo...",disabled:v.value},null,8,Bp),[[he,u.value]])]),s("div",Gp,[s("button",{type:"button",class:"btn btn-ghost btn-sm",onClick:N,disabled:v.value}," Cancelar ",8,Wp),s("button",{type:"button",class:"btn btn-warning btn-sm",onClick:me,disabled:v.value},[v.value?(x(),w("span",Yp)):(x(),w("span",zp,[...I[28]||(I[28]=[s("i",{class:"las la-check"},null,-1),q(" Confirmar Liberacin ",-1)])]))],8,Kp)])])])])):te("",!0)]))}},Jp={id:"project-app",class:"w-[90%] mx-auto p-4 bg-white rounded-2xl shadow-md border border-blue-300 border-t-[15px] border-t-blue-300"},Xp={class:"flex justify-between items-center border-b-blue-500 border-b pb-1 mb-3"},Zp={class:"text-xl font-semibold text-blue-500"},eh={class:"flex items-center gap-3"},th={class:"text-gray-500"},sh={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},nh={class:"space-y-1"},oh={class:"flex items-center gap-2 py-0.5"},lh={class:"font-semibold text-xs"},rh={class:"flex items-center gap-2 py-0.5"},ah={class:"font-semibold text-xs"},ih={key:0,class:"badge badge-info ml-1"},ch={class:"space-y-1"},dh={class:"flex items-center gap-2 py-0.5"},uh={class:"font-semibold text-xs"},fh={class:"flex items-center gap-2 py-0.5"},ph={key:0,class:"font-semibold text-xs"},hh={key:1,class:"text-success font-bold text-xs"},bh={class:"space-y-1"},mh={class:"flex items-center gap-2 py-0.5"},_h={class:"font-semibold text-xs"},gh={class:"flex items-center gap-2 py-0.5"},vh={class:"font-semibold text-xs"},yh={role:"tablist",class:"tabs tabs-lifted bg-base-100 p-1"},xh={role:"tabpanel",class:"tab-content bg-base-100 rounded-box p-4"},wh={role:"tabpanel",class:"tab-content bg-base-100 rounded-box p-4"},$h={role:"tabpanel",class:"tab-content bg-base-100 rounded-box p-4"},Ch={__name:"ProjectsView",setup(e){const t=Ve(),n=Qt(),o=ee(()=>t.project),l=pe(!1),r=pe(""),a=pe(null),i=pe(null),c=f=>{r.value="Editar Recurso del Proyecto",a.value="ResourceForm",i.value=f,l.value=!0},h=()=>{l.value=!1,a.value=null,r.value="",i.value=null};return bt(()=>{t.fetchProjectData(),n.fetchResourcesProject()}),(f,u)=>(x(),w("div",null,[s("div",Jp,[s("div",Xp,[s("h1",Zp," Ficha de Proyecto #"+_(o.value?.id||"N/A"),1),s("div",eh,[s("div",th,[s("span",{class:le(["badge",o.value?.is_closed?"badge-error":"badge-success"])},_(o.value?.is_closed?"Cerrado":"Abierto"),3)])])]),s("div",sh,[s("div",nh,[s("div",oh,[u[0]||(u[0]=s("i",{class:"las la-building text-blue-500 text-sm"},null,-1)),u[1]||(u[1]=s("span",{class:"text-xs text-gray-500"},"Cliente:",-1)),s("span",lh,_(o.value?.partner_name||"N/A"),1)]),s("div",rh,[u[2]||(u[2]=s("i",{class:"las la-map-marker text-blue-500 text-sm"},null,-1)),u[3]||(u[3]=s("span",{class:"text-xs text-gray-500"},"Campamento:",-1)),s("span",ah,[q(_(o.value?.location||"N/A")+" ",1),o.value?.location&&o.value?.cardinal_point?(x(),w("span",ih,_(o.value?.cardinal_point?` ${o.value.cardinal_point}`:""),1)):te("",!0)])])]),s("div",ch,[s("div",dh,[u[4]||(u[4]=s("i",{class:"las la-calendar-check text-blue-500 text-sm"},null,-1)),u[5]||(u[5]=s("span",{class:"text-xs text-gray-500"},"Inicio:",-1)),s("span",uh,_(ye(zn)(o.value?.start_date)),1)]),s("div",fh,[u[6]||(u[6]=s("i",{class:"las la-calendar-times text-blue-500 text-sm"},null,-1)),u[7]||(u[7]=s("span",{class:"text-xs text-gray-500"},"Fin:",-1)),o.value?.end_date?(x(),w("span",ph,_(ye(zn)(o.value?.end_date)),1)):(x(),w("span",hh,"EN CURSO"))])]),s("div",bh,[s("div",mh,[u[8]||(u[8]=s("i",{class:"las la-user text-blue-500 text-sm"},null,-1)),u[9]||(u[9]=s("span",{class:"text-xs text-gray-500"},"Contacto:",-1)),s("span",_h,_(o.value?.contact_name||"N/A"),1)]),s("div",gh,[u[10]||(u[10]=s("i",{class:"las la-phone text-blue-500 text-sm"},null,-1)),u[11]||(u[11]=s("span",{class:"text-xs text-gray-500"},"Telfono:",-1)),s("span",vh,_(o.value?.contact_phone||"N/A"),1)])])]),s("div",yh,[u[12]||(u[12]=s("input",{type:"radio",name:"project_tabs",role:"tab",class:"tab bg-amber-500 text-white font-semibold border-s-gray-50 border-s-2","aria-label":"Recursos Asignados",checked:""},null,-1)),s("div",xh,[Ee(yu,{onEditResource:c})]),u[13]||(u[13]=s("input",{type:"radio",name:"project_tabs",role:"tab",class:"tab bg-cyan-500 text-white font-semibold border-s-gray-50 border-s-2","aria-label":"Planillas de Trabajo"},null,-1)),s("div",wh,[Ee(Gu)]),u[14]||(u[14]=s("input",{type:"radio",name:"project_tabs",role:"tab",class:"tab bg-lime-500 text-white font-semibold border-s-gray-50 border-s-2","aria-label":"Calendario Mantenimientos"},null,-1)),s("div",$h,[Ee(Nf)])]),u[15]||(u[15]=s("div",{class:"mt-8 bg-white border-t border-gray-200 shadow-md rounded-b-xl flex justify-end gap-3 px-4 py-3"},[s("a",{href:"/projects/",class:"btn btn-primary btn-sm"},[s("i",{class:"las la-times"}),q(" Volver A Proyectos ")])],-1))]),Ee(Ps,{"is-open":l.value,title:r.value,size:"lg",onClose:h},{default:Rt(()=>[a.value==="ResourceForm"?(x(),At(Qp,{key:0,resource:i.value,onClose:h},null,8,["resource"])):te("",!0)]),_:1},8,["is-open","title"])]))}},Eh={class:"container mx-auto p-4"},Sh={key:0,class:"alert alert-error shadow-lg mb-4"},Rh={key:1,class:"alert alert-success shadow-lg mb-4"},kh={class:"card-body space-y-4"},Ah={class:"flex gap-4"},Dh={class:"form-control w-full"},Oh={class:"mt-2 mb-2"},Ih={class:"table table-zebra w-full"},Ph={class:"border border-gray-300"},Th={class:"border border-gray-300"},Nh={class:"border border-gray-300"},jh={class:"border border-gray-300"},Mh=["onUpdate:modelValue"],Fh=["value"],Vh={key:1,class:"text-gray-400 text-sm"},Uh={class:"border border-gray-300"},Lh=["onUpdate:modelValue"],qh={class:"border border-gray-300"},Hh=["onUpdate:modelValue","onFocus"],Bh={key:1,class:"text-gray-400 text-sm"},Gh={class:"border border-gray-300"},Wh={key:0,class:"space-y-2"},Kh=["onUpdate:modelValue","onChange"],Yh=["value"],zh={key:0},Qh=["onUpdate:modelValue"],Jh={key:1,class:"flex flex-wrap gap-1"},Xh=["onClick"],Zh={key:2,class:"grid grid-cols-7 gap-1"},eb=["onClick"],tb={key:1,class:"text-gray-400 text-sm"},sb={class:"border border-gray-300 text-center"},nb=["onUpdate:modelValue","disabled","onChange"],ob={class:"border border-gray-300"},lb={key:0,class:"space-y-2"},rb=["onUpdate:modelValue","onChange"],ab=["value"],ib={key:0},cb=["onUpdate:modelValue"],db={key:1,class:"flex flex-wrap gap-1"},ub=["onClick"],fb={key:2,class:"grid grid-cols-7 gap-1"},pb=["onClick"],hb={key:1,class:"text-gray-400 text-sm"},bb={class:"border border-gray-300"},mb=["onUpdate:modelValue","onFocus","disabled"],_b={class:"border border-gray-300 text-center"},gb=["onClick","disabled"],vb={key:0},yb={class:"flex flex-col-reverse sm:flex-row gap-3 sm:justify-end"},xb=["disabled"],wb={key:0,class:"loading loading-spinner loading-sm"},$b={key:1},Cb={__name:"ResourceItemsForm",setup(e){const t=vo(),n=Qt(),o=Ve(),l=ds(),r=pe([]),a=pe(!1),i=pe(""),c=pe(""),h=ee(()=>t.physicalEquipmentsNotAvailable||[]),f=ee(()=>r.value.filter(E=>E.resource?.type_equipment_display!=="SERVICIO").map(E=>E.resource_id)),u=[{value:"DAY",label:"Por intervalo de das"},{value:"WEEK",label:"Das de la semana"},{value:"MONTH",label:"Das del mes"}],v=[{value:0,label:"Lunes"},{value:1,label:"Martes"},{value:2,label:"Mircoles"},{value:3,label:"Jueves"},{value:4,label:"Viernes"},{value:5,label:"Sbado"},{value:6,label:"Domingo"}],d=async()=>{const E=t.selectedResource,T=E.type_equipment==="SERVIC";if(!T&&t.resources&&Array.isArray(t.resources)){const me=t.resources.find(F=>F.id===E.id);me&&(me.is_selected=!0)}let M=[];const ce=o.project?.start_date;if(!T&&ce){const me=new Date(ce),F=me.getDate(),I=new Date(me.getFullYear(),me.getMonth()+1,0).getDate();for(let L=F;L<=I;L++)M.push(L)}const N={resource:E,resource_id:E.id,resource_display_name:E.display_name,detailed_description:E.display_name,frequency_type:T?"DAY":"MONTH",interval_days:T?3:0,weekdays:[],monthdays:T?[]:M,cost:0,maintenance_cost:0,operation_start_date:o.project?.start_date||null,include_maintenance:T,physical_equipment_code:null,maintenance_frequency_type:"DAY",maintenance_interval_days:3,maintenance_weekdays:[],maintenance_monthdays:[]};r.value.push(N),t.selectedResource=null},k=E=>{const T=r.value[E];if(T.resource?.type_equipment_display!=="SERVICIO"&&t.resources&&Array.isArray(t.resources)){const M=t.resources.find(ce=>ce.id===T.resource_id);M&&(M.is_selected=!1)}r.value.splice(E,1)},m=async()=>{i.value="",c.value="",a.value=!0;try{if(r.value.filter(M=>!M.operation_start_date).length>0){i.value="Todos los recursos deben tener una fecha de inicio de operaciones",a.value=!1;return}const T=await n.addResourcesToProject(r.value);c.value=`Se agregaron ${T.added} recurso(s) exitosamente`,l.push("/project")}catch(E){console.error("Error submitting form:",E),i.value=E.message||"Error al guardar los recursos. Por favor intente nuevamente."}finally{a.value=!1}},p=(E,T)=>{if(!E.include_maintenance)E.maintenance_cost=0,E.maintenance_frequency_type="DAY",E.maintenance_interval_days=0,E.maintenance_weekdays=[],E.maintenance_monthdays=[];else{E.maintenance_frequency_type=E.maintenance_frequency_type||"DAY",(!E.maintenance_interval_days||E.maintenance_interval_days===0)&&(E.maintenance_interval_days=3);const N=T.target.closest("tr").querySelector('input[data-input="maintenance-interval"]');N&&setTimeout(()=>{N.focus(),N.select()},50)}},U=E=>{E.frequency_type==="DAY"?((!E.interval_days||E.interval_days===0)&&(E.interval_days=3),E.weekdays=[],E.monthdays=[]):E.frequency_type==="WEEK"?(E.interval_days=0,E.weekdays=E.weekdays||[],E.monthdays=[]):E.frequency_type==="MONTH"&&(E.interval_days=0,E.weekdays=[],E.monthdays=E.monthdays||[])},B=E=>{E.maintenance_frequency_type==="DAY"?((!E.maintenance_interval_days||E.maintenance_interval_days===0)&&(E.maintenance_interval_days=3),E.maintenance_weekdays=[],E.maintenance_monthdays=[]):E.maintenance_frequency_type==="WEEK"?(E.maintenance_interval_days=0,E.maintenance_weekdays=E.maintenance_weekdays||[],E.maintenance_monthdays=[]):E.maintenance_frequency_type==="MONTH"&&(E.maintenance_interval_days=0,E.maintenance_weekdays=[],E.maintenance_monthdays=E.maintenance_monthdays||[])},Z=(E,T)=>{E.weekdays||(E.weekdays=[]);const M=E.weekdays.indexOf(T);M===-1?E.weekdays.push(T):E.weekdays.splice(M,1)},J=(E,T)=>{E.monthdays||(E.monthdays=[]);const M=E.monthdays.indexOf(T);M===-1?E.monthdays.push(T):E.monthdays.splice(M,1)},z=(E,T)=>{E.maintenance_weekdays||(E.maintenance_weekdays=[]);const M=E.maintenance_weekdays.indexOf(T);M===-1?E.maintenance_weekdays.push(T):E.maintenance_weekdays.splice(M,1)},S=(E,T)=>{E.maintenance_monthdays||(E.maintenance_monthdays=[]);const M=E.maintenance_monthdays.indexOf(T);M===-1?E.maintenance_monthdays.push(T):E.maintenance_monthdays.splice(M,1)},O=E=>{E.cost===0&&(E.cost=null)},Q=E=>{E.maintenance_cost===0&&(E.maintenance_cost=null)};return bt(async()=>{await t.fetchResourcesAvailable()}),(E,T)=>(x(),w("div",Eh,[i.value?(x(),w("div",Sh,[s("div",null,[T[1]||(T[1]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("span",null,_(i.value),1)]),s("button",{onClick:T[0]||(T[0]=M=>i.value=""),class:"btn btn-sm btn-ghost"},[...T[2]||(T[2]=[s("i",{class:"las la-times"},null,-1)])])])):te("",!0),c.value?(x(),w("div",Rh,[s("div",null,[T[3]||(T[3]=s("i",{class:"las la-check-circle text-2xl"},null,-1)),s("span",null,_(c.value),1)])])):te("",!0),s("form",{class:"card bg-base-100 shadow-xl border border-gray-200 rounded-lg",onSubmit:Os(m,["prevent"])},[s("div",kh,[s("div",Ah,[s("div",Dh,[T[4]||(T[4]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Seleccionar Recurso *")],-1)),Ee(Xr,{placeholder:"Buscar recurso disponible...",excludeIds:f.value,onResourceSelected:d},null,8,["excludeIds"])])]),s("div",Oh,[s("table",Ih,[T[8]||(T[8]=s("thead",null,[s("tr",{class:"bg-lime-800 text-white border border-green-500 text-center uppercase text-xs"},[s("th",{class:"border"},"#"),s("th",{class:"border"},"Detalle"),s("th",{class:"border"},"Tipo"),s("th",{class:"border"},"Equipo Fsico"),s("th",{class:"border"},"Fecha Inicio *"),s("th",{class:"border"},"Costo Alq"),s("th",{class:"border"},"Frec. Alquiler"),s("th",{class:"border"},"Mant"),s("th",{class:"border"},"Frec. Mant"),s("th",{class:"border"},"Costo Mnt"),s("th",{class:"border"},"Acciones")])],-1)),s("tbody",null,[(x(!0),w(re,null,_e(r.value,(M,ce)=>(x(),w("tr",{key:ce},[s("td",Ph,_(ce+1),1),s("td",Th,_(M.resource_display_name||M.detailed_description),1),s("td",Nh,_(M.resource?.type_equipment_display==="SERVICIO"?"SERVICIO":"EQUIPO"),1),s("td",jh,[M.resource?.type_equipment==="SERVIC"?se((x(),w("select",{key:0,class:"select select-sm select-bordered w-full","onUpdate:modelValue":N=>M.physical_equipment_code=N},[T[5]||(T[5]=s("option",{value:null},"Sin equipo asignado",-1)),(x(!0),w(re,null,_e(h.value,N=>(x(),w("option",{key:N.id,value:N.id},_(N.code)+" - "+_(N.type_equipment_display),9,Fh))),128))],8,Mh)),[[ft,M.physical_equipment_code]]):(x(),w("span",Vh,"-"))]),s("td",Uh,[se(s("input",{type:"date",class:le(["input input-sm input-bordered w-full",{"input-error":!M.operation_start_date}]),"onUpdate:modelValue":N=>M.operation_start_date=N,required:""},null,10,Lh),[[he,M.operation_start_date]])]),s("td",qh,[M.resource?.type_equipment_display!=="SERVICIO"?se((x(),w("input",{key:0,type:"number",step:"0.01",min:"0",class:"input input-sm input-bordered w-full text-end","onUpdate:modelValue":N=>M.cost=N,onFocus:N=>O(M),placeholder:"0.00"},null,40,Hh)),[[he,M.cost]]):(x(),w("span",Bh,"N/A"))]),s("td",Gh,[M.resource?.type_equipment_display!=="SERVICIO"?(x(),w("div",Wh,[se(s("select",{class:"select select-sm select-bordered w-full","onUpdate:modelValue":N=>M.frequency_type=N,onChange:N=>U(M)},[(x(),w(re,null,_e(u,N=>s("option",{key:N.value,value:N.value},_(N.label),9,Yh)),64))],40,Kh),[[ft,M.frequency_type]]),M.frequency_type==="DAY"?(x(),w("div",zh,[se(s("input",{type:"number",min:"1",class:"input input-sm input-bordered w-full","onUpdate:modelValue":N=>M.interval_days=N,"data-input":"interval",placeholder:"Das"},null,8,Qh),[[he,M.interval_days]])])):M.frequency_type==="WEEK"?(x(),w("div",Jh,[(x(),w(re,null,_e(v,N=>s("button",{key:N.value,type:"button",class:le(["btn btn-xs",M.weekdays?.includes(N.value)?"btn-primary":"btn-outline"]),onClick:me=>Z(M,N.value)},_(N.label.substring(0,3)),11,Xh)),64))])):M.frequency_type==="MONTH"?(x(),w("div",Zh,[(x(),w(re,null,_e(31,N=>s("button",{key:N,type:"button",class:le(["btn btn-xs",M.monthdays?.includes(N)?"btn-primary":"btn-outline"]),onClick:me=>J(M,N)},_(N),11,eb)),64))])):te("",!0)])):(x(),w("span",tb,"N/A"))]),s("td",sb,[se(s("input",{type:"checkbox",class:"checkbox checkbox-sm","onUpdate:modelValue":N=>M.include_maintenance=N,disabled:M.resource?.type_equipment_display==="SERVICIO",onChange:N=>p(M,N)},null,40,nb),[[Bt,M.include_maintenance]])]),s("td",ob,[M.include_maintenance?(x(),w("div",lb,[se(s("select",{class:"select select-sm select-bordered w-full","onUpdate:modelValue":N=>M.maintenance_frequency_type=N,onChange:N=>B(M)},[(x(),w(re,null,_e(u,N=>s("option",{key:N.value,value:N.value},_(N.label),9,ab)),64))],40,rb),[[ft,M.maintenance_frequency_type]]),M.maintenance_frequency_type==="DAY"?(x(),w("div",ib,[se(s("input",{type:"number",min:"1",class:"input input-sm input-bordered w-full","onUpdate:modelValue":N=>M.maintenance_interval_days=N,"data-input":"maintenance-interval",placeholder:"Das"},null,8,cb),[[he,M.maintenance_interval_days]])])):M.maintenance_frequency_type==="WEEK"?(x(),w("div",db,[(x(),w(re,null,_e(v,N=>s("button",{key:N.value,type:"button",class:le(["btn btn-xs",M.maintenance_weekdays?.includes(N.value)?"btn-primary":"btn-outline"]),onClick:me=>z(M,N.value)},_(N.label.substring(0,3)),11,ub)),64))])):M.maintenance_frequency_type==="MONTH"?(x(),w("div",fb,[(x(),w(re,null,_e(31,N=>s("button",{key:N,type:"button",class:le(["btn btn-xs",M.maintenance_monthdays?.includes(N)?"btn-primary":"btn-outline"]),onClick:me=>S(M,N)},_(N),11,pb)),64))])):te("",!0)])):(x(),w("span",hb,"-"))]),s("td",bb,[se(s("input",{type:"number",step:"0.01",min:"0",class:"input input-sm input-bordered w-full text-end","onUpdate:modelValue":N=>M.maintenance_cost=N,onFocus:N=>Q(M),placeholder:"0.00",disabled:!M.include_maintenance},null,40,mb),[[he,M.maintenance_cost]])]),s("td",_b,[s("button",{type:"button",class:"btn btn-sm btn-error",onClick:N=>k(ce),disabled:a.value},[...T[6]||(T[6]=[s("i",{class:"las la-trash text-lg"},null,-1)])],8,gb)])]))),128)),r.value.length===0?(x(),w("tr",vb,[...T[7]||(T[7]=[s("td",{colspan:"11",class:"text-center py-4 text-gray-500"}," No hay recursos agregados. Seleccione un recurso del autocomplete. ",-1)])])):te("",!0)])])]),T[10]||(T[10]=s("div",{class:"divider"},null,-1)),s("div",yb,[Ee(ye(gn),{to:"/project",class:le(["btn btn-ghost",{"btn-disabled":a.value}])},{default:Rt(()=>[...T[9]||(T[9]=[q(" Cancelar ",-1)])]),_:1},8,["class"]),s("button",{type:"submit",class:"btn btn-primary",disabled:r.value.length===0||a.value},[a.value?(x(),w("span",wb)):(x(),w("span",$b,"Guardar Recursos ("+_(r.value.length)+")",1))],8,xb)])])],32)]))}},Zr=zt("technicalStore",{state:()=>({technical:{},technicals:[]}),actions:{async fetchTechnicalsAvailable(){console.log("Fetching available technicals...");try{const e=await fetch(be.URLTechnicalsAvailable,{method:"GET",headers:be.headers});if(!e.ok)throw new Error("Failed to fetch technicals");const t=await e.json();this.technicals=t.data}catch(e){console.error("Error fetching technicals:",e)}}}}),ea=zt("vehicleStore",{state:()=>({vehicle:{},vehicles:[]}),actions:{async fetchVehicles(){console.log("Fetching available vehicles...");try{const e=await fetch(be.URLVehiclesAvailable,{method:"GET",headers:be.headers});if(!e.ok)throw new Error("Failed to fetch vehicles");const t=await e.json();this.vehicles=t.data}catch(e){console.error("Error fetching vehicles:",e)}}}}),Eb={key:0,class:"max-w-4xl mx-auto p-1"},Sb={class:"text-xl font-bold mb-6"},Rb={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},kb={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},Ab={class:"border-b-1 border-r-1 border-sky-200"},Db={class:"ml-2"},Ob={class:"border-b-1 border-r-1 border-sky-200"},Ib={class:"ml-2"},Pb={class:"border-b-1 border-r-1 border-sky-200"},Tb={class:"ml-2"},Nb={class:"border-b-1 border-r-1 border-sky-200"},jb={class:"ml-2 font-mono"},Mb={class:"border-b-1 border-r-1 border-sky-200"},Fb={class:"ml-2 text-blue-600"},Vb={class:"border-b-1 border-r-1 border-sky-200"},Ub={class:"ml-2"},Lb={class:"border-b-1 border-r-1 border-sky-200"},qb={class:"ml-2"},Hb={class:"border-b-1 border-r-1 border-sky-200"},Bb={class:"ml-2"},Gb={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},Wb={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},Kb={class:"border-b-1 border-r-1 border-sky-200"},Yb={class:"ml-2"},zb={class:"border-b-1 border-r-1 border-sky-200"},Qb={class:"border-b-1 border-r-1 border-sky-200"},Jb={class:"border-b-1 border-r-1 border-sky-200"},Xb={class:"ml-2 font-mono text-xs"},Zb={class:"border-b-1 border-r-1 border-sky-200"},em={class:"ml-2"},tm={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},sm={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},nm={class:"border-b-1 border-r-1 border-sky-200"},om={class:"ml-2"},lm={class:"border-b-1 border-r-1 border-sky-200"},rm={class:"ml-2"},am={class:"border-b-1 border-r-1 border-sky-200"},im={class:"ml-2"},cm={class:"border-b-1 border-r-1 border-sky-200"},dm={class:"ml-2"},um={class:"border-b-1 border-r-1 border-sky-200"},fm={class:"ml-2"},pm={class:"border-b-1 border-r-1 border-sky-200"},hm={class:"ml-2"},bm={class:"border-b-1 border-r-1 border-sky-200"},mm={class:"ml-2"},_m={class:"border-b-1 border-r-1 border-sky-200"},gm={class:"ml-2"},vm={key:0,class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},ym={class:"font-semibold text-lg mb-3"},xm={class:"overflow-x-auto border border-gray-300 rounded"},wm={class:"table table-sm w-full"},$m={class:"border-r border-gray-300"},Cm={class:"border-r border-gray-300 font-mono text-sm"},Em={key:1,class:"bg-sky-50 rounded-lg p-4 mb-6 border-gray-200 border"},Sm={class:"overflow-x-auto bg-base-100 border border-gray-300 rounded"},Rm={class:"table table-xs w-full border-collapse"},km={key:0,rowspan:5,class:"border border-gray-300 text-center font-semibold align-middle"},Am={class:"border border-gray-300 text-center"},Dm={class:"border border-gray-300 text-center font-mono text-xs"},Om={class:"border border-gray-300 text-center font-mono text-xs"},Im={key:0,rowspan:5,class:"border border-gray-300 text-center font-semibold align-middle"},Pm={class:"border border-gray-300 text-center text-gray-400"},Tm={key:2,class:"bg-sky-50 rounded-lg p-4 border-gray-200 border"},Nm={class:"text-sm bg-base-100 p-3 rounded border border-gray-300"},ta={__name:"TechnicalPresentation",props:{technical:{type:Object,default:null}},setup(e){const t=e,n=a=>a?new Date(a).toLocaleDateString("es-ES"):"N/A",o=(a,i)=>{if(!i)return"badge-ghost";const c=new Date,h=new Date(i),f=Math.floor((h-c)/(1e3*60*60*24));return f<0?"badge-error":f<=30?"badge-warning":"badge-success"},l=a=>{if(!a)return"Sin vencer";const i=new Date,c=new Date(a),h=Math.floor((c-i)/(1e3*60*60*24));return h<0?"VENCIDO":h<=30?"PRXIMO A VENCER":"VIGENTE"},r=ee(()=>t.technical?.vaccination_records?t.technical.vaccination_records.reduce((a,i)=>{const c=i.vaccine_type_display;return a[c]||(a[c]=[]),a[c].push(i),a},{}):{});return(a,i)=>e.technical?(x(),w("div",Eb,[s("h5",Sb,_(e.technical.first_name)+" "+_(e.technical.last_name),1),s("div",Rb,[i[8]||(i[8]=s("h6",{class:"font-semibold text-lg mb-3"},"Datos Personales",-1)),s("div",kb,[s("div",Ab,[i[0]||(i[0]=s("span",{class:"font-medium"},"ID:",-1)),s("span",Db,_(e.technical.id),1)]),s("div",Ob,[i[1]||(i[1]=s("span",{class:"font-medium"},"Nombre:",-1)),s("span",Ib,_(e.technical.first_name),1)]),s("div",Pb,[i[2]||(i[2]=s("span",{class:"font-medium"},"Apellido:",-1)),s("span",Tb,_(e.technical.last_name),1)]),s("div",Nb,[i[3]||(i[3]=s("span",{class:"font-medium"},"Cdula (DNI):",-1)),s("span",jb,_(e.technical.dni),1)]),s("div",Mb,[i[4]||(i[4]=s("span",{class:"font-medium"},"Email:",-1)),s("span",Fb,_(e.technical.email),1)]),s("div",Vb,[i[5]||(i[5]=s("span",{class:"font-medium"},"Telfono:",-1)),s("span",Ub,_(e.technical.nro_phone),1)]),s("div",Lb,[i[6]||(i[6]=s("span",{class:"font-medium"},"Fecha Nacimiento:",-1)),s("span",qb,_(n(e.technical.birth_date)),1)]),s("div",Hb,[i[7]||(i[7]=s("span",{class:"font-medium"},"Fecha Ingreso:",-1)),s("span",Bb,_(n(e.technical.date_joined)),1)])])]),s("div",Gb,[i[14]||(i[14]=s("h6",{class:"font-semibold text-lg mb-3"},"Informacin Laboral",-1)),s("div",Wb,[s("div",Kb,[i[9]||(i[9]=s("span",{class:"font-medium"},"rea de Trabajo:",-1)),s("span",Yb,_(e.technical.work_area_display),1)]),s("div",zb,[i[10]||(i[10]=s("span",{class:"font-medium"},"Afiliado IESS:",-1)),s("span",{class:le(["ml-2 badge",e.technical.is_iess_affiliated?"badge-success":"badge-ghost"])},_(e.technical.is_iess_affiliated?"S":"No"),3)]),s("div",Qb,[i[11]||(i[11]=s("span",{class:"font-medium"},"Seguro de Vida:",-1)),s("span",{class:le(["ml-2 badge",e.technical.has_life_insurance_policy?"badge-success":"badge-ghost"])},_(e.technical.has_life_insurance_policy?"S":"No"),3)]),s("div",Jb,[i[12]||(i[12]=s("span",{class:"font-medium"},"Cdigo QUEST NCST:",-1)),s("span",Xb,_(e.technical.quest_ncst_code),1)]),s("div",Zb,[i[13]||(i[13]=s("span",{class:"font-medium"},"Instructor QUEST:",-1)),s("span",em,_(e.technical.quest_instructor),1)])])]),s("div",tm,[i[23]||(i[23]=s("h6",{class:"font-semibold text-lg mb-3"},"Licencias y Certificados",-1)),s("div",sm,[s("div",nm,[i[15]||(i[15]=s("span",{class:"font-medium"},"Licencia (Expedida):",-1)),s("span",om,_(n(e.technical.license_issue_date)),1)]),s("div",lm,[i[16]||(i[16]=s("span",{class:"font-medium"},"Licencia (Vence):",-1)),s("span",rm,[s("span",{class:le(["badge",o(e.technical.license_issue_date,e.technical.license_expiry_date)])},_(n(e.technical.license_expiry_date)),3)])]),s("div",am,[i[17]||(i[17]=s("span",{class:"font-medium"},"Cond. Defensiva (Expedida):",-1)),s("span",im,_(n(e.technical.defensive_driving_certificate_issue_date)),1)]),s("div",cm,[i[18]||(i[18]=s("span",{class:"font-medium"},"Cond. Defensiva (Vence):",-1)),s("span",dm,[s("span",{class:le(["badge",o(e.technical.defensive_driving_certificate_issue_date,e.technical.defensive_driving_certificate_expiry_date)])},_(n(e.technical.defensive_driving_certificate_expiry_date)),3)])]),s("div",um,[i[19]||(i[19]=s("span",{class:"font-medium"},"Certificado MAE (Expedida):",-1)),s("span",fm,_(n(e.technical.mae_certificate_issue_date)),1)]),s("div",pm,[i[20]||(i[20]=s("span",{class:"font-medium"},"Certificado MAE (Vence):",-1)),s("span",hm,_(n(e.technical.mae_certificate_expiry_date)),1)]),s("div",bm,[i[21]||(i[21]=s("span",{class:"font-medium"},"Certificado Mdico (Expedida):",-1)),s("span",mm,_(n(e.technical.medical_certificate_issue_date)),1)]),s("div",_m,[i[22]||(i[22]=s("span",{class:"font-medium"},"Certificado Mdico (Vence):",-1)),s("span",gm,_(n(e.technical.medical_certificate_expiry_date)),1)])])]),e.technical.passes&&e.technical.passes.length>0?(x(),w("div",vm,[s("h6",ym,"Pases de Acceso ("+_(e.technical.passes.length)+")",1),s("div",xm,[s("table",wm,[i[24]||(i[24]=s("thead",{class:"bg-sky-100"},[s("tr",null,[s("th",{class:"border-r border-gray-300"},"Bloque"),s("th",{class:"border-r border-gray-300"},"Vencimiento"),s("th",null,"Estado")])],-1)),s("tbody",null,[(x(!0),w(re,null,_e(e.technical.passes,c=>(x(),w("tr",{key:c.id,class:"hover"},[s("td",$m,_(c.bloque_display||c.bloque),1),s("td",Cm,_(n(c.fecha_caducidad)),1),s("td",null,[s("span",{class:le(["badge",o(null,c.fecha_caducidad)])},_(l(c.fecha_caducidad)),3)])]))),128))])])])])):te("",!0),e.technical.vaccination_records&&e.technical.vaccination_records.length>0?(x(),w("div",Em,[i[28]||(i[28]=s("h6",{class:"font-semibold text-lg mb-3"},"Registro de Vacunaciones",-1)),s("div",Sm,[s("table",Rm,[i[27]||(i[27]=s("thead",null,[s("tr",{class:"bg-sky-100"},[s("th",{class:"border border-gray-300 text-center font-semibold text-blue-700"},"VACUNA"),s("th",{class:"border border-gray-300 text-center font-semibold text-blue-700"},"DOSIS"),s("th",{class:"border border-gray-300 text-center font-semibold text-blue-700"},"FECHA"),s("th",{class:"border border-gray-300 text-center font-semibold text-blue-700"},"LOTE")])],-1)),s("tbody",null,[(x(!0),w(re,null,_e(r.value,(c,h)=>(x(),w(re,{key:h},[(x(!0),w(re,null,_e(c.slice(0,5),(f,u)=>(x(),w("tr",{key:f.id,class:"hover:bg-sky-50"},[u===0?(x(),w("td",km,_(h),1)):te("",!0),s("td",Am,_(f.dose_number),1),s("td",Dm,_(n(f.application_date)),1),s("td",Om,_(f.batch_number||""),1)]))),128)),(x(!0),w(re,null,_e(Math.max(0,5-c.length),f=>(x(),w("tr",{key:`${h}-empty-${f}`,class:"hover:bg-sky-50"},[c.length===0&&f===1?(x(),w("td",Im,_(h),1)):te("",!0),s("td",Pm,_(c.length+f),1),i[25]||(i[25]=s("td",{class:"border border-gray-300 text-center"},null,-1)),i[26]||(i[26]=s("td",{class:"border border-gray-300 text-center"},null,-1))]))),128))],64))),128))])])])])):te("",!0),e.technical.notes?(x(),w("div",Tm,[i[29]||(i[29]=s("h6",{class:"font-semibold text-lg mb-3"},"Notas",-1)),s("p",Nm,_(e.technical.notes),1)])):te("",!0)])):te("",!0)}},jm={key:0,class:"max-w-4xl mx-auto p-1"},Mm={class:"text-xl font-bold mb-6"},Fm={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},Vm={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},Um={class:"border-b-1 border-r-1 border-sky-200"},Lm={class:"ml-2"},qm={class:"border-b-1 border-r-1 border-sky-200"},Hm={class:"ml-2 font-mono"},Bm={class:"border-b-1 border-r-1 border-sky-200"},Gm={class:"ml-2"},Wm={class:"border-b-1 border-r-1 border-sky-200"},Km={class:"ml-2"},Ym={class:"border-b-1 border-r-1 border-sky-200"},zm={class:"ml-2"},Qm={class:"border-b-1 border-r-1 border-sky-200"},Jm={class:"ml-2"},Xm={class:"border-b-1 border-r-1 border-sky-200"},Zm={class:"border-b-1 border-r-1 border-sky-200"},e_={class:"ml-2 font-mono text-xs"},t_={class:"border-b-1 border-r-1 border-sky-200"},s_={class:"ml-2 font-mono text-xs"},n_={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},o_={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},l_={class:"border-b-1 border-r-1 border-sky-200"},r_={class:"ml-2"},a_={class:"border-b-1 border-r-1 border-sky-200"},i_={class:"border-b-1 border-r-1 border-sky-200"},c_={class:"border-b-1 border-r-1 border-sky-200"},d_={class:"border-b-1 border-r-1 border-sky-200"},u_={class:"ml-2"},f_={class:"border-b-1 border-r-1 border-sky-200"},p_={class:"ml-2"},h_={class:"border-b-1 border-r-1 border-sky-200"},b_={class:"ml-2"},m_={class:"border-b-1 border-r-1 border-sky-200"},__={class:"ml-2"},g_={class:"border-b-1 border-r-1 border-sky-200"},v_={class:"ml-2"},y_={class:"border-b-1 border-r-1 border-sky-200"},x_={class:"bg-sky-50 rounded-lg p-4 mb-6 space-y-2 border-gray-200 border"},w_={class:"grid grid-cols-2 gap-3 text-sm border p-2 rounded border-gray-300 bg-base-100"},$_={class:"border-b-1 border-r-1 border-sky-200"},C_={class:"ml-2"},E_={class:"border-b-1 border-r-1 border-sky-200"},S_={class:"ml-2"},R_={class:"border-b-1 border-r-1 border-sky-200"},k_={class:"ml-2"},A_={class:"border-b-1 border-r-1 border-sky-200"},D_={key:0,class:"bg-sky-50 rounded-lg p-4 border-gray-200 border"},O_={class:"text-sm bg-base-100 p-3 rounded border border-gray-300"},sa={__name:"VehiclePresentation",props:{vehicle:{type:Object,default:null}},setup(e){const t=l=>l?new Date(l).toLocaleDateString("es-ES"):"N/A",n=l=>{switch(l){case"DISPONIBLE":return"badge-success";case"VIGENTE":return"badge-success";case"VENCIDO":return"badge-error";case"PROXIMO_A_VENCER":return"badge-warning";default:return"badge-ghost"}},o=l=>{if(!l)return!1;const r=new Date,a=new Date(l),i=Math.floor((a-r)/(1e3*60*60*24));return i<=30&&i>0};return(l,r)=>e.vehicle?(x(),w("div",jm,[s("h5",Mm,_(e.vehicle.brand)+" "+_(e.vehicle.model),1),s("div",Fm,[r[9]||(r[9]=s("h6",{class:"font-semibold text-lg mb-3"},"Estado del Vehculo",-1)),s("div",Vm,[s("div",Um,[r[0]||(r[0]=s("span",{class:"font-medium"},"ID:",-1)),s("span",Lm,_(e.vehicle.id),1)]),s("div",qm,[r[1]||(r[1]=s("span",{class:"font-medium"},"Placa:",-1)),s("span",Hm,_(e.vehicle.no_plate),1)]),s("div",Bm,[r[2]||(r[2]=s("span",{class:"font-medium"},"Marca:",-1)),s("span",Gm,_(e.vehicle.brand),1)]),s("div",Wm,[r[3]||(r[3]=s("span",{class:"font-medium"},"Modelo:",-1)),s("span",Km,_(e.vehicle.model),1)]),s("div",Ym,[r[4]||(r[4]=s("span",{class:"font-medium"},"Tipo:",-1)),s("span",zm,_(e.vehicle.type_vehicle),1)]),s("div",Qm,[r[5]||(r[5]=s("span",{class:"font-medium"},"Ao:",-1)),s("span",Jm,_(e.vehicle.year),1)]),s("div",Xm,[r[6]||(r[6]=s("span",{class:"font-medium"},"Estado:",-1)),s("span",{class:le(["ml-2 badge",n(e.vehicle.status_vehicle)])},_(e.vehicle.status_vehicle),3)]),s("div",Zm,[r[7]||(r[7]=s("span",{class:"font-medium"},"Nmero de Motor:",-1)),s("span",e_,_(e.vehicle.engine_number),1)]),s("div",t_,[r[8]||(r[8]=s("span",{class:"font-medium"},"Nmero de Chasis:",-1)),s("span",s_,_(e.vehicle.chassis_number),1)])])]),s("div",n_,[r[20]||(r[20]=s("h6",{class:"font-semibold text-lg mb-3"},"Documentos y Certificaciones",-1)),s("div",o_,[s("div",l_,[r[10]||(r[10]=s("span",{class:"font-medium"},"Matrcula (Fecha):",-1)),s("span",r_,_(t(e.vehicle.date_matricula)),1)]),s("div",a_,[r[11]||(r[11]=s("span",{class:"font-medium"},"Matrcula (Vence):",-1)),s("span",{class:le(["ml-2",o(e.vehicle.due_date_matricula)?"text-warning font-semibold":""])},_(t(e.vehicle.due_date_matricula)),3)]),s("div",i_,[r[12]||(r[12]=s("span",{class:"font-medium"},"Cert. Operacional:",-1)),s("span",{class:le(["ml-2 badge",n(e.vehicle.status_cert_oper)])},_(e.vehicle.status_cert_oper),3)]),s("div",c_,[r[13]||(r[13]=s("span",{class:"font-medium"},"Cert. Oper. (Vence):",-1)),s("span",{class:le(["ml-2",o(e.vehicle.due_date_cert_oper)?"text-warning font-semibold":""])},_(t(e.vehicle.due_date_cert_oper)),3)]),s("div",d_,[r[14]||(r[14]=s("span",{class:"font-medium"},"MTOP (Fecha):",-1)),s("span",u_,_(t(e.vehicle.date_mtop)),1)]),s("div",f_,[r[15]||(r[15]=s("span",{class:"font-medium"},"MTOP (Vence):",-1)),s("span",p_,_(t(e.vehicle.due_date_mtop)),1)]),s("div",h_,[r[16]||(r[16]=s("span",{class:"font-medium"},"Revisin Tcnica:",-1)),s("span",b_,_(t(e.vehicle.date_technical_review)),1)]),s("div",m_,[r[17]||(r[17]=s("span",{class:"font-medium"},"Rev. Tcnica (Vence):",-1)),s("span",__,_(t(e.vehicle.due_date_technical_review)),1)]),s("div",g_,[r[18]||(r[18]=s("span",{class:"font-medium"},"Satlite (Fecha):",-1)),s("span",v_,_(t(e.vehicle.date_satellite)),1)]),s("div",y_,[r[19]||(r[19]=s("span",{class:"font-medium"},"Satlite (Vence):",-1)),s("span",{class:le(["ml-2",o(e.vehicle.due_date_satellite)?"text-warning font-semibold":""])},_(t(e.vehicle.due_date_satellite)),3)])])]),s("div",x_,[r[25]||(r[25]=s("h6",{class:"font-semibold text-lg mb-3"},"Seguro",-1)),s("div",w_,[s("div",$_,[r[21]||(r[21]=s("span",{class:"font-medium"},"Aseguradora:",-1)),s("span",C_,_(e.vehicle.insurance_company),1)]),s("div",E_,[r[22]||(r[22]=s("span",{class:"font-medium"},"Pliza Nro:",-1)),s("span",S_,_(e.vehicle.nro_poliza||"N/A"),1)]),s("div",R_,[r[23]||(r[23]=s("span",{class:"font-medium"},"Fecha Expedicin:",-1)),s("span",k_,_(t(e.vehicle.insurance_issue_date)),1)]),s("div",A_,[r[24]||(r[24]=s("span",{class:"font-medium"},"Vencimiento:",-1)),s("span",{class:le(["ml-2",o(e.vehicle.insurance_expiration_date)?"text-warning font-semibold":""])},_(t(e.vehicle.insurance_expiration_date)),3)])])]),e.vehicle.notes?(x(),w("div",D_,[r[26]||(r[26]=s("h6",{class:"font-semibold text-lg mb-3"},"Notas",-1)),s("p",O_,_(e.vehicle.notes),1)])):te("",!0)])):te("",!0)}},I_={class:"w-[95%] mx-auto p-6"},P_={class:"bg-white rounded-lg shadow-md p-2 mb-2 border border-gray-200"},T_={class:"flex justify-between items-center"},N_={class:"text-gray-800 flex items-center gap-2 font-semibold"},j_={class:"flex gap-2"},M_={class:"grid grid-cols-1 gap-4"},F_={class:"bg-gradient-to-r from-blue-500 to-sky-600 text-white p-4 rounded-t-lg backdrop-blur-sm"},V_={class:"flex justify-between items-start"},U_={class:"flex-1"},L_={class:"flex items-center gap-3 mb-2"},q_={class:"text-xl font-bold"},H_={class:"badge text-blue-500 font-semibold bg-white px-3 py-1"},B_={class:"text-right"},G_={class:"text-2xl p1 rounded text-error bg-gray-100 w-100% font-mono border border-sky-600 border-2"},W_={class:"me-2"},K_={class:"p-2"},Y_={class:"grid grid-cols-4 gap-4"},z_={class:"flex items-center gap-2"},Q_={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},J_={class:"flex items-center gap-2"},X_={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},Z_={class:"flex items-center gap-2"},eg={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},tg={class:"flex items-center gap-2"},sg={class:"flex gap-1 flex-1"},ng={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},og=["onClick"],lg={class:"p-2 border-b bg-gray-50 border-b-gray-200"},rg={class:"grid grid-cols-4 gap-4"},ag={class:"flex items-center gap-2"},ig={class:"flex gap-1 flex-1"},cg={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},dg={class:""},ug=["onClick"],fg={class:"flex items-center gap-2"},pg={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},hg={class:"flex items-center gap-2"},bg={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},mg={class:"flex items-center gap-2"},_g={class:"text-sm text-gray-800 font-semibold border rounded p-1 border-gray-300 flex-1"},gg={class:"p-4 border-b border-b-gray-200"},vg={class:"font-semibold text-gray-700 mb-3"},yg={class:"overflow-x-auto"},xg={class:"table table-sm w-full table-zebra"},wg={class:"border border-gray-300 p-2"},$g={class:"border border-gray-300 p-2"},Cg={class:"border border-gray-300 p-2 text-center"},Eg={key:0},Sg={class:"pt-2 pb-2"},Rg={class:"flex gap-4"},kg={class:"flex gap-4"},Ag={class:"p-3 border rounded border-gray-200"},Dg={class:"text-xl text-primary ml-5"},Og={class:"p-3 border rounded border-gray-200"},Ig={class:"text-xl text-primary ml-5"},Pg={class:"p-3 border rounded border-gray-200"},Tg={class:"text-xl text-primary ml-5"},Ng={class:"flex-1 border rounded p-3 border-gray-200"},jg={class:"text-primary ml-5"},Mg={class:"bg-gray-50 p-4 rounded-b-lg flex justify-between gap-2"},Fg={class:"flex gap-2"},Vg=["onClick"],Ug={key:0,class:"bg-white rounded-lg shadow-md p-8 text-center"},Lg={__name:"CustodyChainView",setup(e){const t=Ve(),n=Zr(),o=ea();bt(async()=>{await t.fetchProjectData(),await n.fetchTechnicalsAvailable(),await o.fetchVehicles()});const l=ds(),r=pe(null),a=pe(null),i=pe(!1),c=pe(!1),h=ee(()=>{if(!t.projectData?.work_orders)return[];const k=[];return t.projectData.work_orders.forEach(m=>{m.custody_chains&&m.custody_chains.forEach(p=>{k.push({...p,work_order:m})})}),k}),f=k=>{a.value=k,i.value=!0},u=k=>{r.value=k,c.value=!0},v=k=>k?k.substring(0,5):"N/A",d=k=>k?new Date(k).toLocaleDateString("es-ES"):"N/A";return(k,m)=>(x(),w("div",I_,[s("div",P_,[s("div",T_,[s("h1",N_,[m[6]||(m[6]=s("i",{class:"las la-file-invoice text-blue-500"},null,-1)),q(" Cadenas de Custodia - "+_(ye(t).projectData?.project?.partner_name),1)]),s("div",j_,[s("button",{class:"btn btn-secondary btn-sm",onClick:m[0]||(m[0]=p=>ye(l).push({name:"project-detail"}))},[...m[7]||(m[7]=[s("i",{class:"las la-arrow-left"},null,-1),q(" Volver ",-1)])]),s("button",{class:"btn btn-primary btn-sm",onClick:m[1]||(m[1]=p=>ye(l).push({name:"custody-chain-form"}))},[...m[8]||(m[8]=[s("i",{class:"las la-plus"},null,-1),q(" Nueva Cadena de Custodia ",-1)])])])])]),s("div",M_,[(x(!0),w(re,null,_e(h.value,p=>(x(),w("div",{key:p.id,class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow"},[s("div",F_,[s("div",V_,[s("div",U_,[s("div",L_,[s("h2",q_," #"+_(ye(t).projectData?.project?.id)+" "+_(ye(t).projectData?.project?.partner_name)+" - "+_(ye(t).projectData?.project?.location),1),s("span",H_,_(ye(t).projectData?.project?.cardinal_point||"N/A"),1)])]),s("div",B_,[s("div",G_,[m[9]||(m[9]=s("span",{class:"text-gray-700 ms-5"},"Nro.",-1)),s("span",W_,_(p.consecutive),1)])])])]),s("div",K_,[s("div",Y_,[s("div",z_,[m[10]||(m[10]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Fecha:",-1)),s("span",Q_,_(d(p.activity_date)),1)]),s("div",J_,[m[12]||(m[12]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Inicio - Fin:",-1)),s("span",X_,[q(_(v(p.start_time))+" - "+_(v(p.end_time))+" ",1),m[11]||(m[11]=s("span",{class:"ml-2 me-2 text-gray-200"},"|",-1)),q(" "+_(p.time_duration?.toFixed(2)||"0.00")+" HRS ",1)])]),s("div",Z_,[m[13]||(m[13]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Ubicacin:",-1)),s("span",eg,_(p.location),1)]),s("div",tg,[m[16]||(m[16]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Placa Vehiculo:",-1)),s("div",sg,[s("span",ng,[q(_(p.vehicle?.no_plate)+" ",1),m[14]||(m[14]=s("span",{class:"ml-2 me-2 text-gray-200"},"|",-1)),q(" "+_(p.vehicle?.brand)+" "+_(p.vehicle?.model),1)]),s("button",{type:"button",class:"btn btn-sm btn-outline",onClick:U=>u(p.vehicle),title:"Ver detalles del vehculo"},[...m[15]||(m[15]=[s("i",{class:"las la-eye"},null,-1)])],8,og)])])])]),s("div",lg,[s("div",rg,[s("div",ag,[m[19]||(m[19]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Tcnico:",-1)),s("div",ig,[s("span",cg,[q(_(p.technical?.first_name)+" "+_(p.technical?.last_name)+" ",1),m[17]||(m[17]=s("span",{class:"ml-2 me-2 text-gray-200"},"|",-1)),s("span",dg,"CI: "+_(p.dni_driver),1)]),s("button",{type:"button",class:"btn btn-sm btn-outline",onClick:U=>f(p.technical),title:"Ver detalles del tcnico"},[...m[18]||(m[18]=[s("i",{class:"las la-eye"},null,-1)])],8,ug)])]),s("div",fg,[m[20]||(m[20]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Cargo:",-1)),s("span",pg,_(p.driver_position),1)]),s("div",hg,[m[22]||(m[22]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Contacto:",-1)),s("span",bg,[q(_(p.contact_name)+" ",1),m[21]||(m[21]=s("span",{class:"ml-2 me-2 text-gray-200"},"|",-1)),s("span",null,_(ye(t).projectData?.project?.contact_phone),1)])]),s("div",mg,[m[23]||(m[23]=s("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap w-28"},"Empresa:",-1)),s("span",_g,_(ye(t).projectData?.project?.partner_name),1)])])]),s("div",gg,[s("h3",vg,"Detalle de Cadena de Custodia ("+_(p.details_count)+" equipos)",1),s("div",yg,[s("table",xg,[m[26]||(m[26]=s("thead",null,[s("tr",{class:"bg-gray-500 text-white text-center"},[s("th",{class:"border border-gray-300 w-10"},"#"),s("th",{class:"border border-gray-300"},"Equipo"),s("th",{class:"border border-gray-300 w-30"},"ID Recurso"),s("th",{class:"border border-gray-300 w-30"},"Acciones")])],-1)),s("tbody",null,[(x(!0),w(re,null,_e(p.details,(U,B)=>(x(),w("tr",{class:"hover:bg-yellow-100",key:U.id},[s("td",wg,_(B+1),1),s("td",$g,_(U.project_resource?.resource_item_name),1),s("td",Cg,_(U.project_resource_id),1),m[24]||(m[24]=s("td",{class:"border border-gray-300 p-2 text-center"},[s("span",{class:"border rounded p-1 cursor-pointer bg-red-400 text-white hover:bg-red-600 font-semibold"}," Eliminar ")],-1))]))),128)),!p.details||p.details.length===0?(x(),w("tr",Eg,[...m[25]||(m[25]=[s("td",{colspan:"4",class:"text-center py-4 text-gray-500"}," No hay detalles en esta cadena de custodia ",-1)])])):te("",!0)])])]),s("div",Sg,[s("div",Rg,[s("div",kg,[s("div",Ag,[m[27]||(m[27]=q(" Galones: ",-1)),s("span",Dg,_(p.total_gallons),1)]),s("div",Og,[m[28]||(m[28]=q(" Metro Cubicos: ",-1)),s("span",Ig,_(p.total_cubic_meters),1)]),s("div",Pg,[m[29]||(m[29]=q(" Barriles: ",-1)),s("span",Tg,_(p.total_barrels),1)])]),s("div",Ng,[m[30]||(m[30]=s("span",{class:"font-semibold"},"Notas:",-1)),s("span",jg,_(p.metadata?.notes||"Sin notas"),1)])])])]),s("div",Mg,[s("button",{class:"btn btn-sm btn-primary",onClick:m[2]||(m[2]=U=>ye(l).push({name:"project-detail"}))},[...m[31]||(m[31]=[s("i",{class:"las la-arrow-left"},null,-1),q(" Volver ",-1)])]),s("div",Fg,[s("button",{class:"btn btn-sm btn-primary",onClick:U=>ye(l).push({name:"custody-chain-form",params:{id:p.id}})},[...m[32]||(m[32]=[s("i",{class:"las la-edit"},null,-1),q(" Editar ",-1)])],8,Vg),m[33]||(m[33]=s("button",{class:"btn btn-sm btn-primary"},[s("i",{class:"las la-print"}),q(" Imprimir ")],-1)),m[34]||(m[34]=s("button",{class:"btn btn-sm bg-red-600 text-white"},[s("i",{class:"las la-times-circle"}),q(" Anular ")],-1))])])]))),128)),h.value.length===0?(x(),w("div",Ug,[m[36]||(m[36]=s("i",{class:"las la-inbox text-6xl text-gray-300"},null,-1)),m[37]||(m[37]=s("p",{class:"text-gray-500 mt-4"},"No hay cadenas de custodia registradas para este proyecto",-1)),s("button",{class:"btn btn-primary btn-sm mt-4",onClick:m[3]||(m[3]=p=>ye(l).push({name:"custody-chain-form"}))},[...m[35]||(m[35]=[s("i",{class:"las la-plus"},null,-1),q(" Crear Primera Cadena ",-1)])])])):te("",!0)]),Ee(Ps,{"is-open":i.value,title:`Detalles del Tcnico - ${a.value?.first_name} ${a.value?.last_name}`,size:"xl",onClose:m[4]||(m[4]=p=>i.value=!1)},{default:Rt(()=>[a.value?(x(),At(ta,{key:0,technical:a.value},null,8,["technical"])):te("",!0)]),_:1},8,["is-open","title"]),Ee(Ps,{"is-open":c.value,title:`Detalles del Vehculo - ${r.value?.no_plate}`,size:"xl",onClose:m[5]||(m[5]=p=>c.value=!1)},{default:Rt(()=>[r.value?(x(),At(sa,{key:0,vehicle:r.value},null,8,["vehicle"])):te("",!0)]),_:1},8,["is-open","title"])]))}},qg=zt("custodyChainStore",{state:()=>({custodyChains:[],sheetProjectInfo:null,selectedCustodyChain:null,loading:!1,error:null,newCustodyChain:{id:null,id_sheet_project:null,issue_date:null,consecutive:"00000",activity_date:null,location:null,total_gallons:0,duration_hours:0,have_logistic:"NA"}}),actions:{async addCustodyChain(e){console.log("Adding new custody chain",e);try{const t=await fetch(be.URLCreateCustodyChain,{method:"POST",headers:be.headers,body:JSON.stringify(e)});if(!t.ok){const o=await t.json();throw new Error(o.message||"Failed to create custody chain")}const n=await t.json();return this.custodyChains.push(n.data),this.resetNewCustodyChain(),n.data}catch(t){throw console.error("Error creating custody chain:",t),t}},resetNewCustodyChain(){this.newCustodyChain={id:null,id_sheet_project:null,issue_date:new Date().toISOString().split("T")[0],consecutive:"00000",activity_date:new Date().toISOString().split("T")[0],location:null,total_gallons:0,duration_hours:0,have_logistic:"NA"}},async fetchCustodyCapphainDetail(e){this.loading=!0,this.error=null,console.log("Fetching custody chain detail for ID:",e);try{const t=be.URLCustodyChainDetail.replace("${id}",e),n=await fetch(t,{method:"GET",headers:be.headers});if(!n.ok)throw new Error("Failed to fetch custody chain detail");const o=await n.json();return this.selectedCustodyChain=o.data,o.data}catch(t){throw console.error("Error fetching custody chain detail:",t),this.error=t.message,t}finally{this.loading=!1}},async updateCustodyChain(e,t){this.loading=!0,this.error=null,console.log("Updating custody chain",e,t);try{const n=be.URLUpdateCustodyChain.replace("${id}",e),o=await fetch(n,{method:"PUT",headers:be.headers,body:JSON.stringify(t)});if(!o.ok){const a=await o.json();throw new Error(a.message||"Failed to update custody chain")}const l=await o.json(),r=this.custodyChains.findIndex(a=>a.id===e);return r!==-1&&(this.custodyChains[r]={...this.custodyChains[r],...l.data}),l.data}catch(n){throw console.error("Error updating custody chain:",n),this.error=n.message,n}finally{this.loading=!1}}}}),Mt=e=>{if(!e)return!1;const t=new Date;return new Date(e)<t},wt=e=>{if(!e)return!1;const t=new Date,n=new Date(e),o=Math.floor((n-t)/(1e3*60*60*24));return o<=30&&o>0},Hg=e=>{if(!e)return{hasErrors:!1,hasWarnings:!1,issues:[]};const t=[];let n=!1,o=!1;return Mt(e.license_expiry_date)?(t.push({type:"error",field:"Licencia de Conducir",message:"Licencia de conducir VENCIDA"}),n=!0):wt(e.license_expiry_date)&&(t.push({type:"warning",field:"Licencia de Conducir",message:"Licencia de conducir prxima a vencer"}),o=!0),Mt(e.defensive_driving_certificate_expiry_date)?(t.push({type:"error",field:"Conduccin Defensiva",message:"Certificado de conduccin defensiva VENCIDO"}),n=!0):wt(e.defensive_driving_certificate_expiry_date)&&(t.push({type:"warning",field:"Conduccin Defensiva",message:"Certificado de conduccin defensiva prximo a vencer"}),o=!0),Mt(e.medical_certificate_expiry_date)?(t.push({type:"error",field:"Certificado Mdico",message:"Certificado mdico VENCIDO"}),n=!0):wt(e.medical_certificate_expiry_date)&&(t.push({type:"warning",field:"Certificado Mdico",message:"Certificado mdico prximo a vencer"}),o=!0),e.passes&&e.passes.length>0&&e.passes.forEach(l=>{Mt(l.fecha_caducidad)?(t.push({type:"error",field:`Pase ${l.bloque_display||l.bloque}`,message:"Pase de acceso VENCIDO"}),n=!0):wt(l.fecha_caducidad)&&(t.push({type:"warning",field:`Pase ${l.bloque_display||l.bloque}`,message:"Pase de acceso prximo a vencer"}),o=!0)}),e.is_iess_affiliated||(t.push({type:"warning",field:"IESS",message:"No est afiliado al IESS"}),o=!0),{hasErrors:n,hasWarnings:o,issues:t}},Bg=e=>{if(!e)return{hasErrors:!1,hasWarnings:!1,issues:[]};const t=[];let n=!1,o=!1;return Mt(e.due_date_matricula)?(t.push({type:"error",field:"Matrcula",message:"Matrcula VENCIDA"}),n=!0):wt(e.due_date_matricula)&&(t.push({type:"warning",field:"Matrcula",message:"Matrcula prxima a vencer"}),o=!0),e.status_cert_oper==="VENCIDO"?(t.push({type:"error",field:"Certificado Operacional",message:"Certificado operacional VENCIDO"}),n=!0):wt(e.due_date_cert_oper)&&(t.push({type:"warning",field:"Certificado Operacional",message:"Certificado operacional prximo a vencer"}),o=!0),Mt(e.due_date_technical_review)?(t.push({type:"error",field:"Revisin Tcnica",message:"Revisin tcnica VENCIDA"}),n=!0):wt(e.due_date_technical_review)&&(t.push({type:"warning",field:"Revisin Tcnica",message:"Revisin tcnica prxima a vencer"}),o=!0),Mt(e.insurance_expiration_date)?(t.push({type:"error",field:"Seguro",message:"Seguro VENCIDO"}),n=!0):wt(e.insurance_expiration_date)&&(t.push({type:"warning",field:"Seguro",message:"Seguro prximo a vencer"}),o=!0),Mt(e.due_date_satellite)?(t.push({type:"error",field:"Satlite",message:"Certificado de satlite VENCIDO"}),n=!0):wt(e.due_date_satellite)&&(t.push({type:"warning",field:"Satlite",message:"Certificado de satlite prximo a vencer"}),o=!0),{hasErrors:n,hasWarnings:o,issues:t}},na=42,oa=.158987,la=.00378541,Gg=e=>{const t=parseFloat(e)||0;return{barrels:parseFloat((t/na).toFixed(2)),cubicMeters:parseFloat((t*la).toFixed(2))}},Wg=e=>{const t=parseFloat(e)||0;return{gallons:parseFloat((t*na).toFixed(2)),cubicMeters:parseFloat((t*oa).toFixed(2))}},Kg=e=>{const t=parseFloat(e)||0;return{gallons:parseFloat((t/la).toFixed(2)),barrels:parseFloat((t/oa).toFixed(2))}},Yg={class:"max-w-7xl mx-auto p-4"},zg={class:"bg-white rounded-lg p-4 mb-4 border border-gray-200 shadow-sm"},Qg={class:"flex justify-between items-center"},Jg={class:"text-xl font-semibold text-gray-800"},Xg={class:"text-sm text-gray-600 mt-1"},Zg={class:"flex items-center gap-3"},ev={class:"form-control"},tv=["disabled"],sv=["value"],nv={class:"flex flex-col items-center"},ov={key:0,class:"mt-3 pt-3 border-t border-gray-200"},lv={key:0,class:"flex items-center gap-2 text-sm text-amber-600"},rv={key:1,class:"flex items-center gap-2 text-sm text-red-600"},av={key:2,class:"flex items-center gap-2 text-sm text-green-600"},iv={key:0,class:"mb-6 space-y-3"},cv={key:0,class:"alert alert-error shadow-lg"},dv={class:"flex items-start w-full"},uv={class:"flex-1"},fv={class:"text-sm mt-2 space-y-1"},pv={key:1,class:"alert alert-warning shadow-lg"},hv={class:"flex items-start w-full"},bv={class:"flex-1"},mv={class:"text-sm mt-2 space-y-1"},_v={key:2,class:"alert alert-error shadow-lg"},gv={class:"flex items-start w-full"},vv={class:"flex-1"},yv={class:"text-sm mt-2 space-y-1"},xv={key:3,class:"alert alert-warning shadow-lg"},wv={class:"flex items-start w-full"},$v={class:"flex-1"},Cv={class:"text-sm mt-2 space-y-1"},Ev={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},Sv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Rv={class:"form-control w-full"},kv={class:"label",for:"technical"},Av={class:"label-text font-medium"},Dv={key:0,class:"badge badge-error badge-sm ml-1"},Ov={key:1,class:"badge badge-warning badge-sm ml-1"},Iv={class:"flex gap-2"},Pv=["disabled"],Tv=["value"],Nv={class:"form-control w-full"},jv={class:"label",for:"vehicle"},Mv={class:"label-text font-medium"},Fv={key:0,class:"badge badge-error badge-sm ml-1"},Vv={key:1,class:"badge badge-warning badge-sm ml-1"},Uv={class:"flex gap-2"},Lv=["disabled"],qv=["value"],Hv={class:"form-control w-full"},Bv=["disabled"],Gv={class:"form-control w-full"},Wv=["disabled"],Kv={class:"form-control w-full"},Yv=["disabled"],zv={class:"form-control w-full"},Qv=["disabled"],Jv={class:"form-control w-full"},Xv=["disabled"],Zv={class:"form-control w-full"},ey=["disabled"],ty={key:0,class:"label"},sy={class:"label-text-alt text-error"},ny={class:"form-control w-full"},oy={class:"form-control w-full"},ly=["disabled"],ry={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},ay={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},iy={class:"form-control w-full"},cy=["disabled"],dy={class:"form-control w-full"},uy=["disabled"],fy={class:"form-control w-full"},py=["disabled"],hy={class:"form-control w-full"},by=["disabled"],my={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},_y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gy={class:"form-control w-full"},vy=["disabled"],yy={class:"form-control w-full"},xy=["disabled"],wy={class:"form-control w-full"},$y=["disabled"],Cy={class:"form-control w-full"},Ey=["disabled"],Sy={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},Ry={class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},ky={class:"badge badge-primary ml-2"},Ay={class:"overflow-x-auto"},Dy={class:"table table-zebra w-full table-sm"},Oy={class:"bg-gray-500 text-white"},Iy={class:"border border-gray-300 w-24 text-center"},Py=["disabled"],Ty=["onClick","title"],Ny={class:"border border-gray-300"},jy={class:"flex items-center justify-between px-2"},My={key:0,class:"badge badge-success badge-sm gap-1",title:"Recurso activo"},Fy={key:1,class:"badge badge-error badge-sm gap-1",title:"Recurso inactivo"},Vy=["checked","disabled","onClick"],Uy={class:"border border-gray-300"},Ly={class:"border border-gray-300"},qy={class:"border border-gray-300"},Hy={class:"border border-gray-300 text-right font-mono"},By={key:0},Gy={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},Wy={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ky={class:"form-control"},Yy={class:"label cursor-pointer justify-start gap-3"},zy=["disabled"],Qy={class:"form-control"},Jy={class:"label cursor-pointer justify-start gap-3"},Xy=["disabled"],Zy={class:"form-control"},e0={class:"label cursor-pointer justify-start gap-3"},t0=["disabled"],s0={class:"form-control"},n0={class:"label cursor-pointer justify-start gap-3"},o0=["disabled"],l0={class:"form-control"},r0={class:"label cursor-pointer justify-start gap-3"},a0=["disabled"],i0={class:"form-control"},c0={class:"label cursor-pointer justify-start gap-3"},d0=["disabled"],u0={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},f0={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},p0={class:"form-control w-full"},h0=["disabled"],b0={class:"form-control w-full"},m0=["disabled"],_0={class:"form-control w-full"},g0=["disabled"],v0={class:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm"},y0={class:"form-control w-full"},x0=["disabled"],w0={class:"flex gap-3 justify-end mt-6"},$0=["disabled"],C0=["disabled"],E0={key:0,class:"las la-save"},S0={key:1,class:"las la-spinner animate-spin"},R0={__name:"CustodyChainForm",setup(e){const t=Ve(),n=Zr(),o=ea(),l=Qt(),r=qg(),a=ds(),i=Jr(),c=pe(!1),h=pe(!1),f=pe(!1),u=ee(()=>{const V=parseInt(i.params.id);return isNaN(V)?0:V}),v=ee(()=>u.value>0),d=pe({technical:null,vehicle:null,sheet_project:null,consecutive:"",activity_date:new Date().toISOString().split("T")[0],location:"",issue_date:new Date().toISOString().split("T")[0],status:"DRAFT",start_time:"",end_time:"",time_duration:0,contact_name:"",dni_contact:"",contact_position:"",date_contact:new Date().toISOString().split("T")[0],driver_name:"",dni_driver:"",driver_position:"",driver_date:new Date().toISOString().split("T")[0],total_gallons:0,total_barrels:0,total_cubic_meters:0,black_water:!1,grey_water:!1,clean_water:!1,activated_sludge:!1,treated_wastewater:!1,organic_grease:!1,notes:"",technical_name:"",technical_dni:"",technical_position:"",vehicle_plate:"",vehicle_brand:"",vehicle_model:"",have_logistic:"NA"}),k=pe([]),m=pe("DRAFT"),p=ee(()=>m.value==="CLOSE");ee(()=>!p.value);const U=async()=>{if(v.value)try{c.value=!0;const V=await r.fetchCustodyCapphainDetail(u.value);if(V){const b=V.custody_chain,C=V.technical,R=V.vehicle,W=V.details||[];m.value=b.status||"DRAFT",d.value={technical:C?.id||null,vehicle:R?.id||null,sheet_project:b.sheet_project_id,consecutive:b.consecutive,activity_date:b.activity_date,location:b.location,issue_date:b.issue_date||new Date().toISOString().split("T")[0],status:b.status||"DRAFT",start_time:b.start_time||"",end_time:b.end_time||"",time_duration:b.time_duration||0,contact_name:b.contact_name||"",dni_contact:b.dni_contact||"",contact_position:b.contact_position||"",date_contact:b.date_contact||new Date().toISOString().split("T")[0],driver_name:b.driver_name||"",dni_driver:b.dni_driver||"",driver_position:b.driver_position||"",driver_date:b.driver_date||new Date().toISOString().split("T")[0],total_gallons:parseFloat(b.total_gallons)||0,total_barrels:parseFloat(b.total_barrels)||0,total_cubic_meters:parseFloat(b.total_cubic_meters)||0,black_water:b.black_water||!1,grey_water:b.grey_water||!1,clean_water:b.clean_water||!1,activated_sludge:b.activated_sludge||!1,treated_wastewater:b.treated_wastewater||!1,organic_grease:b.organic_grease||!1,notes:b.meta?.notes||"",technical_name:C?`${C.first_name} ${C.last_name}`:"",technical_dni:C?.dni||"",technical_position:C?.work_area_display||C?.work_area||"",vehicle_plate:R?.no_plate||"",vehicle_brand:R?.brand||"",vehicle_model:R?.model||"",have_logistic:b.have_logistic||"NA"},W.length>0&&(k.value=W.map(K=>K.project_resource.id))}else console.warn("Cadena de custodia no encontrada"),a.push({name:"projects-detail"})}catch(V){console.error("Error al cargar cadena de custodia:",V),alert("Error al cargar los datos de la cadena de custodia: "+V.message),a.push({name:"projects-detail"})}finally{c.value=!1}};bt(async()=>{await t.fetchProjectData(),await n.fetchTechnicalsAvailable(),await o.fetchVehicles(),await l.fetchResourcesProject(),v.value?await U():(d.value.location=t.project?.location||"",d.value.contact_name=t.project?.contact_name||"")});const B=ee(()=>l.resourcesProject.filter(V=>V.type==="SERVIC").map(V=>({...V,selected:k.value.includes(V.id)}))),Z=ee(()=>B.value.filter(V=>V.selected)),J=ee(()=>n.technicals.map(V=>({id:V.id,display:`${V.first_name} ${V.last_name}`,fullData:V}))),z=ee(()=>o.vehicles.map(V=>({id:V.id,display:`${V.no_plate} - ${V.brand} ${V.model}`,fullData:V}))),S=V=>{const b=B.value.find(R=>R.id===V);if(b&&b.type==="SERVIC"&&!b.is_active)return;const C=k.value.indexOf(V);C>-1?k.value.splice(C,1):k.value.push(V)},O=()=>{if(d.value.start_time&&d.value.end_time){const V=d.value.start_time.split(":"),b=d.value.end_time.split(":"),C=parseInt(V[0])*60+parseInt(V[1]),W=parseInt(b[0])*60+parseInt(b[1])-C;d.value.time_duration=W>0?W:0}},Q=async()=>{try{if(c.value=!0,!d.value.technical||!d.value.vehicle||Z.value.length===0){alert("Por favor complete los campos requeridos y seleccione al menos un recurso");return}const V={custody_chain:{technical_id:d.value.technical,vehicle_id:d.value.vehicle,activity_date:d.value.activity_date,issue_date:d.value.issue_date,consecutive:d.value.consecutive,status:d.value.status,location:d.value.location,start_time:d.value.start_time,end_time:d.value.end_time,time_duration:d.value.time_duration,contact_name:d.value.contact_name,dni_contact:d.value.dni_contact,contact_position:d.value.contact_position,date_contact:d.value.date_contact,driver_name:d.value.driver_name,dni_driver:d.value.dni_driver,driver_position:d.value.driver_position,driver_date:d.value.driver_date,total_gallons:parseFloat((parseFloat(d.value.total_gallons)||0).toFixed(2)),total_barrels:parseFloat((parseFloat(d.value.total_barrels)||0).toFixed(2)),total_cubic_meters:parseFloat((parseFloat(d.value.total_cubic_meters)||0).toFixed(2)),black_water:d.value.black_water,grey_water:d.value.grey_water,clean_water:d.value.clean_water,activated_sludge:d.value.activated_sludge,treated_wastewater:d.value.treated_wastewater,organic_grease:d.value.organic_grease,have_logistic:d.value.have_logistic,meta:{notes:d.value.notes,id_user_updated:be.userId||1}},details:k.value.map(b=>({project_resource_id:b}))};if(v.value){if(await r.updateCustodyChain(u.value,V)){await t.fetchProjectData();const C=t.workOrders.find(R=>R.status==="IN_PROGRESS");C?a.push({name:"sheet-project-view",params:{id:C.id}}):a.push({name:"projects-detail"})}}else{const b={technical_id:d.value.technical,vehicle_id:d.value.vehicle,project_id:be.idProject,activity_date:d.value.activity_date,issue_date:d.value.issue_date,consecutive:d.value.consecutive,location:d.value.location,start_time:d.value.start_time,end_time:d.value.end_time,duration_hours:d.value.time_duration,contact_name:d.value.contact_name,dni_contact:d.value.dni_contact,contact_position:d.value.contact_position,date_contact:d.value.date_contact,driver_name:d.value.driver_name,dni_driver:d.value.dni_driver,driver_position:d.value.driver_position,driver_date:d.value.driver_date,technical_name:d.value.technical_name,technical_dni:d.value.technical_dni,technical_position:d.value.technical_position,vehicle_plate:d.value.vehicle_plate,vehicle_brand:d.value.vehicle_brand,vehicle_model:d.value.vehicle_model,total_gallons:parseFloat(d.value.total_gallons)||0,total_barrels:parseFloat(d.value.total_barrels)||0,total_cubic_meters:parseFloat(d.value.total_cubic_meters)||0,black_water:d.value.black_water,grey_water:d.value.grey_water,clean_water:d.value.clean_water,activated_sludge:d.value.activated_sludge,treated_wastewater:d.value.treated_wastewater,organic_grease:d.value.organic_grease,have_logistic:d.value.have_logistic,notes:d.value.notes,resources:k.value};if(await r.addCustodyChain(b)){await t.fetchProjectData();const R=t.workOrders.find(W=>W.status==="IN_PROGRESS");R?a.push({name:"sheet-project-view",params:{id:R.id}}):a.push({name:"projects-detail"})}}}catch(V){console.error("Error al guardar:",V),alert("Error al "+(v.value?"actualizar":"guardar")+" la cadena de custodia: "+V.message)}finally{c.value=!1}},E=()=>{ce.value&&(h.value=!0)},T=()=>{N.value&&(f.value=!0)},M=()=>{const V=t.workOrders.find(b=>b.status==="IN_PROGRESS");V?a.push({name:"sheet-project-view",params:{id:V.id}}):a.push({name:"projects-detail"})};Pe(()=>t.project?.location,V=>{V&&!d.value.location&&!v.value&&(d.value.location=V)}),Pe(()=>t.project?.contact_name,V=>{V&&!d.value.contact_name&&!v.value&&(d.value.contact_name=V)});const ce=ee(()=>d.value.technical?n.technicals.find(V=>V.id===d.value.technical):null),N=ee(()=>d.value.vehicle?o.vehicles.find(V=>V.id===d.value.vehicle):null),me=ee(()=>Hg(ce.value)),F=ee(()=>Bg(N.value)),I=ee(()=>me.value.hasErrors||me.value.hasWarnings||F.value.hasErrors||F.value.hasWarnings),L=ee(()=>{if(!d.value.start_time||!d.value.end_time)return{isValid:!0,message:""};const V=d.value.start_time.split(":"),b=d.value.end_time.split(":"),C=parseInt(V[0])*60+parseInt(V[1]);return parseInt(b[0])*60+parseInt(b[1])<=C?{isValid:!1,message:"La hora de fin debe ser mayor que la hora de inicio"}:{isValid:!0,message:""}});Pe(()=>d.value.start_time,()=>{O()}),Pe(()=>d.value.end_time,()=>{O()}),Pe(()=>d.value.activity_date,V=>{V&&!v.value&&(d.value.issue_date=V,d.value.driver_date=V)}),Pe(()=>d.value.technical,V=>{if(V&&!v.value){const b=n.technicals.find(C=>C.id===V);b&&(d.value.technical_name=`${b.first_name} ${b.last_name}`,d.value.technical_dni=b.dni,d.value.technical_position=b.work_area_display||b.work_area,d.value.driver_name=`${b.first_name} ${b.last_name}`,d.value.dni_driver=b.dni,d.value.driver_position=b.work_area_display||b.work_area,d.value.driver_date=new Date().toISOString().split("T")[0])}}),Pe(()=>d.value.vehicle,V=>{if(V&&!v.value){const b=o.vehicles.find(C=>C.id===V);b&&(d.value.vehicle_plate=b.no_plate,d.value.vehicle_brand=b.brand,d.value.vehicle_model=b.model)}});const ue=pe(null);Pe(()=>d.value.total_gallons,(V,b)=>{if(ue.value==="gallons"&&V!==b){const C=Gg(V);ue.value=null,d.value.total_barrels=parseFloat(C.barrels.toFixed(2)),d.value.total_cubic_meters=parseFloat(C.cubicMeters.toFixed(2))}}),Pe(()=>d.value.total_barrels,(V,b)=>{if(ue.value==="barrels"&&V!==b){const C=Wg(V);ue.value=null,d.value.total_gallons=parseFloat(C.gallons.toFixed(2)),d.value.total_cubic_meters=parseFloat(C.cubicMeters.toFixed(2))}}),Pe(()=>d.value.total_cubic_meters,(V,b)=>{if(ue.value==="cubicMeters"&&V!==b){const C=Kg(V);ue.value=null,d.value.total_gallons=parseFloat(C.gallons.toFixed(2)),d.value.total_barrels=parseFloat(C.barrels.toFixed(2))}});const Ke=()=>{ue.value="gallons"},Ye=()=>{ue.value="barrels"},et=()=>{ue.value="cubicMeters"},je=ee(()=>[{value:"DRAFT",label:"BORRADOR",class:"badge-warning"},{value:"CLOSE",label:"CERRADO",class:"badge-success"}]),mt=ee(()=>je.value.find(V=>V.value===d.value.status)||je.value[0]);return(V,b)=>(x(),w("div",Yg,[s("div",zg,[s("div",Qg,[s("div",null,[s("h2",Jg,[b[31]||(b[31]=s("i",{class:"las la-link text-blue-600"},null,-1)),q(" "+_(v.value?`${p.value?"Ver":"Editar"} Cadena de Custodia #${u.value}`:"Nueva Cadena de Custodia"),1)]),s("p",Xg,_(p.value?"Esta cadena de custodia est cerrada y no puede ser modificada":v.value?"Modifique los datos de la cadena de custodia":"Complete los datos para crear una nueva cadena de custodia"),1)]),s("div",Zg,[s("div",ev,[b[32]||(b[32]=s("label",{class:"label py-0 mb-1"},[s("span",{class:"label-text font-semibold text-xs"},"Estado")],-1)),se(s("select",{"onUpdate:modelValue":b[0]||(b[0]=C=>d.value.status=C),disabled:p.value,class:le(["select select-bordered select-sm",{"select-warning":d.value.status==="DRAFT","select-success":d.value.status==="CLOSE"}])},[(x(!0),w(re,null,_e(je.value,C=>(x(),w("option",{key:C.value,value:C.value},_(C.label),9,sv))),128))],10,tv),[[ft,d.value.status]])]),s("div",nv,[b[33]||(b[33]=s("span",{class:"text-xs text-gray-500 mb-1"},"Estado Actual",-1)),s("span",{class:le(["badge badge-lg",mt.value.class])},[s("i",{class:le(["las mr-1",{"la-edit":d.value.status==="DRAFT","la-lock":d.value.status==="CLOSE"}])},null,2),q(" "+_(mt.value.label),1)],2)])])]),v.value?(x(),w("div",ov,[!p.value&&d.value.status==="DRAFT"?(x(),w("div",lv,[...b[34]||(b[34]=[s("i",{class:"las la-info-circle text-lg"},null,-1),s("span",null,[q("La cadena de custodia est en estado "),s("strong",null,"BORRADOR"),q(" y puede ser modificada libremente.")],-1)])])):p.value?(x(),w("div",rv,[...b[35]||(b[35]=[s("i",{class:"las la-lock text-lg"},null,-1),s("span",null,[q("La cadena de custodia est "),s("strong",null,"CERRADA"),q(". No se pueden realizar modificaciones.")],-1)])])):(x(),w("div",av,[...b[36]||(b[36]=[s("i",{class:"las la-check-circle text-lg"},null,-1),s("span",null,[q("Al guardar con estado "),s("strong",null,"CERRADO"),q(", no se podrn realizar ms modificaciones.")],-1)])]))])):te("",!0)]),I.value?(x(),w("div",iv,[me.value.hasErrors?(x(),w("div",cv,[s("div",dv,[b[38]||(b[38]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("div",uv,[b[37]||(b[37]=s("h3",{class:"font-bold"},"Problemas crticos con el tcnico seleccionado",-1)),s("ul",fv,[(x(!0),w(re,null,_e(me.value.issues.filter(C=>C.type==="error"),(C,R)=>(x(),w("li",{key:R},[s("strong",null,_(C.field)+":",1),q(" "+_(C.message),1)]))),128))])])])])):te("",!0),me.value.hasWarnings&&!me.value.hasErrors?(x(),w("div",pv,[s("div",hv,[b[40]||(b[40]=s("i",{class:"las la-exclamation-triangle text-2xl"},null,-1)),s("div",bv,[b[39]||(b[39]=s("h3",{class:"font-bold"},"Advertencias del tcnico seleccionado",-1)),s("ul",mv,[(x(!0),w(re,null,_e(me.value.issues.filter(C=>C.type==="warning"),(C,R)=>(x(),w("li",{key:R},[s("strong",null,_(C.field)+":",1),q(" "+_(C.message),1)]))),128))])])])])):te("",!0),F.value.hasErrors?(x(),w("div",_v,[s("div",gv,[b[42]||(b[42]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("div",vv,[b[41]||(b[41]=s("h3",{class:"font-bold"},"Problemas crticos con el vehculo seleccionado",-1)),s("ul",yv,[(x(!0),w(re,null,_e(F.value.issues.filter(C=>C.type==="error"),(C,R)=>(x(),w("li",{key:R},[s("strong",null,_(C.field)+":",1),q(" "+_(C.message),1)]))),128))])])])])):te("",!0),F.value.hasWarnings&&!F.value.hasErrors?(x(),w("div",xv,[s("div",wv,[b[44]||(b[44]=s("i",{class:"las la-exclamation-triangle text-2xl"},null,-1)),s("div",$v,[b[43]||(b[43]=s("h3",{class:"font-bold"},"Advertencias del vehculo seleccionado",-1)),s("ul",Cv,[(x(!0),w(re,null,_e(F.value.issues.filter(C=>C.type==="warning"),(C,R)=>(x(),w("li",{key:R},[s("strong",null,_(C.field)+":",1),q(" "+_(C.message),1)]))),128))])])])])):te("",!0)])):te("",!0),s("form",{onSubmit:Os(Q,["prevent"]),class:"space-y-6"},[s("div",Ev,[b[65]||(b[65]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Informacin General",-1)),s("div",Sv,[s("div",Rv,[s("label",kv,[s("span",Av,[b[47]||(b[47]=q(" Tcnico * ",-1)),me.value.hasErrors?(x(),w("span",Dv,[...b[45]||(b[45]=[s("i",{class:"las la-exclamation-circle"},null,-1)])])):me.value.hasWarnings?(x(),w("span",Ov,[...b[46]||(b[46]=[s("i",{class:"las la-exclamation-triangle"},null,-1)])])):te("",!0)])]),s("div",Iv,[se(s("select",{id:"technical","onUpdate:modelValue":b[1]||(b[1]=C=>d.value.technical=C),disabled:p.value,required:"",class:le(["select select-bordered w-full flex-1",{"select-error":me.value.hasErrors,"select-warning":me.value.hasWarnings&&!me.value.hasErrors}])},[b[48]||(b[48]=s("option",{value:null,disabled:""},"Seleccione un tcnico",-1)),(x(!0),w(re,null,_e(J.value,C=>(x(),w("option",{key:C.id,value:C.id},_(C.display),9,Tv))),128))],10,Pv),[[ft,d.value.technical,void 0,{number:!0}]]),ce.value?(x(),w("button",{key:0,type:"button",class:"btn btn-outline btn-square",onClick:E,title:"Ver detalles del tcnico"},[...b[49]||(b[49]=[s("i",{class:"las la-eye text-lg"},null,-1)])])):te("",!0)])]),s("div",Nv,[s("label",jv,[s("span",Mv,[b[52]||(b[52]=q(" Vehculo * ",-1)),F.value.hasErrors?(x(),w("span",Fv,[...b[50]||(b[50]=[s("i",{class:"las la-exclamation-circle"},null,-1)])])):F.value.hasWarnings?(x(),w("span",Vv,[...b[51]||(b[51]=[s("i",{class:"las la-exclamation-triangle"},null,-1)])])):te("",!0)])]),s("div",Uv,[se(s("select",{id:"vehicle","onUpdate:modelValue":b[2]||(b[2]=C=>d.value.vehicle=C),disabled:p.value,required:"",class:le(["select select-bordered w-full flex-1",{"select-error":F.value.hasErrors,"select-warning":F.value.hasWarnings&&!F.value.hasErrors}])},[b[53]||(b[53]=s("option",{value:null,disabled:""},"Seleccione un vehculo",-1)),(x(!0),w(re,null,_e(z.value,C=>(x(),w("option",{key:C.id,value:C.id},_(C.display),9,qv))),128))],10,Lv),[[ft,d.value.vehicle,void 0,{number:!0}]]),N.value?(x(),w("button",{key:0,type:"button",class:"btn btn-outline btn-square",onClick:T,title:"Ver detalles del vehculo"},[...b[54]||(b[54]=[s("i",{class:"las la-eye text-lg"},null,-1)])])):te("",!0)])]),s("div",Hv,[b[55]||(b[55]=s("label",{class:"label",for:"consecutive"},[s("span",{class:"label-text font-medium"},"Consecutivo")],-1)),se(s("input",{type:"text",id:"consecutive","onUpdate:modelValue":b[3]||(b[3]=C=>d.value.consecutive=C),disabled:p.value,placeholder:"Se generar automticamente",class:"input input-bordered w-full",maxlength:"7"},null,8,Bv),[[he,d.value.consecutive]])]),s("div",Gv,[b[56]||(b[56]=s("label",{class:"label",for:"activity_date"},[s("span",{class:"label-text font-medium"},"Fecha de Actividad *")],-1)),se(s("input",{type:"date",id:"activity_date","onUpdate:modelValue":b[4]||(b[4]=C=>d.value.activity_date=C),disabled:p.value,required:"",class:"input input-bordered w-full"},null,8,Wv),[[he,d.value.activity_date]])]),s("div",Kv,[b[57]||(b[57]=s("label",{class:"label",for:"location"},[s("span",{class:"label-text font-medium"},"Ubicacin")],-1)),se(s("input",{type:"text",id:"location","onUpdate:modelValue":b[5]||(b[5]=C=>d.value.location=C),disabled:p.value,placeholder:"Ej: Bloque 31",class:"input input-bordered w-full"},null,8,Yv),[[he,d.value.location]])]),s("div",zv,[b[58]||(b[58]=s("label",{class:"label",for:"issue_date"},[s("span",{class:"label-text font-medium"},"Fecha de Emisin")],-1)),se(s("input",{type:"date",id:"issue_date","onUpdate:modelValue":b[6]||(b[6]=C=>d.value.issue_date=C),disabled:p.value,class:"input input-bordered w-full"},null,8,Qv),[[he,d.value.issue_date]])]),s("div",Jv,[b[59]||(b[59]=s("label",{class:"label",for:"start_time"},[s("span",{class:"label-text font-medium"},"Hora de Inicio")],-1)),se(s("input",{type:"time",id:"start_time","onUpdate:modelValue":b[7]||(b[7]=C=>d.value.start_time=C),disabled:p.value,class:le(["input input-bordered w-full",{"input-error":!L.value.isValid}])},null,10,Xv),[[he,d.value.start_time]])]),s("div",Zv,[b[61]||(b[61]=s("label",{class:"label",for:"end_time"},[s("span",{class:"label-text font-medium"},"Hora de Fin")],-1)),se(s("input",{type:"time",id:"end_time","onUpdate:modelValue":b[8]||(b[8]=C=>d.value.end_time=C),disabled:p.value,class:le(["input input-bordered w-full",{"input-error":!L.value.isValid}])},null,10,ey),[[he,d.value.end_time]]),L.value.isValid?te("",!0):(x(),w("label",ty,[s("span",sy,[b[60]||(b[60]=s("i",{class:"las la-exclamation-circle"},null,-1)),q(" "+_(L.value.message),1)])]))]),s("div",ny,[b[62]||(b[62]=s("label",{class:"label",for:"time_duration"},[s("span",{class:"label-text font-medium"},"Duracin (Minutos)")],-1)),se(s("input",{type:"number",id:"time_duration","onUpdate:modelValue":b[9]||(b[9]=C=>d.value.time_duration=C),step:"0.01",readonly:"",class:"input input-bordered w-full bg-gray-100"},null,512),[[he,d.value.time_duration]])]),s("div",oy,[b[64]||(b[64]=s("label",{class:"label",for:"have_logistic"},[s("span",{class:"label-text font-medium"},"Tiene Logstica? *")],-1)),se(s("select",{id:"have_logistic","onUpdate:modelValue":b[10]||(b[10]=C=>d.value.have_logistic=C),disabled:p.value,required:"",class:"select select-bordered w-full"},[...b[63]||(b[63]=[s("option",{value:"SI"},"S",-1),s("option",{value:"NO"},"NO",-1),s("option",{value:"NA"},"NO APLICA",-1)])],8,ly),[[ft,d.value.have_logistic]])])])]),s("div",ry,[b[70]||(b[70]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Informacin del Transportista",-1)),s("div",ay,[s("div",iy,[b[66]||(b[66]=s("label",{class:"label",for:"driver_name"},[s("span",{class:"label-text font-medium"},"Nombre de Transportista")],-1)),se(s("input",{type:"text",id:"driver_name","onUpdate:modelValue":b[11]||(b[11]=C=>d.value.driver_name=C),disabled:p.value,placeholder:"Nombre completo",class:"input input-bordered w-full"},null,8,cy),[[he,d.value.driver_name]])]),s("div",dy,[b[67]||(b[67]=s("label",{class:"label",for:"dni_driver"},[s("span",{class:"label-text font-medium"},"Cdula de Transportista")],-1)),se(s("input",{type:"text",id:"dni_driver","onUpdate:modelValue":b[12]||(b[12]=C=>d.value.dni_driver=C),disabled:p.value,placeholder:"Nmero de identificacin",maxlength:"15",class:"input input-bordered w-full"},null,8,uy),[[he,d.value.dni_driver]])]),s("div",fy,[b[68]||(b[68]=s("label",{class:"label",for:"driver_position"},[s("span",{class:"label-text font-medium"},"Cargo de Transportista")],-1)),se(s("input",{type:"text",id:"driver_position","onUpdate:modelValue":b[13]||(b[13]=C=>d.value.driver_position=C),disabled:p.value,placeholder:"Ej: Conductor",class:"input input-bordered w-full"},null,8,py),[[he,d.value.driver_position]])]),s("div",hy,[b[69]||(b[69]=s("label",{class:"label",for:"driver_date"},[s("span",{class:"label-text font-medium"},"Fecha de Transportista")],-1)),se(s("input",{type:"date",id:"driver_date","onUpdate:modelValue":b[14]||(b[14]=C=>d.value.driver_date=C),disabled:p.value,class:"input input-bordered w-full"},null,8,by),[[he,d.value.driver_date]])])])]),s("div",my,[b[75]||(b[75]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Informacin de Contacto",-1)),s("div",_y,[s("div",gy,[b[71]||(b[71]=s("label",{class:"label",for:"contact_name"},[s("span",{class:"label-text font-medium"},"Nombre de Contacto")],-1)),se(s("input",{type:"text",id:"contact_name","onUpdate:modelValue":b[15]||(b[15]=C=>d.value.contact_name=C),disabled:p.value,placeholder:"Nombre completo",class:"input input-bordered w-full"},null,8,vy),[[he,d.value.contact_name]])]),s("div",yy,[b[72]||(b[72]=s("label",{class:"label",for:"dni_contact"},[s("span",{class:"label-text font-medium"},"Cdula de Contacto")],-1)),se(s("input",{type:"text",id:"dni_contact","onUpdate:modelValue":b[16]||(b[16]=C=>d.value.dni_contact=C),disabled:p.value,placeholder:"Nmero de identificacin",maxlength:"15",class:"input input-bordered w-full"},null,8,xy),[[he,d.value.dni_contact]])]),s("div",wy,[b[73]||(b[73]=s("label",{class:"label",for:"contact_position"},[s("span",{class:"label-text font-medium"},"Cargo de Contacto")],-1)),se(s("input",{type:"text",id:"contact_position","onUpdate:modelValue":b[17]||(b[17]=C=>d.value.contact_position=C),disabled:p.value,placeholder:"Ej: Maquinista",class:"input input-bordered w-full"},null,8,$y),[[he,d.value.contact_position]])]),s("div",Cy,[b[74]||(b[74]=s("label",{class:"label",for:"date_contact"},[s("span",{class:"label-text font-medium"},"Fecha de Contacto")],-1)),se(s("input",{type:"date",id:"date_contact","onUpdate:modelValue":b[18]||(b[18]=C=>d.value.date_contact=C),disabled:p.value,class:"input input-bordered w-full"},null,8,Ey),[[he,d.value.date_contact]])])])]),s("div",Sy,[s("h6",Ry,[b[76]||(b[76]=q(" Recursos del Proyecto ",-1)),s("span",ky,_(Z.value.length)+" seleccionados",1)]),s("div",Ay,[s("table",Dy,[s("thead",null,[s("tr",Oy,[s("th",Iy,[s("input",{type:"checkbox",class:"checkbox checkbox-sm",disabled:p.value},null,8,Py)]),b[77]||(b[77]=s("th",{class:"border border-gray-300"},"#",-1)),b[78]||(b[78]=s("th",{class:"border border-gray-300"},"Cdigo",-1)),b[79]||(b[79]=s("th",{class:"border border-gray-300"},"Descripcin",-1)),b[80]||(b[80]=s("th",{class:"border border-gray-300 text-right"},"Costo",-1))])]),s("tbody",null,[(x(!0),w(re,null,_e(B.value,(C,R)=>(x(),w("tr",{key:C.id,class:le({"bg-blue-100":C.selected,"cursor-pointer hover:bg-blue-50":!p.value&&(C.type!=="SERVIC"||C.is_active),"opacity-60":p.value,"opacity-50 bg-gray-100":C.type==="SERVIC"&&!C.is_active,"cursor-not-allowed":C.type==="SERVIC"&&!C.is_active}),onClick:W=>!p.value&&S(C.id),title:C.type==="SERVIC"&&!C.is_active?"Recurso inactivo - no se puede seleccionar":""},[s("td",Ny,[s("div",jy,[C.is_active?(x(),w("span",My,[...b[81]||(b[81]=[s("i",{class:"las la-check-circle"},null,-1)])])):(x(),w("span",Fy,[...b[82]||(b[82]=[s("i",{class:"las la-times-circle"},null,-1)])])),s("input",{type:"checkbox",class:"checkbox checkbox-sm checkbox-primary",checked:C.selected,disabled:p.value||C.type==="SERVIC"&&!C.is_active,onClick:Os(W=>!p.value&&S(C.id),["stop"])},null,8,Vy)])]),s("td",Uy,_(R+1),1),s("td",Ly,_(C.resource_item_code),1),s("td",qy,_(C.detailed_description),1),s("td",Hy,"$"+_(C.cost),1)],10,Ty))),128)),B.value.length===0?(x(),w("tr",By,[...b[83]||(b[83]=[s("td",{colspan:"5",class:"text-center text-gray-500 py-8"},[s("i",{class:"las la-inbox text-4xl"}),s("p",null,"No hay recursos disponibles")],-1)])])):te("",!0)])])])]),s("div",Gy,[b[90]||(b[90]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Tipo de Residuos / Aguas",-1)),s("div",Wy,[s("div",Ky,[s("label",Yy,[se(s("input",{type:"checkbox","onUpdate:modelValue":b[19]||(b[19]=C=>d.value.black_water=C),disabled:p.value,class:"checkbox checkbox-primary"},null,8,zy),[[Bt,d.value.black_water]]),b[84]||(b[84]=s("span",{class:"label-text font-medium"},"Aguas Negras",-1))])]),s("div",Qy,[s("label",Jy,[se(s("input",{type:"checkbox","onUpdate:modelValue":b[20]||(b[20]=C=>d.value.grey_water=C),disabled:p.value,class:"checkbox checkbox-primary"},null,8,Xy),[[Bt,d.value.grey_water]]),b[85]||(b[85]=s("span",{class:"label-text font-medium"},"Aguas Grises",-1))])]),s("div",Zy,[s("label",e0,[se(s("input",{type:"checkbox","onUpdate:modelValue":b[21]||(b[21]=C=>d.value.clean_water=C),disabled:p.value,class:"checkbox checkbox-primary"},null,8,t0),[[Bt,d.value.clean_water]]),b[86]||(b[86]=s("span",{class:"label-text font-medium"},"Aguas Limpias",-1))])]),s("div",s0,[s("label",n0,[se(s("input",{type:"checkbox","onUpdate:modelValue":b[22]||(b[22]=C=>d.value.activated_sludge=C),disabled:p.value,class:"checkbox checkbox-primary"},null,8,o0),[[Bt,d.value.activated_sludge]]),b[87]||(b[87]=s("span",{class:"label-text font-medium"},"Lodos Activados",-1))])]),s("div",l0,[s("label",r0,[se(s("input",{type:"checkbox","onUpdate:modelValue":b[23]||(b[23]=C=>d.value.treated_wastewater=C),disabled:p.value,class:"checkbox checkbox-primary"},null,8,a0),[[Bt,d.value.treated_wastewater]]),b[88]||(b[88]=s("span",{class:"label-text font-medium"},"Aguas Residuales Tratadas",-1))])]),s("div",i0,[s("label",c0,[se(s("input",{type:"checkbox","onUpdate:modelValue":b[24]||(b[24]=C=>d.value.organic_grease=C),disabled:p.value,class:"checkbox checkbox-primary"},null,8,d0),[[Bt,d.value.organic_grease]]),b[89]||(b[89]=s("span",{class:"label-text font-medium"},"Grasa Orgnica",-1))])])])]),s("div",u0,[b[94]||(b[94]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},[q(" Totales "),s("span",{class:"text-xs text-gray-500 ml-2"},"(Los valores se convierten automticamente)")],-1)),s("div",f0,[s("div",p0,[b[91]||(b[91]=s("label",{class:"label",for:"total_gallons"},[s("span",{class:"label-text font-medium"},"Total Galones")],-1)),se(s("input",{type:"number",id:"total_gallons","onUpdate:modelValue":b[25]||(b[25]=C=>d.value.total_gallons=C),onInput:Ke,disabled:p.value,min:"0",step:"0.01",class:"input input-bordered w-full",placeholder:"0.00"},null,40,h0),[[he,d.value.total_gallons,void 0,{number:!0}]])]),s("div",b0,[b[92]||(b[92]=s("label",{class:"label",for:"total_barrels"},[s("span",{class:"label-text font-medium"},"Total Barriles")],-1)),se(s("input",{type:"number",id:"total_barrels","onUpdate:modelValue":b[26]||(b[26]=C=>d.value.total_barrels=C),onInput:Ye,disabled:p.value,min:"0",step:"0.01",class:"input input-bordered w-full",placeholder:"0.00"},null,40,m0),[[he,d.value.total_barrels,void 0,{number:!0}]])]),s("div",_0,[b[93]||(b[93]=s("label",{class:"label",for:"total_cubic_meters"},[s("span",{class:"label-text font-medium"},"Total Metros Cbicos")],-1)),se(s("input",{type:"number",id:"total_cubic_meters","onUpdate:modelValue":b[27]||(b[27]=C=>d.value.total_cubic_meters=C),onInput:et,disabled:p.value,min:"0",step:"0.01",class:"input input-bordered w-full",placeholder:"0.00"},null,40,g0),[[he,d.value.total_cubic_meters,void 0,{number:!0}]])])])]),s("div",v0,[b[95]||(b[95]=s("h6",{class:"font-semibold text-lg mb-4 text-gray-700 border-b pb-2"},"Notas",-1)),s("div",y0,[se(s("textarea",{id:"notes","onUpdate:modelValue":b[28]||(b[28]=C=>d.value.notes=C),disabled:p.value,rows:"4",placeholder:"Observaciones o notas adicionales...",class:"textarea textarea-bordered w-full"},null,8,x0),[[he,d.value.notes]])])]),s("div",w0,[s("button",{type:"button",class:"btn btn-outline",onClick:M,disabled:c.value},[b[96]||(b[96]=s("i",{class:"las la-times"},null,-1)),q(" "+_(p.value?"Cerrar":"Cancelar"),1)],8,$0),p.value?te("",!0):(x(),w("button",{key:0,type:"submit",class:"btn btn-primary",disabled:c.value},[c.value?(x(),w("i",S0)):(x(),w("i",E0)),q(" "+_(c.value?"Guardando...":v.value?"Actualizar Cadena de Custodia":"Guardar Cadena de Custodia"),1)],8,C0))])],32),Ee(Ps,{"is-open":h.value,title:`Detalles del Tcnico - ${ce.value?.first_name} ${ce.value?.last_name}`,size:"xl",onClose:b[29]||(b[29]=C=>h.value=!1)},{default:Rt(()=>[ce.value?(x(),At(ta,{key:0,technical:ce.value},null,8,["technical"])):te("",!0)]),_:1},8,["is-open","title"]),Ee(Ps,{"is-open":f.value,title:`Detalles del Vehculo - ${N.value?.no_plate}`,size:"xl",onClose:b[30]||(b[30]=C=>f.value=!1)},{default:Rt(()=>[N.value?(x(),At(sa,{key:0,vehicle:N.value},null,8,["vehicle"])):te("",!0)]),_:1},8,["is-open","title"])]))}},k0={class:"w-[95%] mx-auto p-4"},A0={class:"bg-white rounded-2xl shadow-md border border-blue-300 border-t-[15px] border-t-blue-300 p-6 mb-6"},D0={class:"flex justify-between items-center border-b-blue-500 border-b pb-3 mb-4"},O0={class:"text-xl font-semibold text-blue-500"},I0={class:"flex gap-3"},P0={key:1,class:"text-orange-700 badge bg-orange-100 px-4 py-3"},T0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},N0={class:"bg-blue-50 rounded-lg p-4 border border-blue-200"},j0={class:"font-semibold text-blue-700 mb-3 flex items-center gap-2"},M0={class:"space-y-2 text-sm"},F0={class:"ml-2"},V0={class:"ml-2"},U0={class:"ml-2"},L0={class:"ml-2"},q0={class:"bg-sky-50 rounded-lg p-4 border border-sky-200"},H0={class:"space-y-2 text-sm"},B0={class:"ml-2 font-mono"},G0={class:"ml-2"},W0={class:"ml-2"},K0={class:"bg-white rounded-xl shadow-md border border-gray-200 p-6"},Y0={class:"font-semibold text-lg mb-4 flex items-center gap-2 text-gray-800"},z0={class:"overflow-x-auto"},Q0={class:"table table-zebra w-full"},J0={key:0},X0={class:"p-2 border border-gray-300 text-center"},Z0={class:"p-2 border border-gray-300 font-mono"},e1={class:"p-2 border border-gray-300 text-center"},t1={class:"p-2 border border-gray-300 text-center"},s1={class:"p-2 border border-gray-300 text-center font-mono"},n1={class:"p-2 border border-gray-300 text-center font-mono"},o1={class:"p-2 border border-gray-300 text-center font-semibold"},l1={class:"p-2 border border-gray-300"},r1={class:"p-2 border border-gray-300"},a1={key:0,class:"text-xs"},i1={class:"font-semibold"},c1={key:1,class:"text-gray-400"},d1={class:"p-2 border border-gray-300"},u1={key:0,class:"text-xs"},f1={class:"font-semibold"},p1={class:"text-gray-500"},h1={key:1,class:"text-gray-400"},b1={class:"p-2 border border-gray-300 text-right font-mono"},m1={class:"p-2 border border-gray-300 text-right font-mono"},_1={class:"p-2 border border-gray-300 text-right font-mono"},g1={class:"p-2 border border-gray-300 text-center"},v1={class:"badge badge-info"},y1={class:"p-2 border border-gray-300 text-end"},x1={class:"flex gap-2 justify-end"},w1=["onClick"],$1=["onClick"],C1=["onClick","title","disabled"],E1={key:0},S1={class:"bg-gray-500 font-bold text-white"},R1={class:"p-2 border border-gray-300 text-center"},k1={class:"p-2 border border-gray-300 text-right font-mono"},A1={class:"p-2 border border-gray-300 text-right font-mono"},D1={class:"p-2 border border-gray-300 text-right font-mono"},O1={class:"stats shadow w-full mt-6"},I1={class:"stat"},P1={class:"stat-value text-primary"},T1={class:"stat"},N1={class:"stat-value text-info"},j1={class:"stat"},M1={class:"stat-value text-info"},F1={class:"stat"},V1={class:"stat-value text-info"},U1={class:"stat"},L1={class:"stat-value text-info"},q1={__name:"SheetProjectView",setup(e){const t=Jr(),n=ds(),o=Ve(),l=go(),r=ee(()=>parseInt(t.params.id)),a=ee(()=>o.project),i=ee(()=>l.getSheetProjectById(r.value)),c=ee(()=>l.getCustodyChainsForSheet(r.value)),h=z=>z?new Intl.DateTimeFormat("es-EC",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(z)):"N/A",f=z=>z||"--:--",u=z=>({IN_PROGRESS:{text:"EN EJECUCIN",class:"badge-success"},INVOICED:{text:"FACTURADO",class:"badge-info"},CANCELLED:{text:"CANCELADO",class:"badge-warning"}})[z]||{text:z,class:"badge-ghost"},v=z=>({DRAFT:{text:"BORRADOR",class:"badge-warning"},CLOSE:{text:"CERRADO",class:"badge-success"}})[z]||{text:z,class:"badge-ghost"},d=ee(()=>c.value.reduce((z,S)=>z+parseFloat(S.total_gallons||0),0)),k=ee(()=>c.value.reduce((z,S)=>z+parseFloat(S.total_barrels||0),0)),m=ee(()=>c.value.reduce((z,S)=>z+parseFloat(S.total_cubic_meters||0),0)),p=ee(()=>c.value.reduce((z,S)=>z+parseFloat(S.time_duration||0),0).toFixed(2)),U=()=>{n.push({name:"projects-detail"})},B=z=>{n.push({name:"custody-chain-form",params:{id:z}})},Z=()=>{n.push({name:"custody-chain-form",query:{sheet_id:i.value?.id}})},J=z=>{const S=be.PDFCustodyChainReport.replace("${id}",z);window.open(S,"_blank")};return bt(async()=>{a.value.id||await o.fetchProjectData()}),(z,S)=>(x(),w("div",k0,[s("div",A0,[s("div",D0,[s("h1",O0,[S[0]||(S[0]=s("i",{class:"las la-link text-2xl"},null,-1)),q(" Cadenas de Custodia - Planilla "+_(i.value?.series_code||"N/A"),1)]),s("div",I0,[i.value?.status==="IN_PROGRESS"?(x(),w("button",{key:0,onClick:Z,class:"btn btn-primary btn-sm"},[...S[1]||(S[1]=[s("i",{class:"las la-plus"},null,-1),q(" Nueva Cadena de Custodia ",-1)])])):(x(),w("div",P0,[...S[2]||(S[2]=[s("i",{class:"las la-exclamation-triangle"},null,-1),q(" PLANILLA CERRADA - NO SE PUEDEN AGREGAR CADENAS ",-1)])])),s("button",{onClick:U,class:"btn btn-outline btn-sm"},[...S[3]||(S[3]=[s("i",{class:"las la-arrow-left"},null,-1),q(" Volver ",-1)])])])]),s("div",T0,[s("div",N0,[s("h3",j0,[S[4]||(S[4]=s("i",{class:"las la-building"},null,-1)),q(" Informacin del Proyecto #"+_(a.value?.id||"N/A"),1)]),s("div",M0,[s("div",null,[S[5]||(S[5]=s("span",{class:"font-medium"},"Cliente:",-1)),s("span",F0,_(a.value?.partner_name||"N/A"),1)]),s("div",null,[S[6]||(S[6]=s("span",{class:"font-medium"},"Ubicacin:",-1)),s("span",V0,_(a.value?.location||"N/A")+_(a.value?.cardinal_point?" - "+a.value.cardinal_point:""),1)]),s("div",null,[S[7]||(S[7]=s("span",{class:"font-medium"},"Contacto:",-1)),s("span",U0,_(a.value?.contact_name||"N/A")+" ("+_(a.value?.contact_phone||"N/A")+")",1)]),s("div",null,[S[8]||(S[8]=s("span",{class:"font-medium"},"Fecha Inicio:",-1)),s("span",L0,_(h(a.value?.start_date)),1)])])]),s("div",q0,[S[13]||(S[13]=s("h3",{class:"font-semibold text-sky-700 mb-3 flex items-center gap-2"},[s("i",{class:"las la-file-invoice"}),q(" Informacin de la Planilla ")],-1)),s("div",H0,[s("div",null,[S[9]||(S[9]=s("span",{class:"font-medium"},"Serie:",-1)),s("span",B0,_(i.value?.series_code||"N/A"),1)]),s("div",null,[S[10]||(S[10]=s("span",{class:"font-medium"},"Estado:",-1)),s("span",{class:le(["ml-2 badge",u(i.value?.status).class])},_(u(i.value?.status).text),3)]),s("div",null,[S[11]||(S[11]=s("span",{class:"font-medium"},"Tipo Servicio:",-1)),s("span",G0,_(i.value?.service_type||"N/A"),1)]),s("div",null,[S[12]||(S[12]=s("span",{class:"font-medium"},"Perodo:",-1)),s("span",W0,_(h(i.value?.period_start))+" - "+_(i.value?.period_end?h(i.value.period_end):"En curso"),1)])])])])]),s("div",K0,[s("h2",Y0,[S[14]||(S[14]=s("i",{class:"las la-list text-blue-600"},null,-1)),q(" Listado de Cadenas de Custodia ("+_(c.value.length)+") ",1)]),s("div",z0,[s("table",Q0,[S[22]||(S[22]=s("thead",null,[s("tr",{class:"bg-gray-500 text-white"},[s("th",{class:"p-2 border border-gray-100 text-center"},"#"),s("th",{class:"p-2 border border-gray-100 text-center"},"Consecutivo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Estado"),s("th",{class:"p-2 border border-gray-100 text-center"},"Fecha Actividad"),s("th",{class:"p-2 border border-gray-100 text-center"},"Hora Inicio"),s("th",{class:"p-2 border border-gray-100 text-center"},"Hora Fin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Minutos"),s("th",{class:"p-2 border border-gray-100 text-center"},"Ubicacin"),s("th",{class:"p-2 border border-gray-100 text-center"},"Tcnico"),s("th",{class:"p-2 border border-gray-100 text-center"},"Vehculo"),s("th",{class:"p-2 border border-gray-100 text-center"},"Galones"),s("th",{class:"p-2 border border-gray-100 text-center"},"Barriles"),s("th",{class:"p-2 border border-gray-100 text-center"},"M"),s("th",{class:"p-2 border border-gray-100 text-center"},"Recursos"),s("th",{class:"p-2 border border-gray-100 text-center"},"Acciones")])],-1)),s("tbody",null,[c.value.length===0?(x(),w("tr",J0,[...S[15]||(S[15]=[s("td",{colspan:"15",class:"text-center text-gray-500 py-8"},[s("i",{class:"las la-inbox text-4xl"}),s("p",null,"No hay cadenas de custodia registradas para esta planilla")],-1)])])):(x(!0),w(re,{key:1},_e(c.value,O=>(x(),w("tr",{key:O.id},[s("td",X0,_(O.id),1),s("td",Z0,_(O.consecutive),1),s("td",e1,[s("span",{class:le(["badge",v(O.status).class])},_(v(O.status).text),3)]),s("td",t1,_(h(O.activity_date)),1),s("td",s1,_(f(O.start_time)),1),s("td",n1,_(f(O.end_time)),1),s("td",o1,_(O.time_duration||0),1),s("td",l1,_(O.location||"N/A"),1),s("td",r1,[O.technical?(x(),w("div",a1,[s("div",i1,_(O.technical.first_name)+" "+_(O.technical.last_name),1)])):(x(),w("span",c1,"N/A"))]),s("td",d1,[O.vehicle?(x(),w("div",u1,[s("div",f1,_(O.vehicle.no_plate),1),s("div",p1,_(O.vehicle.brand),1)])):(x(),w("span",h1,"N/A"))]),s("td",b1,_(O.total_gallons||0),1),s("td",m1,_(O.total_barrels||0),1),s("td",_1,_(O.total_cubic_meters||0),1),s("td",g1,[s("span",v1,_(O.details_count||0),1)]),s("td",y1,[s("div",x1,[s("button",{onClick:Q=>B(O.id),class:"btn btn-xs border-blue-500 text-teal-500 bg-white",title:"Ver detalle"},[...S[16]||(S[16]=[s("i",{class:"las la-eye"},null,-1),q(" VER ",-1)])],8,w1),s("button",{onClick:Q=>J(O.id),class:"btn btn-xs border-red-500 text-red-500 bg-white",title:"Generar PDF"},[...S[17]||(S[17]=[s("i",{class:"las la-file-pdf"},null,-1),q(" PDF ",-1)])],8,$1),s("button",{onClick:Q=>O.status==="DRAFT"?ye(n).push({name:"custody-chain-form",params:{id:O.id}}):null,class:le(["btn btn-xs border-orange-500 text-orange-500 bg-white",{"btn-disabled opacity-50 cursor-not-allowed":O.status!=="DRAFT"}]),title:O.status==="DRAFT"?"Editar cadena":"No se puede editar una cadena cerrada",disabled:O.status!=="DRAFT"},[...S[18]||(S[18]=[s("i",{class:"las la-edit"},null,-1),q(" EDITAR ",-1)])],10,C1)])])]))),128))]),c.value.length>0?(x(),w("tfoot",E1,[s("tr",S1,[S[19]||(S[19]=s("td",{colspan:"6",class:"p-2 border border-gray-300 text-right"},"TOTALES:",-1)),s("td",R1,_(p.value)+" Mins",1),S[20]||(S[20]=s("td",{colspan:"3",class:"p-2 border border-gray-300"},null,-1)),s("td",k1,_(d.value.toFixed(2)),1),s("td",A1,_(k.value.toFixed(2)),1),s("td",D1,_(m.value.toFixed(2)),1),S[21]||(S[21]=s("td",{colspan:"2",class:"p-2 border border-gray-300"},null,-1))])])):te("",!0)])])]),s("div",O1,[s("div",I1,[S[23]||(S[23]=s("div",{class:"stat-title"},"Total Cadenas",-1)),s("div",P1,_(c.value.length),1),S[24]||(S[24]=s("div",{class:"stat-desc"},"Registradas",-1))]),s("div",T1,[S[25]||(S[25]=s("div",{class:"stat-title"},"Horas Totales",-1)),s("div",N1,_(p.value),1),S[26]||(S[26]=s("div",{class:"stat-desc"},"Horas trabajadas",-1))]),s("div",j1,[S[27]||(S[27]=s("div",{class:"stat-title"},"Total Galones",-1)),s("div",M1,_(d.value.toFixed(2)),1),S[28]||(S[28]=s("div",{class:"stat-desc"},"Acumulados",-1))]),s("div",F1,[S[29]||(S[29]=s("div",{class:"stat-title"},"Total Barriles",-1)),s("div",V1,_(k.value.toFixed(2)),1),S[30]||(S[30]=s("div",{class:"stat-desc"},"Acumulados",-1))]),s("div",U1,[S[31]||(S[31]=s("div",{class:"stat-title"},"Total M",-1)),s("div",L1,_(m.value.toFixed(2)),1),S[32]||(S[32]=s("div",{class:"stat-desc"},"Acumulados",-1))])])]))}},H1={class:"w-[90%] mx-auto p-4"},B1={class:"mb-4"},G1={class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},W1={class:"card-body space-y-6"},K1={key:0,class:"alert alert-error shadow-lg"},Y1={key:1,class:"alert alert-success shadow-lg"},z1={class:"bg-blue-50 p-4 rounded-lg border border-blue-200"},Q1={class:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm"},J1={class:"bg-white p-2 rounded"},X1={class:"font-semibold"},Z1={class:"bg-white p-2 rounded"},ex={class:"font-semibold"},tx={class:"bg-white p-2 rounded"},sx={class:"font-semibold"},nx={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ox={class:"form-control w-full"},lx={class:"form-control w-full"},rx={class:"form-control w-full"},ax={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ix={class:"form-control w-full"},cx=["value"],dx={class:"form-control w-full"},ux=["value"],fx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},px={class:"form-control w-full"},hx={class:"form-control w-full"},bx={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},mx={class:"form-control w-full"},_x={class:"form-control w-full"},gx={class:"form-control w-full"},vx={class:"overflow-x-auto"},yx={class:"table table-zebra w-full table-sm"},xx={key:0},wx={class:"border text-center"},$x={class:"border"},Cx={class:"border"},Ex={class:"border text-center"},Sx={class:"border text-right"},Rx={class:"border text-center"},kx={class:"border text-center"},Ax={key:0},Dx={class:"bg-gray-200 font-semibold"},Ox={class:"border text-right"},Ix={colspan:"2",class:"border text-center"},Px={class:"flex flex-col-reverse sm:flex-row gap-3 sm:justify-end"},Tx=["disabled"],Nx={key:0,class:"loading loading-spinner loading-sm"},jx={key:1,class:"las la-save text-lg"},Mx={__name:"SheetProjectForm",setup(e){const t=ds(),n=go(),o=Ve(),l=Qt(),r=pe(!1),a=ee(()=>o.project),i=ee(()=>l.resourcesProject||[]),c=pe({period_start:"",period_end:"",issue_date:new Date().toISOString().split("T")[0],service_type:"ALQUILER Y MANTENIMIENTO",status:"IN_PROGRESS",contact_reference:"",contact_phone_reference:"",client_po_reference:"",final_disposition_reference:"",invoice_reference:""}),h=pe(""),f=pe(""),u=[{value:"ALQUILER",label:"Alquiler"},{value:"MANTENIMIENTO",label:"Mantenimiento"},{value:"ALQUILER Y MANTENIMIENTO",label:"Alquiler y Mantenimiento"}],v=[{value:"IN_PROGRESS",label:"En Progreso"},{value:"INVOICED",label:"Facturado"},{value:"CANCELLED",label:"Cancelado"}];bt(async()=>{await o.fetchProjectData(),await l.fetchResourcesProject(),n.initializeNewSheetProject(a.value),c.value.contact_reference=a.value.contact_name||"",c.value.contact_phone_reference=a.value.contact_phone||""});const d=async()=>{h.value="",f.value="",r.value=!0;try{if(!c.value.period_start)throw new Error("La fecha de inicio del perodo es requerida");if(!c.value.service_type)throw new Error("El tipo de servicio es requerido");const k={project:a.value.id,period_start:c.value.period_start,period_end:c.value.period_end||null,issue_date:c.value.issue_date||null,service_type:c.value.service_type,status:c.value.status,contact_reference:c.value.contact_reference||null,contact_phone_reference:c.value.contact_phone_reference||null,client_po_reference:c.value.client_po_reference||null,final_disposition_reference:c.value.final_disposition_reference||null,invoice_reference:c.value.invoice_reference||null},m=await n.addSheetProject(k);f.value="Planilla creada exitosamente",setTimeout(()=>{t.push({name:"projects-detail"})},1500)}catch(k){console.error("Error al crear planilla:",k),h.value=k.message||"Error al crear la planilla"}finally{r.value=!1}};return(k,m)=>(x(),w("div",H1,[s("div",B1,[s("h1",G1,[m[10]||(m[10]=s("i",{class:"las la-file-invoice text-blue-600"},null,-1)),q(" Nueva Planilla del Proyecto #"+_(a.value?.id),1)]),m[11]||(m[11]=s("p",{class:"text-gray-600 text-sm mt-1"},"Complete todos los campos requeridos para crear una nueva planilla de servicio",-1))]),s("form",{onSubmit:Os(d,["prevent"]),class:"card bg-base-100 shadow-xl border border-gray-200 rounded-lg"},[s("div",W1,[h.value?(x(),w("div",K1,[s("div",null,[m[12]||(m[12]=s("i",{class:"las la-exclamation-circle text-2xl"},null,-1)),s("span",null,_(h.value),1)])])):te("",!0),f.value?(x(),w("div",Y1,[s("div",null,[m[13]||(m[13]=s("i",{class:"las la-check-circle text-2xl"},null,-1)),s("span",null,_(f.value),1)])])):te("",!0),s("div",z1,[m[17]||(m[17]=s("h3",{class:"font-semibold text-blue-700 mb-3 flex items-center gap-2"},[s("i",{class:"las la-building"}),q(" Informacin del Proyecto ")],-1)),s("div",Q1,[s("div",J1,[m[14]||(m[14]=s("span",{class:"text-gray-600 text-xs"},"Cliente:",-1)),s("p",X1,_(a.value?.partner_name||"N/A"),1)]),s("div",Z1,[m[15]||(m[15]=s("span",{class:"text-gray-600 text-xs"},"Ubicacin:",-1)),s("p",ex,_(a.value?.location||"N/A"),1)]),s("div",tx,[m[16]||(m[16]=s("span",{class:"text-gray-600 text-xs"},"Fecha Inicio:",-1)),s("p",sx,_(a.value?.start_date||"N/A"),1)])])]),m[42]||(m[42]=s("div",{class:"divider"},"Datos Principales",-1)),s("div",nx,[s("div",ox,[m[18]||(m[18]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Fecha de Emisin")],-1)),se(s("input",{"onUpdate:modelValue":m[0]||(m[0]=p=>c.value.issue_date=p),type:"date",class:"input input-bordered w-full"},null,512),[[he,c.value.issue_date]]),m[19]||(m[19]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Fecha de emisin de la planilla")],-1))]),s("div",lx,[m[20]||(m[20]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Fecha Inicio Perodo *")],-1)),se(s("input",{"onUpdate:modelValue":m[1]||(m[1]=p=>c.value.period_start=p),type:"date",class:le(["input input-bordered w-full",{"input-error":!c.value.period_start}]),required:""},null,2),[[he,c.value.period_start]]),m[21]||(m[21]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Inicio del perodo a facturar")],-1))]),s("div",rx,[m[22]||(m[22]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Fecha Fin Perodo")],-1)),se(s("input",{"onUpdate:modelValue":m[2]||(m[2]=p=>c.value.period_end=p),type:"date",class:"input input-bordered w-full"},null,512),[[he,c.value.period_end]]),m[23]||(m[23]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Fin del perodo (opcional al crear)")],-1))])]),s("div",ax,[s("div",ix,[m[24]||(m[24]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Tipo de Servicio *")],-1)),se(s("select",{"onUpdate:modelValue":m[3]||(m[3]=p=>c.value.service_type=p),class:"select select-bordered w-full",required:""},[(x(),w(re,null,_e(u,p=>s("option",{key:p.value,value:p.value},_(p.label),9,cx)),64))],512),[[ft,c.value.service_type]]),m[25]||(m[25]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Tipo de servicio a facturar")],-1))]),s("div",dx,[m[26]||(m[26]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Estado")],-1)),se(s("select",{"onUpdate:modelValue":m[4]||(m[4]=p=>c.value.status=p),class:"select select-bordered w-full"},[(x(),w(re,null,_e(v,p=>s("option",{key:p.value,value:p.value},_(p.label),9,ux)),64))],512),[[ft,c.value.status]]),m[27]||(m[27]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Estado actual de la planilla")],-1))])]),m[43]||(m[43]=s("div",{class:"divider"},"Informacin de Contacto",-1)),s("div",fx,[s("div",px,[m[28]||(m[28]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Nombre de Contacto")],-1)),se(s("input",{"onUpdate:modelValue":m[5]||(m[5]=p=>c.value.contact_reference=p),type:"text",class:"input input-bordered w-full",placeholder:"Ej: Juan Prez"},null,512),[[he,c.value.contact_reference]]),m[29]||(m[29]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Persona de contacto en el proyecto")],-1))]),s("div",hx,[m[30]||(m[30]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Telfono de Contacto")],-1)),se(s("input",{"onUpdate:modelValue":m[6]||(m[6]=p=>c.value.contact_phone_reference=p),type:"text",class:"input input-bordered w-full",placeholder:"Ej: +593999999999"},null,512),[[he,c.value.contact_phone_reference]]),m[31]||(m[31]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Telfono del contacto")],-1))])]),m[44]||(m[44]=s("div",{class:"divider"},"Referencias Adicionales",-1)),s("div",bx,[s("div",mx,[m[32]||(m[32]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"PO Cliente")],-1)),se(s("input",{"onUpdate:modelValue":m[7]||(m[7]=p=>c.value.client_po_reference=p),type:"text",class:"input input-bordered w-full",placeholder:"Ej: PO-2026-001"},null,512),[[he,c.value.client_po_reference]]),m[33]||(m[33]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Nmero de orden de compra del cliente")],-1))]),s("div",_x,[m[34]||(m[34]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Disposicin Final")],-1)),se(s("input",{"onUpdate:modelValue":m[8]||(m[8]=p=>c.value.final_disposition_reference=p),type:"text",class:"input input-bordered w-full",placeholder:"Ej: Planta de Tratamiento"},null,512),[[he,c.value.final_disposition_reference]]),m[35]||(m[35]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Lugar de disposicin final")],-1))]),s("div",gx,[m[36]||(m[36]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Referencia Factura")],-1)),se(s("input",{"onUpdate:modelValue":m[9]||(m[9]=p=>c.value.invoice_reference=p),type:"text",class:"input input-bordered w-full",placeholder:"Ej: FAC-2026-001"},null,512),[[he,c.value.invoice_reference]]),m[37]||(m[37]=s("label",{class:"label"},[s("span",{class:"label-text-alt text-gray-500"},"Nmero de factura asociada")],-1))])]),m[45]||(m[45]=Rr('<div class="alert alert-info"><i class="las la-info-circle text-xl"></i><div><h3 class="font-bold">Informacin</h3><p class="text-sm">Los campos marcados con (*) son obligatorios. El cdigo de serie se generar automticamente al crear la planilla.</p></div></div><div class="divider">Recursos Asignados al Proyecto</div>',2)),s("div",vx,[s("table",yx,[m[40]||(m[40]=s("thead",null,[s("tr",{class:"bg-lime-800 text-white text-center text-xs"},[s("th",{class:"border"},"#"),s("th",{class:"border"},"Cdigo"),s("th",{class:"border"},"Nombre"),s("th",{class:"border"},"Tipo"),s("th",{class:"border"},"Costo"),s("th",{class:"border"},"Fecha Inicio"),s("th",{class:"border"},"Estado")])],-1)),s("tbody",null,[i.value.length===0?(x(),w("tr",xx,[...m[38]||(m[38]=[s("td",{colspan:"7",class:"text-center py-4 text-gray-500"}," No hay recursos asignados al proyecto ",-1)])])):te("",!0),(x(!0),w(re,null,_e(i.value,(p,U)=>(x(),w("tr",{key:p.id},[s("td",wx,_(U+1),1),s("td",$x,_(p.resource_item_code||"N/A"),1),s("td",Cx,_(p.resource_item_name||"N/A"),1),s("td",Ex,[s("span",{class:le(["badge badge-sm",p.type_resource==="EQUIPO"?"badge-primary":"badge-info"])},_(p.type_resource),3)]),s("td",Sx,_(p.cost?`$${parseFloat(p.cost).toFixed(2)}`:"$0.00"),1),s("td",Rx,_(p.operation_start_date?new Date(p.operation_start_date).toLocaleDateString("es-EC"):"N/A"),1),s("td",kx,[s("span",{class:le(["badge badge-sm",p.is_active?"badge-success":"badge-error"])},_(p.is_active?"Activo":"Inactivo"),3)])]))),128))]),i.value.length>0?(x(),w("tfoot",Ax,[s("tr",Dx,[m[39]||(m[39]=s("td",{colspan:"4",class:"border text-right"},"Total de recursos:",-1)),s("td",Ox," $"+_(i.value.reduce((p,U)=>p+parseFloat(U.cost||0),0).toFixed(2)),1),s("td",Ix,_(i.value.length)+" recursos",1)])])):te("",!0)])]),m[46]||(m[46]=s("div",{class:"divider"},null,-1)),s("div",Px,[Ee(ye(gn),{to:"/project",class:le(["btn btn-ghost",{"btn-disabled":r.value}])},{default:Rt(()=>[...m[41]||(m[41]=[s("i",{class:"las la-times text-lg"},null,-1),q(" Cancelar ",-1)])]),_:1},8,["class"]),s("button",{type:"submit",class:"btn btn-primary",disabled:r.value},[r.value?(x(),w("span",Nx)):(x(),w("i",jx)),q(" "+_(r.value?"Creando...":"Crear Planilla"),1)],8,Tx)])])],32)]))}},Fx=Ud({history:yd("/"),routes:[{path:"/",redirect:"/project"},{path:"/project",name:"projects-detail",component:Ch},{path:"/resource/form",name:"resource-form",component:Cb},{path:"/custody-chain",name:"custody-chain",component:Lg},{path:"/custody-chain/form/:id?",name:"custody-chain-form",component:R0},{path:"/work-sheet/:id/",name:"sheet-project-view",component:q1},{path:"/work-sheet/form",name:"sheet-project-form",component:Mx}]}),yo=Sc(Ld);yo.use(Ac());yo.use(Fx);yo.mount("#vue-app");

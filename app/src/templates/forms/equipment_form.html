{% extends 'base/base.html' %}
{% load static %}
{% block style%}
<link rel="stylesheet" href="{% static 'css/app/resource_item.css' %}">
{% endblock %}
{% block content %}
<div id="resourceItemApp" class="max-w-6xl mx-auto p-6 bg-white rounded-2xl shadow-md border border-gray-300 border-t-[15px] border-t-blue-500">
  <!-- Asistente paso a paso -->
  {% verbatim %}
  <div class="wizard-container mb-6" v-if="currentStep < 3">
    <!-- Barra de progreso -->
    <div class="flex items-center justify-between mb-8">
      <template v-for="(title, index) in stepTitles" :key="index">
        <div class="flex flex-col items-center">
          <div class="w-8 h-8 rounded-full flex items-center justify-center" 
              :class="{
                'bg-blue-500 text-white': index + 1 === currentStep,
                'bg-blue-200 text-gray-700': index + 1 < currentStep,
                'bg-gray-200 text-gray-500': index + 1 > currentStep
              }">
            {{ index + 1 }}
          </div>
          <span class="text-sm mt-1" 
                :class="{
                  'text-blue-500 font-medium': index + 1 === currentStep,
                  'text-gray-500': index + 1 !== currentStep
                }">
            {{ title }}
          </span>
        </div>
        <div v-if="index < stepTitles.length - 1" class="w-full h-1 bg-gray-200 flex-1 mx-2">
          <div class="h-full bg-blue-500" :style="{ width: index + 1 < currentStep ? '100%' : '0%' }"></div>
        </div>
      </template>
    </div>
    
    <!-- Paso 1: Selección de tipo -->
    <div v-if="currentStep === 1" class="wizard-step">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Seleccione el tipo de registro</h2>
      <p class="text-gray-600 mb-6">¿Desea registrar un equipo físico o un servicio?</p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <!-- Tarjeta de Equipo -->
        <div class="card bg-gray-100 shadow-md hover:shadow-lg transition-all cursor-pointer hover:bg-blue-200 hover:border-blue-300 border-s-blue-200 border-s-5"
             @click="selectType('EQUIPO')">
          <div class="card-body">
            <div class="flex items-start justify-between">
              <div>
                <h3 class="card-title text-lg font-bold text-blue-800">Equipo</h3>
                <p class="text-gray-600 mt-2">Seleccione esta opción para registrar un equipo físico como lavamanos, baterías sanitarias, plantas de tratamiento, etc.</p>
              </div>
              <div class="rounded-full bg-blue-100 p-3" v-if="formData.type === 'EQUIPO'">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Tarjeta de Servicio -->
        <div class="card bg-gray-100 shadow-md hover:shadow-lg transition-all cursor-pointer hover:bg-amber-200 hover:border-amber-300 border-s-amber-300 border-s-5"
             @click="selectType('SERVICIO')">
          <div class="card-body">
            <div class="flex items-start justify-between">
              <div>
                <h3 class="card-title text-lg font-bold text-blue-800">Servicio</h3>
                <p class="text-gray-600 mt-2">Seleccione esta opción para registrar un servicio ofrecido como instalación, mantenimiento, transporte, etc.</p>
              </div>
              <div class="rounded-full bg-blue-100 p-3" v-if="formData.type === 'SERVICIO'">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="flex justify-between mt-6">
        <a href="{% url 'resource_list' %}" class="btn btn-outline">Cancelar</a>
        <button class="btn btn-primary" @click.prevent="nextStep()" :disabled="!formData.type">Siguiente</button>
      </div>
    </div>
    
    <!-- Paso 2: Selección de subtipo (para equipos) -->
    <div v-if="currentStep === 2" class="wizard-step">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Seleccione el subtipo de equipo</h2>
      
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-4 mb-8">
        <div v-for="subtype in equipmentSubtypes" :key="subtype.value" 
             class="card bg-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer h-30 w-full border-s-5 border-s-blue-300 hover:bg-blue-200"
             :class="{
               'ring-2 ring-blue-400 border-blue-300 bg-blue-50': formData.subtype === subtype.value,
               'hover:border-blue-300 hover:bg-blue-50/30': formData.subtype !== subtype.value
             }"
             @click="selectSubtype(subtype.value)">
          <div class="card-body p-3 flex flex-col items-center justify-center text-center h-full">
            <!-- Icono único para todos los tipos -->
            <div class="mb-2 text-blue-600 transform transition-transform duration-300 hover:scale-110" :class="{'text-blue-800': formData.subtype === subtype.value}">
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-cake">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M20.84 12c0 2.05 .985 3.225 -.04 5c-1.026 1.775 -2.537 1.51 -4.314 2.534c-1.776 1.026 -2.302 2.466 -4.353 2.466c-2.051 0 -2.576 -1.441 -4.353 -2.466c-1.776 -1.024 -3.288 -.759 -4.314 -2.534c-1.025 -1.775 -.04 -2.95 -.04 -5s-.985 -3.225 .04 -5c1.026 -1.775 2.537 -1.51 4.314 -2.534c1.776 -1.026 2.302 -2.466 4.353 -2.466s2.577 1.441 4.353 2.466c1.776 1.024 3.288 .759 4.313 2.534c1.026 1.775 .04 2.95 .04 5z" />
              </svg>
            </div>
            
            <!-- Título del subtipo -->
            <h3 class="text-sm font-medium" :class="{'text-blue-700': formData.subtype === subtype.value, 'text-gray-700': formData.subtype !== subtype.value}">{{ subtype.label }}</h3>
            
            <!-- Indicador de selección (simplificado) -->
            <div class="mt-1" v-if="formData.subtype === subtype.value">
              <span class="inline-flex items-center justify-center text-blue-700 text-xs">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="flex justify-between mt-6">
        <button class="btn btn-outline" @click.prevent="prevStep()">Anterior</button>
        <button class="btn btn-primary" @click.prevent="nextStep()" :disabled="!formData.subtype">Siguiente</button>
      </div>
    </div>
  </div>
  
  <!-- Paso 3: Formulario completo -->
  <div v-if="currentStep === 3" class="wizard-step">
    <!-- Vista previa del tipo seleccionado -->
    <div class="mb-6 p-4 bg-gray-100 border border-blue-200 rounded-lg">
      <div class="flex justify-between items-center">
        <div>
          <span class="font-semibold">Tipo seleccionado:</span> {{ formData.type === 'EQUIPO' ? 'Equipo' : 'Servicio' }}
          <span v-if="formData.type === 'EQUIPO'">
            - <span class="font-semibold">Subtipo:</span> {{ formData.subtype }}
          </span>
        </div>
        <button class="btn btn-sm btn-outline" @click.prevent="currentStep = 1">Cambiar</button>
      </div>
      
      <!-- Formulario Vue para Servicio -->
      <div v-if="formData.type === 'SERVICIO'" class="mt-6 p-4 bg-white border rounded-lg shadow-sm border-gray-200">
        <h3 class="text-lg font-medium text-blue-600 mb-4">Datos del Servicio</h3>
        
        <!-- Mensaje de éxito -->
        <div v-if="successMessage" class="alert alert-success mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          <span>{{ successMessage }}</span>
        </div>
        
        <!-- Nombre del Servicio -->
        <div class="form-control mb-4" data-field="name">
          <label class="label">
            <span class="label-text font-medium">Nombre del Servicio:</span>
          </label>
          <input type="text" v-model="formData.name" class="input input-bordered w-full" placeholder="Ingrese el nombre del servicio">
          <div v-if="errors.name" class="text-error text-sm mt-1">{{ errors.name }}</div>
        </div>
        
        <!-- Nota: Estado siempre es DISPONIBLE por defecto -->
        <!-- Este comentario es solo para referencia -->
        
        <!-- Precio Base e Is Active (en una fila) -->
        <div class="flex flex-col md:flex-row gap-4 mb-4 items-end">
          <!-- Precio Base -->
          <div class="form-control flex-1" data-field="base_price">
            <label class="label">
              <span class="label-text font-medium">Precio Base:</span>
            </label>
            <div class="relative">
              <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">$</span>
              <input type="number" v-model="formData.base_price" class="input input-bordered w-full pl-6" placeholder="0.00" step="0.01" min="0">
            </div>
            <div v-if="errors.base_price" class="text-error text-sm mt-1">{{ errors.base_price }}</div>
          </div>

          <!-- Is Active Checkbox -->
          <div class="form-control pb-2" data-field="is_active">
            <label class="flex items-center cursor-pointer gap-3">
              <input type="checkbox" v-model="formData.is_active" class="checkbox checkbox-primary">
              <span class="label-text font-medium">Activo</span>
            </label>
            <p class="text-xs text-gray-500 mt-1">Indica si este servicio está actualmente disponible</p>
          </div>
        </div>
        
        <!-- Notas - ocupando todo el ancho -->
        <div class="form-control mb-4 w-full" data-field="notes">
          <label class="label">
            <span class="label-text font-medium">Notas:</span>
          </label>
          <textarea v-model="formData.notes" class="textarea textarea-bordered w-full" rows="4" placeholder="Ingrese notas adicionales"></textarea>
          <div v-if="errors.notes" class="text-error text-sm mt-1">{{ errors.notes }}</div>
        </div>
        
        <!-- Botones de acción -->
        <div class="flex justify-end space-x-2 mt-6">
          <button type="button" class="btn btn-outline" @click="cancelForm">Cancelar</button>
          <button type="button" class="btn btn-primary" @click="saveService">Guardar Servicio</button>
        </div>
      </div>
      
      <!-- Formulario Django para Equipo -->
      <form v-if="formData.type === 'EQUIPO'" action="" method="post" class="form-django mt-6">
  {% endverbatim %}
      <div class="hidden">
        {% if request.resolver_match.url_name != 'resource_create' %}    
        <a href="{% url 'resource_detail' request.resolver_match.kwargs.pk %}?action=delete" class="btn btn-sm btn-outline btn-error">
          <svg xmlns="http://www.w3.org/2000/svg" class="inline-block mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
          </svg>
          Eliminar
        </a>
        <a href="{% url 'resource_detail' equipment.id %}" class="btn btn-sm btn-outline btn-info border-black">
          <svg xmlns="http://www.w3.org/2000/svg" class="inline-block mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /><path d="M5 12l6 6" /><path d="M5 12l6 -6" />
          </svg>
          Volver a Ficha
        </a>
        {% endif %}
        <a href="{% url 'resource_list' %}" class="btn btn-sm btn-outline border-black">
          <svg xmlns="http://www.w3.org/2000/svg" class="inline-block mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M5.7 5.7l12.6 12.6" />
          </svg>
          Cancelar
        </a>
      </div>
    {% csrf_token %}
    
    <!-- Mostrar errores generales del formulario -->
    {% if form.errors %}
      <div class="alert alert-error mb-4">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current flex-shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          <span>Por favor, corrige los errores en el formulario.</span>
        </div>
      </div>
    {% endif %}
    
    <!-- Tabs para organizar el formulario -->
    <div class="tabs tabs-box w-full mb-4">
      <input type="radio" name="form_tabs" class="tab" aria-label="Información General" checked />
      <div class="tab-content bg-base-100 border-base-300 p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Datos Principales -->
          <div class="space-y-4 border-l-blue-300 border-l-[1px] pl-5">
            <h3 class="text-lg font-medium text-blue-600 mb-4">Datos Principales</h3>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Tipo:</span>
              </label>
              {{ form.type }}
              {% if form.type.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.type.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control" id="subtipo_div">
              <label class="label">
                <span class="label-text">Subtipo de Equipo:</span>
              </label>
              {{ form.subtipo }}
              {% if form.subtipo.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.subtipo.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control">
              <label class="label">
                <span class="label-text">Código:</span>
              </label>
              {{ form.code }}
              {% if form.code.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.code.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control">
              <label class="label">
                <span class="label-text">Nombre:</span>
              </label>
              {{ form.name }}
              {% if form.name.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.name.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control">
              <label class="label">
                <span class="label-text">Estado Físico:</span>
              </label>
              {{ form.status }}
              {% if form.status.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.status.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <!-- Motivo de reparación (aparece cuando status es EN REPARACION) -->
            <div class="form-control" id="motivo_reparacion_div" style="display: none;">
              <label class="label">
                <span class="label-text">Motivo de Reparación:</span>
              </label>
              {{ form.motivo_reparacion }}
              {% if form.motivo_reparacion.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.motivo_reparacion.errors.0 }}</span>
                </div>
              {% endif %}
            </div>
          </div>

          <!-- Datos del Equipo -->
          <div class="space-y-4 border-l-blue-300 border-l-[1px] pl-5">
            <h3 class="text-lg font-medium text-blue-600 mb-4">Datos del Equipo</h3>
            
            <div class="form-control" id="brand_div">
              <label class="label">
                <span class="label-text">Marca:</span>
              </label>
              {{ form.brand }}
              {% if form.brand.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.brand.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control" id="model_div">
              <label class="label">
                <span class="label-text">Modelo:</span>
              </label>
              {{ form.model }}
              {% if form.model.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.model.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control" id="date_purchase_div">
              <label class="label">
                <span class="label-text">Fecha de Compra:</span>
              </label>
              {{ form.date_purchase }}
              {% if form.date_purchase.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.date_purchase.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <!-- Capacidades -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="capacidad_div">
              <div class="form-control">
                <label class="label">
                  <span class="label-text">Capacidad:</span>
                </label>
                {{ form.capacidad }}
                {% if form.capacidad.errors %}
                  <div class="label">
                    <span class="label-text-alt text-error">{{ form.capacidad.errors.0 }}</span>
                  </div>
                {% endif %}
              </div>
              
              <div class="form-control">
                <label class="label">
                  <span class="label-text">Unidad:</span>
                </label>
                {{ form.unidad_capacidad }}
                {% if form.unidad_capacidad.errors %}
                  <div class="label">
                    <span class="label-text-alt text-error">{{ form.unidad_capacidad.errors.0 }}</span>
                  </div>
                {% endif %}
              </div>
            </div>

            <div class="form-control" id="capacidad_planta_div" style="display: none;">
              <label class="label">
                <span class="label-text">Capacidad de Planta:</span>
              </label>
              {{ form.capacidad_planta }}
              {% if form.capacidad_planta.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.capacidad_planta.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <!-- Estado del Equipo -->
            <div class="mt-4">
              <div class="form-control">
                <label class="label cursor-pointer">
                  <span class="label-text">Activo:</span>
                  {{ form.is_active }}
                </label>
                {% if form.is_active.errors %}
                  <div class="label">
                    <span class="label-text-alt text-error">{{ form.is_active.errors.0 }}</span>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <!-- Dimensiones y Peso -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200" id="dimensions_section">
          <h3 class="text-lg font-medium text-blue-600 mb-4">Dimensiones y Peso</h3>
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="form-control" id="height_div">
              <label class="label">
                <span class="label-text">Altura (cm):</span>
              </label>
              {{ form.height }}
              {% if form.height.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.height.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control" id="width_div">
              <label class="label">
                <span class="label-text">Ancho (cm):</span>
              </label>
              {{ form.width }}
              {% if form.width.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.width.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control" id="depth_div">
              <label class="label">
                <span class="label-text">Profundidad (cm):</span>
              </label>
              {{ form.depth }}
              {% if form.depth.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.depth.errors.0 }}</span>
                </div>
              {% endif %}
            </div>

            <div class="form-control" id="weight_div">
              <label class="label">
                <span class="label-text">Peso (kg):</span>
              </label>
              {{ form.weight }}
              {% if form.weight.errors %}
                <div class="label">
                  <span class="label-text-alt text-error">{{ form.weight.errors.0 }}</span>
                </div>
              {% endif %}
            </div>
          </div>
        </div>

        <!-- Características Específicas por Subtipo -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200" id="caracteristicas_section" style="display: none;">
          <h3 class="text-lg font-medium text-blue-600 mb-4">Características Específicas</h3>
          
          <!-- Características para Lavamanos -->
          <div id="lavamanos_caracteristicas" class="caracteristicas-group" style="display: none;">
            <h4 class="font-medium text-gray-700 mb-4">Características de Lavamanos</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.bombas_pie }}
                  <span class="label-text">Bombas de Pie</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.dispensador_jabon_lavamanos }}
                  <span class="label-text">Dispensador de Jabón</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Características para Baterías Sanitarias -->
          <div id="bateria_caracteristicas" class="caracteristicas-group" style="display: none;">
            <h4 class="font-medium text-gray-700 mb-4">Características de Batería Sanitaria</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.dispensador_papel }}
                  <span class="label-text">Dispensador de Papel</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.dispensador_jabon }}
                  <span class="label-text">Dispensador de Jabón</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.dispensador_servilletas }}
                  <span class="label-text">Dispensador de Servilletas</span>
                </label>
              </div>
              <div class="form-control" id="urinales_field">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.urinales }}
                  <span class="label-text">Urinales</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.asientos }}
                  <span class="label-text">Asientos</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.bomba_bano }}
                  <span class="label-text">Bomba Baño</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.bomba_lavamanos }}
                  <span class="label-text">Bomba Lavamanos</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.tapa_inodoro }}
                  <span class="label-text">Tapa de Inodoro</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.bases_banos }}
                  <span class="label-text">Bases Baños</span>
                </label>
              </div>
              <div class="form-control">
                <label class="label cursor-pointer justify-start gap-3">
                  {{ form.tubo_ventilacion }}
                  <span class="label-text">Tubo de Ventilación</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Notas -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
          <h3 class="text-lg font-medium text-blue-600 mb-4">Notas y Observaciones</h3>
          
          <div class="form-control">
            <label class="label">
              <span class="label-text">Notas:</span>
            </label>
            {{ form.notes }}
            {% if form.notes.errors %}
              <div class="label">
                <span class="label-text-alt text-error">{{ form.notes.errors.0 }}</span>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="flex flex-wrap justify-center gap-2 mt-6 border-t pt-4">
      <button type="submit" class="btn btn-primary">
        <svg xmlns="http://www.w3.org/2000/svg" class="inline-block mr-1" width="12" height="12" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
          <path d="M5 12l5 5l10 -10" />
        </svg>
        Guardar Equipo
      </button>
      
      {% if request.resolver_match.url_name != 'resource_create' %}
        <a href="{% url 'resource_detail' equipment.id %}" class="btn btn-outline">
          <svg xmlns="http://www.w3.org/2000/svg" class="inline-block mr-1" width="12" height="12" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M9 6l-6 6l6 6" />
          </svg>
          Ver Detalle
        </a>
      {% endif %}
      
      <a href="{% url 'resource_list' %}" class="btn btn-outline">
        <svg xmlns="http://www.w3.org/2000/svg" class="inline-block mr-1" width="12" height="12" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
          <path d="M9 6l-6 6l6 6" />
        </svg>
        Cancelar
      </a>
    </div>
  </form>
  </div>
</div>
{% block script_app %}
<script src="{% static 'js/app/resourceitem_app.js' %}"></script>
{% endblock %}
{% endblock %}